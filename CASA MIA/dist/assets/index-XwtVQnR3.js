(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function iC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Py={exports:{}},wc={},Ry={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var na=Symbol.for("react.element"),oC=Symbol.for("react.portal"),aC=Symbol.for("react.fragment"),lC=Symbol.for("react.strict_mode"),cC=Symbol.for("react.profiler"),uC=Symbol.for("react.provider"),dC=Symbol.for("react.context"),hC=Symbol.for("react.forward_ref"),fC=Symbol.for("react.suspense"),pC=Symbol.for("react.memo"),mC=Symbol.for("react.lazy"),Fm=Symbol.iterator;function gC(t){return t===null||typeof t!="object"?null:(t=Fm&&t[Fm]||t["@@iterator"],typeof t=="function"?t:null)}var Ay={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},by=Object.assign,Oy={};function di(t,e,n){this.props=t,this.context=e,this.refs=Oy,this.updater=n||Ay}di.prototype.isReactComponent={};di.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};di.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Dy(){}Dy.prototype=di.prototype;function Fh(t,e,n){this.props=t,this.context=e,this.refs=Oy,this.updater=n||Ay}var Uh=Fh.prototype=new Dy;Uh.constructor=Fh;by(Uh,di.prototype);Uh.isPureReactComponent=!0;var Um=Array.isArray,Ly=Object.prototype.hasOwnProperty,$h={current:null},My={key:!0,ref:!0,__self:!0,__source:!0};function Fy(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Ly.call(e,r)&&!My.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:na,type:t,key:i,ref:o,props:s,_owner:$h.current}}function vC(t,e){return{$$typeof:na,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vh(t){return typeof t=="object"&&t!==null&&t.$$typeof===na}function yC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $m=/\/+/g;function Tu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?yC(""+t.key):e.toString(36)}function rl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case na:case oC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Tu(o,0):r,Um(s)?(n="",t!=null&&(n=t.replace($m,"$&/")+"/"),rl(s,e,n,"",function(d){return d})):s!=null&&(Vh(s)&&(s=vC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace($m,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Um(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+Tu(i,c);o+=rl(i,e,n,u,s)}else if(u=gC(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+Tu(i,c++),o+=rl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Oa(t,e,n){if(t==null)return t;var r=[],s=0;return rl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function _C(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var at={current:null},sl={transition:null},wC={ReactCurrentDispatcher:at,ReactCurrentBatchConfig:sl,ReactCurrentOwner:$h};function Uy(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:Oa,forEach:function(t,e,n){Oa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Oa(t,function(){e++}),e},toArray:function(t){return Oa(t,function(e){return e})||[]},only:function(t){if(!Vh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Z.Component=di;Z.Fragment=aC;Z.Profiler=cC;Z.PureComponent=Fh;Z.StrictMode=lC;Z.Suspense=fC;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wC;Z.act=Uy;Z.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=by({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=$h.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Ly.call(e,u)&&!My.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:na,type:t.type,key:s,ref:i,props:r,_owner:o}};Z.createContext=function(t){return t={$$typeof:dC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:uC,_context:t},t.Consumer=t};Z.createElement=Fy;Z.createFactory=function(t){var e=Fy.bind(null,t);return e.type=t,e};Z.createRef=function(){return{current:null}};Z.forwardRef=function(t){return{$$typeof:hC,render:t}};Z.isValidElement=Vh;Z.lazy=function(t){return{$$typeof:mC,_payload:{_status:-1,_result:t},_init:_C}};Z.memo=function(t,e){return{$$typeof:pC,type:t,compare:e===void 0?null:e}};Z.startTransition=function(t){var e=sl.transition;sl.transition={};try{t()}finally{sl.transition=e}};Z.unstable_act=Uy;Z.useCallback=function(t,e){return at.current.useCallback(t,e)};Z.useContext=function(t){return at.current.useContext(t)};Z.useDebugValue=function(){};Z.useDeferredValue=function(t){return at.current.useDeferredValue(t)};Z.useEffect=function(t,e){return at.current.useEffect(t,e)};Z.useId=function(){return at.current.useId()};Z.useImperativeHandle=function(t,e,n){return at.current.useImperativeHandle(t,e,n)};Z.useInsertionEffect=function(t,e){return at.current.useInsertionEffect(t,e)};Z.useLayoutEffect=function(t,e){return at.current.useLayoutEffect(t,e)};Z.useMemo=function(t,e){return at.current.useMemo(t,e)};Z.useReducer=function(t,e,n){return at.current.useReducer(t,e,n)};Z.useRef=function(t){return at.current.useRef(t)};Z.useState=function(t){return at.current.useState(t)};Z.useSyncExternalStore=function(t,e,n){return at.current.useSyncExternalStore(t,e,n)};Z.useTransition=function(){return at.current.useTransition()};Z.version="18.3.1";Ry.exports=Z;var j=Ry.exports;const $y=iC(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EC=j,xC=Symbol.for("react.element"),SC=Symbol.for("react.fragment"),CC=Object.prototype.hasOwnProperty,NC=EC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,IC={key:!0,ref:!0,__self:!0,__source:!0};function Vy(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)CC.call(e,r)&&!IC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:xC,type:t,key:i,ref:o,props:s,_owner:NC.current}}wc.Fragment=SC;wc.jsx=Vy;wc.jsxs=Vy;Py.exports=wc;var a=Py.exports,zy={exports:{}},Et={},Hy={exports:{}},By={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,q){var K=V.length;V.push(q);e:for(;0<K;){var me=K-1>>>1,Ce=V[me];if(0<s(Ce,q))V[me]=q,V[K]=Ce,K=me;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var q=V[0],K=V.pop();if(K!==q){V[0]=K;e:for(var me=0,Ce=V.length,Ar=Ce>>>1;me<Ar;){var St=2*(me+1)-1,br=V[St],Lt=St+1,Un=V[Lt];if(0>s(br,K))Lt<Ce&&0>s(Un,br)?(V[me]=Un,V[Lt]=K,me=Lt):(V[me]=br,V[St]=K,me=St);else if(Lt<Ce&&0>s(Un,K))V[me]=Un,V[Lt]=K,me=Lt;else break e}}return q}function s(V,q){var K=V.sortIndex-q.sortIndex;return K!==0?K:V.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],m=1,p=null,f=3,v=!1,w=!1,T=!1,R=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(V){for(var q=n(d);q!==null;){if(q.callback===null)r(d);else if(q.startTime<=V)r(d),q.sortIndex=q.expirationTime,e(u,q);else break;q=n(d)}}function O(V){if(T=!1,C(V),!w)if(n(u)!==null)w=!0,Dt(L);else{var q=n(d);q!==null&&Rr(O,q.startTime-V)}}function L(V,q){w=!1,T&&(T=!1,E(x),x=-1),v=!0;var K=f;try{for(C(q),p=n(u);p!==null&&(!(p.expirationTime>q)||V&&!P());){var me=p.callback;if(typeof me=="function"){p.callback=null,f=p.priorityLevel;var Ce=me(p.expirationTime<=q);q=t.unstable_now(),typeof Ce=="function"?p.callback=Ce:p===n(u)&&r(u),C(q)}else r(u);p=n(u)}if(p!==null)var Ar=!0;else{var St=n(d);St!==null&&Rr(O,St.startTime-q),Ar=!1}return Ar}finally{p=null,f=K,v=!1}}var M=!1,N=null,x=-1,y=5,I=-1;function P(){return!(t.unstable_now()-I<y)}function A(){if(N!==null){var V=t.unstable_now();I=V;var q=!0;try{q=N(!0,V)}finally{q?k():(M=!1,N=null)}}else M=!1}var k;if(typeof S=="function")k=function(){S(A)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,Ot=Te.port2;Te.port1.onmessage=A,k=function(){Ot.postMessage(null)}}else k=function(){R(A,0)};function Dt(V){N=V,M||(M=!0,k())}function Rr(V,q){x=R(function(){V(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){w||v||(w=!0,Dt(L))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(V){switch(f){case 1:case 2:case 3:var q=3;break;default:q=f}var K=f;f=q;try{return V()}finally{f=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,q){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var K=f;f=V;try{return q()}finally{f=K}},t.unstable_scheduleCallback=function(V,q,K){var me=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?me+K:me):K=me,V){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=K+Ce,V={id:m++,callback:q,priorityLevel:V,startTime:K,expirationTime:Ce,sortIndex:-1},K>me?(V.sortIndex=K,e(d,V),n(u)===null&&V===n(d)&&(T?(E(x),x=-1):T=!0,Rr(O,K-me))):(V.sortIndex=Ce,e(u,V),w||v||(w=!0,Dt(L))),V},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(V){var q=f;return function(){var K=f;f=q;try{return V.apply(this,arguments)}finally{f=K}}}})(By);Hy.exports=By;var TC=Hy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kC=j,wt=TC;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wy=new Set,Co={};function hs(t,e){Qs(t,e),Qs(t+"Capture",e)}function Qs(t,e){for(Co[t]=e,t=0;t<e.length;t++)Wy.add(e[t])}var Tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yd=Object.prototype.hasOwnProperty,jC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vm={},zm={};function PC(t){return yd.call(zm,t)?!0:yd.call(Vm,t)?!1:jC.test(t)?zm[t]=!0:(Vm[t]=!0,!1)}function RC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function AC(t,e,n,r){if(e===null||typeof e>"u"||RC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function lt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ge[t]=new lt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ge[e]=new lt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ge[t]=new lt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ge[t]=new lt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ge[t]=new lt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ge[t]=new lt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ge[t]=new lt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ge[t]=new lt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ge[t]=new lt(t,5,!1,t.toLowerCase(),null,!1,!1)});var zh=/[\-:]([a-z])/g;function Hh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(zh,Hh);Ge[e]=new lt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(zh,Hh);Ge[e]=new lt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(zh,Hh);Ge[e]=new lt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ge[t]=new lt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ge.xlinkHref=new lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ge[t]=new lt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bh(t,e,n,r){var s=Ge.hasOwnProperty(e)?Ge[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(AC(e,n,s,r)&&(n=null),r||s===null?PC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ln=kC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Da=Symbol.for("react.element"),Cs=Symbol.for("react.portal"),Ns=Symbol.for("react.fragment"),Wh=Symbol.for("react.strict_mode"),_d=Symbol.for("react.profiler"),Gy=Symbol.for("react.provider"),qy=Symbol.for("react.context"),Gh=Symbol.for("react.forward_ref"),wd=Symbol.for("react.suspense"),Ed=Symbol.for("react.suspense_list"),qh=Symbol.for("react.memo"),Kn=Symbol.for("react.lazy"),Ky=Symbol.for("react.offscreen"),Hm=Symbol.iterator;function Ui(t){return t===null||typeof t!="object"?null:(t=Hm&&t[Hm]||t["@@iterator"],typeof t=="function"?t:null)}var we=Object.assign,ku;function Ji(t){if(ku===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ku=e&&e[1]||""}return`
`+ku+t}var ju=!1;function Pu(t,e){if(!t||ju)return"";ju=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{ju=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ji(t):""}function bC(t){switch(t.tag){case 5:return Ji(t.type);case 16:return Ji("Lazy");case 13:return Ji("Suspense");case 19:return Ji("SuspenseList");case 0:case 2:case 15:return t=Pu(t.type,!1),t;case 11:return t=Pu(t.type.render,!1),t;case 1:return t=Pu(t.type,!0),t;default:return""}}function xd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ns:return"Fragment";case Cs:return"Portal";case _d:return"Profiler";case Wh:return"StrictMode";case wd:return"Suspense";case Ed:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case qy:return(t.displayName||"Context")+".Consumer";case Gy:return(t._context.displayName||"Context")+".Provider";case Gh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qh:return e=t.displayName||null,e!==null?e:xd(t.type)||"Memo";case Kn:e=t._payload,t=t._init;try{return xd(t(e))}catch{}}return null}function OC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xd(e);case 8:return e===Wh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Yy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function DC(t){var e=Yy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function La(t){t._valueTracker||(t._valueTracker=DC(t))}function Qy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Yy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Sl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sd(t,e){var n=e.checked;return we({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Bm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=vr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Xy(t,e){e=e.checked,e!=null&&Bh(t,"checked",e,!1)}function Cd(t,e){Xy(t,e);var n=vr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Nd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Nd(t,e.type,vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Wm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Nd(t,e,n){(e!=="number"||Sl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Zi=Array.isArray;function Fs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+vr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Id(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return we({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Gm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(Zi(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vr(n)}}function Jy(t,e){var n=vr(e.value),r=vr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function qm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Zy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Td(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Zy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ma,e_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ma=Ma||document.createElement("div"),Ma.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ma.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function No(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var so={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LC=["Webkit","ms","Moz","O"];Object.keys(so).forEach(function(t){LC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),so[e]=so[t]})});function t_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||so.hasOwnProperty(t)&&so[t]?(""+e).trim():e+"px"}function n_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=t_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var MC=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kd(t,e){if(e){if(MC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function jd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pd=null;function Kh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rd=null,Us=null,$s=null;function Km(t){if(t=ia(t)){if(typeof Rd!="function")throw Error(F(280));var e=t.stateNode;e&&(e=Nc(e),Rd(t.stateNode,t.type,e))}}function r_(t){Us?$s?$s.push(t):$s=[t]:Us=t}function s_(){if(Us){var t=Us,e=$s;if($s=Us=null,Km(t),e)for(t=0;t<e.length;t++)Km(e[t])}}function i_(t,e){return t(e)}function o_(){}var Ru=!1;function a_(t,e,n){if(Ru)return t(e,n);Ru=!0;try{return i_(t,e,n)}finally{Ru=!1,(Us!==null||$s!==null)&&(o_(),s_())}}function Io(t,e){var n=t.stateNode;if(n===null)return null;var r=Nc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var Ad=!1;if(Tn)try{var $i={};Object.defineProperty($i,"passive",{get:function(){Ad=!0}}),window.addEventListener("test",$i,$i),window.removeEventListener("test",$i,$i)}catch{Ad=!1}function FC(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(m){this.onError(m)}}var io=!1,Cl=null,Nl=!1,bd=null,UC={onError:function(t){io=!0,Cl=t}};function $C(t,e,n,r,s,i,o,c,u){io=!1,Cl=null,FC.apply(UC,arguments)}function VC(t,e,n,r,s,i,o,c,u){if($C.apply(this,arguments),io){if(io){var d=Cl;io=!1,Cl=null}else throw Error(F(198));Nl||(Nl=!0,bd=d)}}function fs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function l_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ym(t){if(fs(t)!==t)throw Error(F(188))}function zC(t){var e=t.alternate;if(!e){if(e=fs(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ym(s),t;if(i===r)return Ym(s),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function c_(t){return t=zC(t),t!==null?u_(t):null}function u_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=u_(t);if(e!==null)return e;t=t.sibling}return null}var d_=wt.unstable_scheduleCallback,Qm=wt.unstable_cancelCallback,HC=wt.unstable_shouldYield,BC=wt.unstable_requestPaint,Ie=wt.unstable_now,WC=wt.unstable_getCurrentPriorityLevel,Yh=wt.unstable_ImmediatePriority,h_=wt.unstable_UserBlockingPriority,Il=wt.unstable_NormalPriority,GC=wt.unstable_LowPriority,f_=wt.unstable_IdlePriority,Ec=null,ln=null;function qC(t){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(Ec,t,void 0,(t.current.flags&128)===128)}catch{}}var Gt=Math.clz32?Math.clz32:QC,KC=Math.log,YC=Math.LN2;function QC(t){return t>>>=0,t===0?32:31-(KC(t)/YC|0)|0}var Fa=64,Ua=4194304;function eo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=eo(c):(i&=o,i!==0&&(r=eo(i)))}else o=n&~s,o!==0?r=eo(o):i!==0&&(r=eo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Gt(e),s=1<<n,r|=t[n],e&=~s;return r}function XC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Gt(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=XC(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function Od(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function p_(){var t=Fa;return Fa<<=1,!(Fa&4194240)&&(Fa=64),t}function Au(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ra(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gt(e),t[e]=n}function ZC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Gt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Qh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Gt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var oe=0;function m_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var g_,Xh,v_,y_,__,Dd=!1,$a=[],ir=null,or=null,ar=null,To=new Map,ko=new Map,Qn=[],eN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xm(t,e){switch(t){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":To.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ko.delete(e.pointerId)}}function Vi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ia(e),e!==null&&Xh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function tN(t,e,n,r,s){switch(e){case"focusin":return ir=Vi(ir,t,e,n,r,s),!0;case"dragenter":return or=Vi(or,t,e,n,r,s),!0;case"mouseover":return ar=Vi(ar,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return To.set(i,Vi(To.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ko.set(i,Vi(ko.get(i)||null,t,e,n,r,s)),!0}return!1}function w_(t){var e=Br(t.target);if(e!==null){var n=fs(e);if(n!==null){if(e=n.tag,e===13){if(e=l_(n),e!==null){t.blockedOn=e,__(t.priority,function(){v_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function il(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ld(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Pd=r,n.target.dispatchEvent(r),Pd=null}else return e=ia(n),e!==null&&Xh(e),t.blockedOn=n,!1;e.shift()}return!0}function Jm(t,e,n){il(t)&&n.delete(e)}function nN(){Dd=!1,ir!==null&&il(ir)&&(ir=null),or!==null&&il(or)&&(or=null),ar!==null&&il(ar)&&(ar=null),To.forEach(Jm),ko.forEach(Jm)}function zi(t,e){t.blockedOn===e&&(t.blockedOn=null,Dd||(Dd=!0,wt.unstable_scheduleCallback(wt.unstable_NormalPriority,nN)))}function jo(t){function e(s){return zi(s,t)}if(0<$a.length){zi($a[0],t);for(var n=1;n<$a.length;n++){var r=$a[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ir!==null&&zi(ir,t),or!==null&&zi(or,t),ar!==null&&zi(ar,t),To.forEach(e),ko.forEach(e),n=0;n<Qn.length;n++)r=Qn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Qn.length&&(n=Qn[0],n.blockedOn===null);)w_(n),n.blockedOn===null&&Qn.shift()}var Vs=Ln.ReactCurrentBatchConfig,kl=!0;function rN(t,e,n,r){var s=oe,i=Vs.transition;Vs.transition=null;try{oe=1,Jh(t,e,n,r)}finally{oe=s,Vs.transition=i}}function sN(t,e,n,r){var s=oe,i=Vs.transition;Vs.transition=null;try{oe=4,Jh(t,e,n,r)}finally{oe=s,Vs.transition=i}}function Jh(t,e,n,r){if(kl){var s=Ld(t,e,n,r);if(s===null)zu(t,e,r,jl,n),Xm(t,r);else if(tN(s,t,e,n,r))r.stopPropagation();else if(Xm(t,r),e&4&&-1<eN.indexOf(t)){for(;s!==null;){var i=ia(s);if(i!==null&&g_(i),i=Ld(t,e,n,r),i===null&&zu(t,e,r,jl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else zu(t,e,r,null,n)}}var jl=null;function Ld(t,e,n,r){if(jl=null,t=Kh(r),t=Br(t),t!==null)if(e=fs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=l_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return jl=t,null}function E_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(WC()){case Yh:return 1;case h_:return 4;case Il:case GC:return 16;case f_:return 536870912;default:return 16}default:return 16}}var nr=null,Zh=null,ol=null;function x_(){if(ol)return ol;var t,e=Zh,n=e.length,r,s="value"in nr?nr.value:nr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ol=s.slice(t,1<r?1-r:void 0)}function al(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Va(){return!0}function Zm(){return!1}function xt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Va:Zm,this.isPropagationStopped=Zm,this}return we(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Va)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Va)},persist:function(){},isPersistent:Va}),e}var hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ef=xt(hi),sa=we({},hi,{view:0,detail:0}),iN=xt(sa),bu,Ou,Hi,xc=we({},sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Hi&&(Hi&&t.type==="mousemove"?(bu=t.screenX-Hi.screenX,Ou=t.screenY-Hi.screenY):Ou=bu=0,Hi=t),bu)},movementY:function(t){return"movementY"in t?t.movementY:Ou}}),eg=xt(xc),oN=we({},xc,{dataTransfer:0}),aN=xt(oN),lN=we({},sa,{relatedTarget:0}),Du=xt(lN),cN=we({},hi,{animationName:0,elapsedTime:0,pseudoElement:0}),uN=xt(cN),dN=we({},hi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hN=xt(dN),fN=we({},hi,{data:0}),tg=xt(fN),pN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=gN[t])?!!e[t]:!1}function tf(){return vN}var yN=we({},sa,{key:function(t){if(t.key){var e=pN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=al(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tf,charCode:function(t){return t.type==="keypress"?al(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?al(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_N=xt(yN),wN=we({},xc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ng=xt(wN),EN=we({},sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tf}),xN=xt(EN),SN=we({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),CN=xt(SN),NN=we({},xc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),IN=xt(NN),TN=[9,13,27,32],nf=Tn&&"CompositionEvent"in window,oo=null;Tn&&"documentMode"in document&&(oo=document.documentMode);var kN=Tn&&"TextEvent"in window&&!oo,S_=Tn&&(!nf||oo&&8<oo&&11>=oo),rg=" ",sg=!1;function C_(t,e){switch(t){case"keyup":return TN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function N_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Is=!1;function jN(t,e){switch(t){case"compositionend":return N_(e);case"keypress":return e.which!==32?null:(sg=!0,rg);case"textInput":return t=e.data,t===rg&&sg?null:t;default:return null}}function PN(t,e){if(Is)return t==="compositionend"||!nf&&C_(t,e)?(t=x_(),ol=Zh=nr=null,Is=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return S_&&e.locale!=="ko"?null:e.data;default:return null}}var RN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ig(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!RN[t.type]:e==="textarea"}function I_(t,e,n,r){r_(r),e=Pl(e,"onChange"),0<e.length&&(n=new ef("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ao=null,Po=null;function AN(t){M_(t,0)}function Sc(t){var e=js(t);if(Qy(e))return t}function bN(t,e){if(t==="change")return e}var T_=!1;if(Tn){var Lu;if(Tn){var Mu="oninput"in document;if(!Mu){var og=document.createElement("div");og.setAttribute("oninput","return;"),Mu=typeof og.oninput=="function"}Lu=Mu}else Lu=!1;T_=Lu&&(!document.documentMode||9<document.documentMode)}function ag(){ao&&(ao.detachEvent("onpropertychange",k_),Po=ao=null)}function k_(t){if(t.propertyName==="value"&&Sc(Po)){var e=[];I_(e,Po,t,Kh(t)),a_(AN,e)}}function ON(t,e,n){t==="focusin"?(ag(),ao=e,Po=n,ao.attachEvent("onpropertychange",k_)):t==="focusout"&&ag()}function DN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Sc(Po)}function LN(t,e){if(t==="click")return Sc(e)}function MN(t,e){if(t==="input"||t==="change")return Sc(e)}function FN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yt=typeof Object.is=="function"?Object.is:FN;function Ro(t,e){if(Yt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!yd.call(e,s)||!Yt(t[s],e[s]))return!1}return!0}function lg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cg(t,e){var n=lg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lg(n)}}function j_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?j_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function P_(){for(var t=window,e=Sl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Sl(t.document)}return e}function rf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function UN(t){var e=P_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&j_(n.ownerDocument.documentElement,n)){if(r!==null&&rf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=cg(n,i);var o=cg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $N=Tn&&"documentMode"in document&&11>=document.documentMode,Ts=null,Md=null,lo=null,Fd=!1;function ug(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Fd||Ts==null||Ts!==Sl(r)||(r=Ts,"selectionStart"in r&&rf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),lo&&Ro(lo,r)||(lo=r,r=Pl(Md,"onSelect"),0<r.length&&(e=new ef("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ts)))}function za(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ks={animationend:za("Animation","AnimationEnd"),animationiteration:za("Animation","AnimationIteration"),animationstart:za("Animation","AnimationStart"),transitionend:za("Transition","TransitionEnd")},Fu={},R_={};Tn&&(R_=document.createElement("div").style,"AnimationEvent"in window||(delete ks.animationend.animation,delete ks.animationiteration.animation,delete ks.animationstart.animation),"TransitionEvent"in window||delete ks.transitionend.transition);function Cc(t){if(Fu[t])return Fu[t];if(!ks[t])return t;var e=ks[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in R_)return Fu[t]=e[n];return t}var A_=Cc("animationend"),b_=Cc("animationiteration"),O_=Cc("animationstart"),D_=Cc("transitionend"),L_=new Map,dg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(t,e){L_.set(t,e),hs(e,[t])}for(var Uu=0;Uu<dg.length;Uu++){var $u=dg[Uu],VN=$u.toLowerCase(),zN=$u[0].toUpperCase()+$u.slice(1);Nr(VN,"on"+zN)}Nr(A_,"onAnimationEnd");Nr(b_,"onAnimationIteration");Nr(O_,"onAnimationStart");Nr("dblclick","onDoubleClick");Nr("focusin","onFocus");Nr("focusout","onBlur");Nr(D_,"onTransitionEnd");Qs("onMouseEnter",["mouseout","mouseover"]);Qs("onMouseLeave",["mouseout","mouseover"]);Qs("onPointerEnter",["pointerout","pointerover"]);Qs("onPointerLeave",["pointerout","pointerover"]);hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hs("onBeforeInput",["compositionend","keypress","textInput","paste"]);hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var to="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HN=new Set("cancel close invalid load scroll toggle".split(" ").concat(to));function hg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,VC(r,e,void 0,t),t.currentTarget=null}function M_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;hg(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;hg(s,c,d),i=u}}}if(Nl)throw t=bd,Nl=!1,bd=null,t}function fe(t,e){var n=e[Hd];n===void 0&&(n=e[Hd]=new Set);var r=t+"__bubble";n.has(r)||(F_(e,t,2,!1),n.add(r))}function Vu(t,e,n){var r=0;e&&(r|=4),F_(n,t,r,e)}var Ha="_reactListening"+Math.random().toString(36).slice(2);function Ao(t){if(!t[Ha]){t[Ha]=!0,Wy.forEach(function(n){n!=="selectionchange"&&(HN.has(n)||Vu(n,!1,t),Vu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ha]||(e[Ha]=!0,Vu("selectionchange",!1,e))}}function F_(t,e,n,r){switch(E_(e)){case 1:var s=rN;break;case 4:s=sN;break;default:s=Jh}n=s.bind(null,e,n,t),s=void 0,!Ad||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function zu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=Br(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}a_(function(){var d=i,m=Kh(n),p=[];e:{var f=L_.get(t);if(f!==void 0){var v=ef,w=t;switch(t){case"keypress":if(al(n)===0)break e;case"keydown":case"keyup":v=_N;break;case"focusin":w="focus",v=Du;break;case"focusout":w="blur",v=Du;break;case"beforeblur":case"afterblur":v=Du;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=eg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=aN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=xN;break;case A_:case b_:case O_:v=uN;break;case D_:v=CN;break;case"scroll":v=iN;break;case"wheel":v=IN;break;case"copy":case"cut":case"paste":v=hN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=ng}var T=(e&4)!==0,R=!T&&t==="scroll",E=T?f!==null?f+"Capture":null:f;T=[];for(var S=d,C;S!==null;){C=S;var O=C.stateNode;if(C.tag===5&&O!==null&&(C=O,E!==null&&(O=Io(S,E),O!=null&&T.push(bo(S,O,C)))),R)break;S=S.return}0<T.length&&(f=new v(f,w,null,n,m),p.push({event:f,listeners:T}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",f&&n!==Pd&&(w=n.relatedTarget||n.fromElement)&&(Br(w)||w[kn]))break e;if((v||f)&&(f=m.window===m?m:(f=m.ownerDocument)?f.defaultView||f.parentWindow:window,v?(w=n.relatedTarget||n.toElement,v=d,w=w?Br(w):null,w!==null&&(R=fs(w),w!==R||w.tag!==5&&w.tag!==6)&&(w=null)):(v=null,w=d),v!==w)){if(T=eg,O="onMouseLeave",E="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(T=ng,O="onPointerLeave",E="onPointerEnter",S="pointer"),R=v==null?f:js(v),C=w==null?f:js(w),f=new T(O,S+"leave",v,n,m),f.target=R,f.relatedTarget=C,O=null,Br(m)===d&&(T=new T(E,S+"enter",w,n,m),T.target=C,T.relatedTarget=R,O=T),R=O,v&&w)t:{for(T=v,E=w,S=0,C=T;C;C=xs(C))S++;for(C=0,O=E;O;O=xs(O))C++;for(;0<S-C;)T=xs(T),S--;for(;0<C-S;)E=xs(E),C--;for(;S--;){if(T===E||E!==null&&T===E.alternate)break t;T=xs(T),E=xs(E)}T=null}else T=null;v!==null&&fg(p,f,v,T,!1),w!==null&&R!==null&&fg(p,R,w,T,!0)}}e:{if(f=d?js(d):window,v=f.nodeName&&f.nodeName.toLowerCase(),v==="select"||v==="input"&&f.type==="file")var L=bN;else if(ig(f))if(T_)L=MN;else{L=DN;var M=ON}else(v=f.nodeName)&&v.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(L=LN);if(L&&(L=L(t,d))){I_(p,L,n,m);break e}M&&M(t,f,d),t==="focusout"&&(M=f._wrapperState)&&M.controlled&&f.type==="number"&&Nd(f,"number",f.value)}switch(M=d?js(d):window,t){case"focusin":(ig(M)||M.contentEditable==="true")&&(Ts=M,Md=d,lo=null);break;case"focusout":lo=Md=Ts=null;break;case"mousedown":Fd=!0;break;case"contextmenu":case"mouseup":case"dragend":Fd=!1,ug(p,n,m);break;case"selectionchange":if($N)break;case"keydown":case"keyup":ug(p,n,m)}var N;if(nf)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Is?C_(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(S_&&n.locale!=="ko"&&(Is||x!=="onCompositionStart"?x==="onCompositionEnd"&&Is&&(N=x_()):(nr=m,Zh="value"in nr?nr.value:nr.textContent,Is=!0)),M=Pl(d,x),0<M.length&&(x=new tg(x,t,null,n,m),p.push({event:x,listeners:M}),N?x.data=N:(N=N_(n),N!==null&&(x.data=N)))),(N=kN?jN(t,n):PN(t,n))&&(d=Pl(d,"onBeforeInput"),0<d.length&&(m=new tg("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:d}),m.data=N))}M_(p,e)})}function bo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Io(t,n),i!=null&&r.unshift(bo(t,i,s)),i=Io(t,e),i!=null&&r.push(bo(t,i,s))),t=t.return}return r}function xs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function fg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Io(n,i),u!=null&&o.unshift(bo(n,u,c))):s||(u=Io(n,i),u!=null&&o.push(bo(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var BN=/\r\n?/g,WN=/\u0000|\uFFFD/g;function pg(t){return(typeof t=="string"?t:""+t).replace(BN,`
`).replace(WN,"")}function Ba(t,e,n){if(e=pg(e),pg(t)!==e&&n)throw Error(F(425))}function Rl(){}var Ud=null,$d=null;function Vd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zd=typeof setTimeout=="function"?setTimeout:void 0,GN=typeof clearTimeout=="function"?clearTimeout:void 0,mg=typeof Promise=="function"?Promise:void 0,qN=typeof queueMicrotask=="function"?queueMicrotask:typeof mg<"u"?function(t){return mg.resolve(null).then(t).catch(KN)}:zd;function KN(t){setTimeout(function(){throw t})}function Hu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),jo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);jo(e)}function lr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function gg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var fi=Math.random().toString(36).slice(2),on="__reactFiber$"+fi,Oo="__reactProps$"+fi,kn="__reactContainer$"+fi,Hd="__reactEvents$"+fi,YN="__reactListeners$"+fi,QN="__reactHandles$"+fi;function Br(t){var e=t[on];if(e)return e;for(var n=t.parentNode;n;){if(e=n[kn]||n[on]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=gg(t);t!==null;){if(n=t[on])return n;t=gg(t)}return e}t=n,n=t.parentNode}return null}function ia(t){return t=t[on]||t[kn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function js(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function Nc(t){return t[Oo]||null}var Bd=[],Ps=-1;function Ir(t){return{current:t}}function pe(t){0>Ps||(t.current=Bd[Ps],Bd[Ps]=null,Ps--)}function de(t,e){Ps++,Bd[Ps]=t.current,t.current=e}var yr={},Je=Ir(yr),pt=Ir(!1),Zr=yr;function Xs(t,e){var n=t.type.contextTypes;if(!n)return yr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function mt(t){return t=t.childContextTypes,t!=null}function Al(){pe(pt),pe(Je)}function vg(t,e,n){if(Je.current!==yr)throw Error(F(168));de(Je,e),de(pt,n)}function U_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(F(108,OC(t)||"Unknown",s));return we({},n,r)}function bl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||yr,Zr=Je.current,de(Je,t),de(pt,pt.current),!0}function yg(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=U_(t,e,Zr),r.__reactInternalMemoizedMergedChildContext=t,pe(pt),pe(Je),de(Je,t)):pe(pt),de(pt,n)}var gn=null,Ic=!1,Bu=!1;function $_(t){gn===null?gn=[t]:gn.push(t)}function XN(t){Ic=!0,$_(t)}function Tr(){if(!Bu&&gn!==null){Bu=!0;var t=0,e=oe;try{var n=gn;for(oe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}gn=null,Ic=!1}catch(s){throw gn!==null&&(gn=gn.slice(t+1)),d_(Yh,Tr),s}finally{oe=e,Bu=!1}}return null}var Rs=[],As=0,Ol=null,Dl=0,Nt=[],It=0,es=null,yn=1,_n="";function Fr(t,e){Rs[As++]=Dl,Rs[As++]=Ol,Ol=t,Dl=e}function V_(t,e,n){Nt[It++]=yn,Nt[It++]=_n,Nt[It++]=es,es=t;var r=yn;t=_n;var s=32-Gt(r)-1;r&=~(1<<s),n+=1;var i=32-Gt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,yn=1<<32-Gt(e)+s|n<<s|r,_n=i+t}else yn=1<<i|n<<s|r,_n=t}function sf(t){t.return!==null&&(Fr(t,1),V_(t,1,0))}function of(t){for(;t===Ol;)Ol=Rs[--As],Rs[As]=null,Dl=Rs[--As],Rs[As]=null;for(;t===es;)es=Nt[--It],Nt[It]=null,_n=Nt[--It],Nt[It]=null,yn=Nt[--It],Nt[It]=null}var _t=null,yt=null,ge=!1,$t=null;function z_(t,e){var n=Tt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function _g(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_t=t,yt=lr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_t=t,yt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=es!==null?{id:yn,overflow:_n}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Tt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,_t=t,yt=null,!0):!1;default:return!1}}function Wd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Gd(t){if(ge){var e=yt;if(e){var n=e;if(!_g(t,e)){if(Wd(t))throw Error(F(418));e=lr(n.nextSibling);var r=_t;e&&_g(t,e)?z_(r,n):(t.flags=t.flags&-4097|2,ge=!1,_t=t)}}else{if(Wd(t))throw Error(F(418));t.flags=t.flags&-4097|2,ge=!1,_t=t}}}function wg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_t=t}function Wa(t){if(t!==_t)return!1;if(!ge)return wg(t),ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Vd(t.type,t.memoizedProps)),e&&(e=yt)){if(Wd(t))throw H_(),Error(F(418));for(;e;)z_(t,e),e=lr(e.nextSibling)}if(wg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){yt=lr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}yt=null}}else yt=_t?lr(t.stateNode.nextSibling):null;return!0}function H_(){for(var t=yt;t;)t=lr(t.nextSibling)}function Js(){yt=_t=null,ge=!1}function af(t){$t===null?$t=[t]:$t.push(t)}var JN=Ln.ReactCurrentBatchConfig;function Bi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function Ga(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Eg(t){var e=t._init;return e(t._payload)}function B_(t){function e(E,S){if(t){var C=E.deletions;C===null?(E.deletions=[S],E.flags|=16):C.push(S)}}function n(E,S){if(!t)return null;for(;S!==null;)e(E,S),S=S.sibling;return null}function r(E,S){for(E=new Map;S!==null;)S.key!==null?E.set(S.key,S):E.set(S.index,S),S=S.sibling;return E}function s(E,S){return E=hr(E,S),E.index=0,E.sibling=null,E}function i(E,S,C){return E.index=C,t?(C=E.alternate,C!==null?(C=C.index,C<S?(E.flags|=2,S):C):(E.flags|=2,S)):(E.flags|=1048576,S)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function c(E,S,C,O){return S===null||S.tag!==6?(S=Xu(C,E.mode,O),S.return=E,S):(S=s(S,C),S.return=E,S)}function u(E,S,C,O){var L=C.type;return L===Ns?m(E,S,C.props.children,O,C.key):S!==null&&(S.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Kn&&Eg(L)===S.type)?(O=s(S,C.props),O.ref=Bi(E,S,C),O.return=E,O):(O=pl(C.type,C.key,C.props,null,E.mode,O),O.ref=Bi(E,S,C),O.return=E,O)}function d(E,S,C,O){return S===null||S.tag!==4||S.stateNode.containerInfo!==C.containerInfo||S.stateNode.implementation!==C.implementation?(S=Ju(C,E.mode,O),S.return=E,S):(S=s(S,C.children||[]),S.return=E,S)}function m(E,S,C,O,L){return S===null||S.tag!==7?(S=Qr(C,E.mode,O,L),S.return=E,S):(S=s(S,C),S.return=E,S)}function p(E,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Xu(""+S,E.mode,C),S.return=E,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Da:return C=pl(S.type,S.key,S.props,null,E.mode,C),C.ref=Bi(E,null,S),C.return=E,C;case Cs:return S=Ju(S,E.mode,C),S.return=E,S;case Kn:var O=S._init;return p(E,O(S._payload),C)}if(Zi(S)||Ui(S))return S=Qr(S,E.mode,C,null),S.return=E,S;Ga(E,S)}return null}function f(E,S,C,O){var L=S!==null?S.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return L!==null?null:c(E,S,""+C,O);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Da:return C.key===L?u(E,S,C,O):null;case Cs:return C.key===L?d(E,S,C,O):null;case Kn:return L=C._init,f(E,S,L(C._payload),O)}if(Zi(C)||Ui(C))return L!==null?null:m(E,S,C,O,null);Ga(E,C)}return null}function v(E,S,C,O,L){if(typeof O=="string"&&O!==""||typeof O=="number")return E=E.get(C)||null,c(S,E,""+O,L);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Da:return E=E.get(O.key===null?C:O.key)||null,u(S,E,O,L);case Cs:return E=E.get(O.key===null?C:O.key)||null,d(S,E,O,L);case Kn:var M=O._init;return v(E,S,C,M(O._payload),L)}if(Zi(O)||Ui(O))return E=E.get(C)||null,m(S,E,O,L,null);Ga(S,O)}return null}function w(E,S,C,O){for(var L=null,M=null,N=S,x=S=0,y=null;N!==null&&x<C.length;x++){N.index>x?(y=N,N=null):y=N.sibling;var I=f(E,N,C[x],O);if(I===null){N===null&&(N=y);break}t&&N&&I.alternate===null&&e(E,N),S=i(I,S,x),M===null?L=I:M.sibling=I,M=I,N=y}if(x===C.length)return n(E,N),ge&&Fr(E,x),L;if(N===null){for(;x<C.length;x++)N=p(E,C[x],O),N!==null&&(S=i(N,S,x),M===null?L=N:M.sibling=N,M=N);return ge&&Fr(E,x),L}for(N=r(E,N);x<C.length;x++)y=v(N,E,x,C[x],O),y!==null&&(t&&y.alternate!==null&&N.delete(y.key===null?x:y.key),S=i(y,S,x),M===null?L=y:M.sibling=y,M=y);return t&&N.forEach(function(P){return e(E,P)}),ge&&Fr(E,x),L}function T(E,S,C,O){var L=Ui(C);if(typeof L!="function")throw Error(F(150));if(C=L.call(C),C==null)throw Error(F(151));for(var M=L=null,N=S,x=S=0,y=null,I=C.next();N!==null&&!I.done;x++,I=C.next()){N.index>x?(y=N,N=null):y=N.sibling;var P=f(E,N,I.value,O);if(P===null){N===null&&(N=y);break}t&&N&&P.alternate===null&&e(E,N),S=i(P,S,x),M===null?L=P:M.sibling=P,M=P,N=y}if(I.done)return n(E,N),ge&&Fr(E,x),L;if(N===null){for(;!I.done;x++,I=C.next())I=p(E,I.value,O),I!==null&&(S=i(I,S,x),M===null?L=I:M.sibling=I,M=I);return ge&&Fr(E,x),L}for(N=r(E,N);!I.done;x++,I=C.next())I=v(N,E,x,I.value,O),I!==null&&(t&&I.alternate!==null&&N.delete(I.key===null?x:I.key),S=i(I,S,x),M===null?L=I:M.sibling=I,M=I);return t&&N.forEach(function(A){return e(E,A)}),ge&&Fr(E,x),L}function R(E,S,C,O){if(typeof C=="object"&&C!==null&&C.type===Ns&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Da:e:{for(var L=C.key,M=S;M!==null;){if(M.key===L){if(L=C.type,L===Ns){if(M.tag===7){n(E,M.sibling),S=s(M,C.props.children),S.return=E,E=S;break e}}else if(M.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Kn&&Eg(L)===M.type){n(E,M.sibling),S=s(M,C.props),S.ref=Bi(E,M,C),S.return=E,E=S;break e}n(E,M);break}else e(E,M);M=M.sibling}C.type===Ns?(S=Qr(C.props.children,E.mode,O,C.key),S.return=E,E=S):(O=pl(C.type,C.key,C.props,null,E.mode,O),O.ref=Bi(E,S,C),O.return=E,E=O)}return o(E);case Cs:e:{for(M=C.key;S!==null;){if(S.key===M)if(S.tag===4&&S.stateNode.containerInfo===C.containerInfo&&S.stateNode.implementation===C.implementation){n(E,S.sibling),S=s(S,C.children||[]),S.return=E,E=S;break e}else{n(E,S);break}else e(E,S);S=S.sibling}S=Ju(C,E.mode,O),S.return=E,E=S}return o(E);case Kn:return M=C._init,R(E,S,M(C._payload),O)}if(Zi(C))return w(E,S,C,O);if(Ui(C))return T(E,S,C,O);Ga(E,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,S!==null&&S.tag===6?(n(E,S.sibling),S=s(S,C),S.return=E,E=S):(n(E,S),S=Xu(C,E.mode,O),S.return=E,E=S),o(E)):n(E,S)}return R}var Zs=B_(!0),W_=B_(!1),Ll=Ir(null),Ml=null,bs=null,lf=null;function cf(){lf=bs=Ml=null}function uf(t){var e=Ll.current;pe(Ll),t._currentValue=e}function qd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function zs(t,e){Ml=t,lf=bs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dt=!0),t.firstContext=null)}function Rt(t){var e=t._currentValue;if(lf!==t)if(t={context:t,memoizedValue:e,next:null},bs===null){if(Ml===null)throw Error(F(308));bs=t,Ml.dependencies={lanes:0,firstContext:t}}else bs=bs.next=t;return e}var Wr=null;function df(t){Wr===null?Wr=[t]:Wr.push(t)}function G_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,df(e)):(n.next=s.next,s.next=n),e.interleaved=n,jn(t,r)}function jn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yn=!1;function hf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function q_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Sn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function cr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,re&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,jn(t,n)}return s=r.interleaved,s===null?(e.next=e,df(r)):(e.next=s.next,s.next=e),r.interleaved=e,jn(t,n)}function ll(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qh(t,n)}}function xg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fl(t,e,n,r){var s=t.updateQueue;Yn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var m=t.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==o&&(c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,m=d=u=null,c=i;do{var f=c.lane,v=c.eventTime;if((r&f)===f){m!==null&&(m=m.next={eventTime:v,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var w=t,T=c;switch(f=e,v=n,T.tag){case 1:if(w=T.payload,typeof w=="function"){p=w.call(v,p,f);break e}p=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=T.payload,f=typeof w=="function"?w.call(v,p,f):w,f==null)break e;p=we({},p,f);break e;case 2:Yn=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[c]:f.push(c))}else v={eventTime:v,lane:f,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(d=m=v,u=p):m=m.next=v,o|=f;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;f=c,c=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(m===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ns|=o,t.lanes=o,t.memoizedState=p}}function Sg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var oa={},cn=Ir(oa),Do=Ir(oa),Lo=Ir(oa);function Gr(t){if(t===oa)throw Error(F(174));return t}function ff(t,e){switch(de(Lo,e),de(Do,t),de(cn,oa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Td(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Td(e,t)}pe(cn),de(cn,e)}function ei(){pe(cn),pe(Do),pe(Lo)}function K_(t){Gr(Lo.current);var e=Gr(cn.current),n=Td(e,t.type);e!==n&&(de(Do,t),de(cn,n))}function pf(t){Do.current===t&&(pe(cn),pe(Do))}var ye=Ir(0);function Ul(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wu=[];function mf(){for(var t=0;t<Wu.length;t++)Wu[t]._workInProgressVersionPrimary=null;Wu.length=0}var cl=Ln.ReactCurrentDispatcher,Gu=Ln.ReactCurrentBatchConfig,ts=0,_e=null,Ae=null,Ue=null,$l=!1,co=!1,Mo=0,ZN=0;function Ye(){throw Error(F(321))}function gf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yt(t[n],e[n]))return!1;return!0}function vf(t,e,n,r,s,i){if(ts=i,_e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cl.current=t===null||t.memoizedState===null?r0:s0,t=n(r,s),co){i=0;do{if(co=!1,Mo=0,25<=i)throw Error(F(301));i+=1,Ue=Ae=null,e.updateQueue=null,cl.current=i0,t=n(r,s)}while(co)}if(cl.current=Vl,e=Ae!==null&&Ae.next!==null,ts=0,Ue=Ae=_e=null,$l=!1,e)throw Error(F(300));return t}function yf(){var t=Mo!==0;return Mo=0,t}function nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?_e.memoizedState=Ue=t:Ue=Ue.next=t,Ue}function At(){if(Ae===null){var t=_e.alternate;t=t!==null?t.memoizedState:null}else t=Ae.next;var e=Ue===null?_e.memoizedState:Ue.next;if(e!==null)Ue=e,Ae=t;else{if(t===null)throw Error(F(310));Ae=t,t={memoizedState:Ae.memoizedState,baseState:Ae.baseState,baseQueue:Ae.baseQueue,queue:Ae.queue,next:null},Ue===null?_e.memoizedState=Ue=t:Ue=Ue.next=t}return Ue}function Fo(t,e){return typeof e=="function"?e(t):e}function qu(t){var e=At(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Ae,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var m=d.lane;if((ts&m)===m)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=p,o=r):u=u.next=p,_e.lanes|=m,ns|=m}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,Yt(r,e.memoizedState)||(dt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,_e.lanes|=i,ns|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ku(t){var e=At(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Yt(i,e.memoizedState)||(dt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Y_(){}function Q_(t,e){var n=_e,r=At(),s=e(),i=!Yt(r.memoizedState,s);if(i&&(r.memoizedState=s,dt=!0),r=r.queue,_f(Z_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ue!==null&&Ue.memoizedState.tag&1){if(n.flags|=2048,Uo(9,J_.bind(null,n,r,s,e),void 0,null),Ve===null)throw Error(F(349));ts&30||X_(n,e,s)}return s}function X_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function J_(t,e,n,r){e.value=n,e.getSnapshot=r,ew(e)&&tw(t)}function Z_(t,e,n){return n(function(){ew(e)&&tw(t)})}function ew(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yt(t,n)}catch{return!0}}function tw(t){var e=jn(t,1);e!==null&&qt(e,t,1,-1)}function Cg(t){var e=nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fo,lastRenderedState:t},e.queue=t,t=t.dispatch=n0.bind(null,_e,t),[e.memoizedState,t]}function Uo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function nw(){return At().memoizedState}function ul(t,e,n,r){var s=nn();_e.flags|=t,s.memoizedState=Uo(1|e,n,void 0,r===void 0?null:r)}function Tc(t,e,n,r){var s=At();r=r===void 0?null:r;var i=void 0;if(Ae!==null){var o=Ae.memoizedState;if(i=o.destroy,r!==null&&gf(r,o.deps)){s.memoizedState=Uo(e,n,i,r);return}}_e.flags|=t,s.memoizedState=Uo(1|e,n,i,r)}function Ng(t,e){return ul(8390656,8,t,e)}function _f(t,e){return Tc(2048,8,t,e)}function rw(t,e){return Tc(4,2,t,e)}function sw(t,e){return Tc(4,4,t,e)}function iw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ow(t,e,n){return n=n!=null?n.concat([t]):null,Tc(4,4,iw.bind(null,e,t),n)}function wf(){}function aw(t,e){var n=At();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function lw(t,e){var n=At();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function cw(t,e,n){return ts&21?(Yt(n,e)||(n=p_(),_e.lanes|=n,ns|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dt=!0),t.memoizedState=n)}function e0(t,e){var n=oe;oe=n!==0&&4>n?n:4,t(!0);var r=Gu.transition;Gu.transition={};try{t(!1),e()}finally{oe=n,Gu.transition=r}}function uw(){return At().memoizedState}function t0(t,e,n){var r=dr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},dw(t))hw(e,n);else if(n=G_(t,e,n,r),n!==null){var s=st();qt(n,t,r,s),fw(n,e,r)}}function n0(t,e,n){var r=dr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(dw(t))hw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,Yt(c,o)){var u=e.interleaved;u===null?(s.next=s,df(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=G_(t,e,s,r),n!==null&&(s=st(),qt(n,t,r,s),fw(n,e,r))}}function dw(t){var e=t.alternate;return t===_e||e!==null&&e===_e}function hw(t,e){co=$l=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function fw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qh(t,n)}}var Vl={readContext:Rt,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},r0={readContext:Rt,useCallback:function(t,e){return nn().memoizedState=[t,e===void 0?null:e],t},useContext:Rt,useEffect:Ng,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ul(4194308,4,iw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ul(4194308,4,t,e)},useInsertionEffect:function(t,e){return ul(4,2,t,e)},useMemo:function(t,e){var n=nn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=nn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=t0.bind(null,_e,t),[r.memoizedState,t]},useRef:function(t){var e=nn();return t={current:t},e.memoizedState=t},useState:Cg,useDebugValue:wf,useDeferredValue:function(t){return nn().memoizedState=t},useTransition:function(){var t=Cg(!1),e=t[0];return t=e0.bind(null,t[1]),nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=_e,s=nn();if(ge){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),Ve===null)throw Error(F(349));ts&30||X_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Ng(Z_.bind(null,r,i,t),[t]),r.flags|=2048,Uo(9,J_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=nn(),e=Ve.identifierPrefix;if(ge){var n=_n,r=yn;n=(r&~(1<<32-Gt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Mo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ZN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},s0={readContext:Rt,useCallback:aw,useContext:Rt,useEffect:_f,useImperativeHandle:ow,useInsertionEffect:rw,useLayoutEffect:sw,useMemo:lw,useReducer:qu,useRef:nw,useState:function(){return qu(Fo)},useDebugValue:wf,useDeferredValue:function(t){var e=At();return cw(e,Ae.memoizedState,t)},useTransition:function(){var t=qu(Fo)[0],e=At().memoizedState;return[t,e]},useMutableSource:Y_,useSyncExternalStore:Q_,useId:uw,unstable_isNewReconciler:!1},i0={readContext:Rt,useCallback:aw,useContext:Rt,useEffect:_f,useImperativeHandle:ow,useInsertionEffect:rw,useLayoutEffect:sw,useMemo:lw,useReducer:Ku,useRef:nw,useState:function(){return Ku(Fo)},useDebugValue:wf,useDeferredValue:function(t){var e=At();return Ae===null?e.memoizedState=t:cw(e,Ae.memoizedState,t)},useTransition:function(){var t=Ku(Fo)[0],e=At().memoizedState;return[t,e]},useMutableSource:Y_,useSyncExternalStore:Q_,useId:uw,unstable_isNewReconciler:!1};function Ft(t,e){if(t&&t.defaultProps){e=we({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Kd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:we({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var kc={isMounted:function(t){return(t=t._reactInternals)?fs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=st(),s=dr(t),i=Sn(r,s);i.payload=e,n!=null&&(i.callback=n),e=cr(t,i,s),e!==null&&(qt(e,t,s,r),ll(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=st(),s=dr(t),i=Sn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=cr(t,i,s),e!==null&&(qt(e,t,s,r),ll(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=st(),r=dr(t),s=Sn(n,r);s.tag=2,e!=null&&(s.callback=e),e=cr(t,s,r),e!==null&&(qt(e,t,r,n),ll(e,t,r))}};function Ig(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ro(n,r)||!Ro(s,i):!0}function pw(t,e,n){var r=!1,s=yr,i=e.contextType;return typeof i=="object"&&i!==null?i=Rt(i):(s=mt(e)?Zr:Je.current,r=e.contextTypes,i=(r=r!=null)?Xs(t,s):yr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=kc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Tg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&kc.enqueueReplaceState(e,e.state,null)}function Yd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},hf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Rt(i):(i=mt(e)?Zr:Je.current,s.context=Xs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Kd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&kc.enqueueReplaceState(s,s.state,null),Fl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ti(t,e){try{var n="",r=e;do n+=bC(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Yu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Qd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var o0=typeof WeakMap=="function"?WeakMap:Map;function mw(t,e,n){n=Sn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Hl||(Hl=!0,oh=r),Qd(t,e)},n}function gw(t,e,n){n=Sn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Qd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Qd(t,e),typeof r!="function"&&(ur===null?ur=new Set([this]):ur.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function kg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new o0;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=w0.bind(null,t,e,n),e.then(t,t))}function jg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Pg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Sn(-1,1),e.tag=2,cr(n,e,1))),n.lanes|=1),t)}var a0=Ln.ReactCurrentOwner,dt=!1;function tt(t,e,n,r){e.child=t===null?W_(e,null,n,r):Zs(e,t.child,n,r)}function Rg(t,e,n,r,s){n=n.render;var i=e.ref;return zs(e,s),r=vf(t,e,n,r,i,s),n=yf(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Pn(t,e,s)):(ge&&n&&sf(e),e.flags|=1,tt(t,e,r,s),e.child)}function Ag(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!kf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,vw(t,e,i,r,s)):(t=pl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ro,n(o,r)&&t.ref===e.ref)return Pn(t,e,s)}return e.flags|=1,t=hr(i,r),t.ref=e.ref,t.return=e,e.child=t}function vw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ro(i,r)&&t.ref===e.ref)if(dt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(dt=!0);else return e.lanes=t.lanes,Pn(t,e,s)}return Xd(t,e,n,r,s)}function yw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},de(Ds,vt),vt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,de(Ds,vt),vt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,de(Ds,vt),vt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,de(Ds,vt),vt|=r;return tt(t,e,s,n),e.child}function _w(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Xd(t,e,n,r,s){var i=mt(n)?Zr:Je.current;return i=Xs(e,i),zs(e,s),n=vf(t,e,n,r,i,s),r=yf(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Pn(t,e,s)):(ge&&r&&sf(e),e.flags|=1,tt(t,e,n,s),e.child)}function bg(t,e,n,r,s){if(mt(n)){var i=!0;bl(e)}else i=!1;if(zs(e,s),e.stateNode===null)dl(t,e),pw(e,n,r),Yd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Rt(d):(d=mt(n)?Zr:Je.current,d=Xs(e,d));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&Tg(e,o,r,d),Yn=!1;var f=e.memoizedState;o.state=f,Fl(e,r,o,s),u=e.memoizedState,c!==r||f!==u||pt.current||Yn?(typeof m=="function"&&(Kd(e,n,m,r),u=e.memoizedState),(c=Yn||Ig(e,n,c,r,f,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,q_(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Ft(e.type,c),o.props=d,p=e.pendingProps,f=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Rt(u):(u=mt(n)?Zr:Je.current,u=Xs(e,u));var v=n.getDerivedStateFromProps;(m=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==p||f!==u)&&Tg(e,o,r,u),Yn=!1,f=e.memoizedState,o.state=f,Fl(e,r,o,s);var w=e.memoizedState;c!==p||f!==w||pt.current||Yn?(typeof v=="function"&&(Kd(e,n,v,r),w=e.memoizedState),(d=Yn||Ig(e,n,d,r,f,w,u)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Jd(t,e,n,r,i,s)}function Jd(t,e,n,r,s,i){_w(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&yg(e,n,!1),Pn(t,e,i);r=e.stateNode,a0.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Zs(e,t.child,null,i),e.child=Zs(e,null,c,i)):tt(t,e,c,i),e.memoizedState=r.state,s&&yg(e,n,!0),e.child}function ww(t){var e=t.stateNode;e.pendingContext?vg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vg(t,e.context,!1),ff(t,e.containerInfo)}function Og(t,e,n,r,s){return Js(),af(s),e.flags|=256,tt(t,e,n,r),e.child}var Zd={dehydrated:null,treeContext:null,retryLane:0};function eh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ew(t,e,n){var r=e.pendingProps,s=ye.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),de(ye,s&1),t===null)return Gd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Rc(o,r,0,null),t=Qr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=eh(n),e.memoizedState=Zd,t):Ef(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return l0(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=hr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=hr(c,i):(i=Qr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?eh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Zd,r}return i=t.child,t=i.sibling,r=hr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ef(t,e){return e=Rc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qa(t,e,n,r){return r!==null&&af(r),Zs(e,t.child,null,n),t=Ef(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function l0(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Yu(Error(F(422))),qa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Rc({mode:"visible",children:r.children},s,0,null),i=Qr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Zs(e,t.child,null,o),e.child.memoizedState=eh(o),e.memoizedState=Zd,i);if(!(e.mode&1))return qa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(F(419)),r=Yu(i,r,void 0),qa(t,e,o,r)}if(c=(o&t.childLanes)!==0,dt||c){if(r=Ve,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,jn(t,s),qt(r,t,s,-1))}return Tf(),r=Yu(Error(F(421))),qa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=E0.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,yt=lr(s.nextSibling),_t=e,ge=!0,$t=null,t!==null&&(Nt[It++]=yn,Nt[It++]=_n,Nt[It++]=es,yn=t.id,_n=t.overflow,es=e),e=Ef(e,r.children),e.flags|=4096,e)}function Dg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),qd(t.return,e,n)}function Qu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function xw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(tt(t,e,r.children,n),r=ye.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dg(t,n,e);else if(t.tag===19)Dg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(de(ye,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ul(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Qu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ul(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Qu(e,!0,n,null,i);break;case"together":Qu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function dl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ns|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=hr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function c0(t,e,n){switch(e.tag){case 3:ww(e),Js();break;case 5:K_(e);break;case 1:mt(e.type)&&bl(e);break;case 4:ff(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;de(Ll,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(de(ye,ye.current&1),e.flags|=128,null):n&e.child.childLanes?Ew(t,e,n):(de(ye,ye.current&1),t=Pn(t,e,n),t!==null?t.sibling:null);de(ye,ye.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return xw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),de(ye,ye.current),r)break;return null;case 22:case 23:return e.lanes=0,yw(t,e,n)}return Pn(t,e,n)}var Sw,th,Cw,Nw;Sw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};th=function(){};Cw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Gr(cn.current);var i=null;switch(n){case"input":s=Sd(t,s),r=Sd(t,r),i=[];break;case"select":s=we({},s,{value:void 0}),r=we({},r,{value:void 0}),i=[];break;case"textarea":s=Id(t,s),r=Id(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Rl)}kd(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Co.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Co.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&fe("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Nw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Wi(t,e){if(!ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Qe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function u0(t,e,n){var r=e.pendingProps;switch(of(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(e),null;case 1:return mt(e.type)&&Al(),Qe(e),null;case 3:return r=e.stateNode,ei(),pe(pt),pe(Je),mf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Wa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,$t!==null&&(ch($t),$t=null))),th(t,e),Qe(e),null;case 5:pf(e);var s=Gr(Lo.current);if(n=e.type,t!==null&&e.stateNode!=null)Cw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return Qe(e),null}if(t=Gr(cn.current),Wa(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[on]=e,r[Oo]=i,t=(e.mode&1)!==0,n){case"dialog":fe("cancel",r),fe("close",r);break;case"iframe":case"object":case"embed":fe("load",r);break;case"video":case"audio":for(s=0;s<to.length;s++)fe(to[s],r);break;case"source":fe("error",r);break;case"img":case"image":case"link":fe("error",r),fe("load",r);break;case"details":fe("toggle",r);break;case"input":Bm(r,i),fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},fe("invalid",r);break;case"textarea":Gm(r,i),fe("invalid",r)}kd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Ba(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Ba(r.textContent,c,t),s=["children",""+c]):Co.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&fe("scroll",r)}switch(n){case"input":La(r),Wm(r,i,!0);break;case"textarea":La(r),qm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Rl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Zy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[on]=e,t[Oo]=r,Sw(t,e,!1,!1),e.stateNode=t;e:{switch(o=jd(n,r),n){case"dialog":fe("cancel",t),fe("close",t),s=r;break;case"iframe":case"object":case"embed":fe("load",t),s=r;break;case"video":case"audio":for(s=0;s<to.length;s++)fe(to[s],t);s=r;break;case"source":fe("error",t),s=r;break;case"img":case"image":case"link":fe("error",t),fe("load",t),s=r;break;case"details":fe("toggle",t),s=r;break;case"input":Bm(t,r),s=Sd(t,r),fe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=we({},r,{value:void 0}),fe("invalid",t);break;case"textarea":Gm(t,r),s=Id(t,r),fe("invalid",t);break;default:s=r}kd(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?n_(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&e_(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&No(t,u):typeof u=="number"&&No(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Co.hasOwnProperty(i)?u!=null&&i==="onScroll"&&fe("scroll",t):u!=null&&Bh(t,i,u,o))}switch(n){case"input":La(t),Wm(t,r,!1);break;case"textarea":La(t),qm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+vr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Fs(t,!!r.multiple,i,!1):r.defaultValue!=null&&Fs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Rl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qe(e),null;case 6:if(t&&e.stateNode!=null)Nw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=Gr(Lo.current),Gr(cn.current),Wa(e)){if(r=e.stateNode,n=e.memoizedProps,r[on]=e,(i=r.nodeValue!==n)&&(t=_t,t!==null))switch(t.tag){case 3:Ba(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ba(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[on]=e,e.stateNode=r}return Qe(e),null;case 13:if(pe(ye),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ge&&yt!==null&&e.mode&1&&!(e.flags&128))H_(),Js(),e.flags|=98560,i=!1;else if(i=Wa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[on]=e}else Js(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qe(e),i=!1}else $t!==null&&(ch($t),$t=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ye.current&1?De===0&&(De=3):Tf())),e.updateQueue!==null&&(e.flags|=4),Qe(e),null);case 4:return ei(),th(t,e),t===null&&Ao(e.stateNode.containerInfo),Qe(e),null;case 10:return uf(e.type._context),Qe(e),null;case 17:return mt(e.type)&&Al(),Qe(e),null;case 19:if(pe(ye),i=e.memoizedState,i===null)return Qe(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Wi(i,!1);else{if(De!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ul(t),o!==null){for(e.flags|=128,Wi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return de(ye,ye.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ie()>ni&&(e.flags|=128,r=!0,Wi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ul(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Wi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ge)return Qe(e),null}else 2*Ie()-i.renderingStartTime>ni&&n!==1073741824&&(e.flags|=128,r=!0,Wi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ie(),e.sibling=null,n=ye.current,de(ye,r?n&1|2:n&1),e):(Qe(e),null);case 22:case 23:return If(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?vt&1073741824&&(Qe(e),e.subtreeFlags&6&&(e.flags|=8192)):Qe(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function d0(t,e){switch(of(e),e.tag){case 1:return mt(e.type)&&Al(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ei(),pe(pt),pe(Je),mf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return pf(e),null;case 13:if(pe(ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Js()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return pe(ye),null;case 4:return ei(),null;case 10:return uf(e.type._context),null;case 22:case 23:return If(),null;case 24:return null;default:return null}}var Ka=!1,Xe=!1,h0=typeof WeakSet=="function"?WeakSet:Set,z=null;function Os(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ee(t,e,r)}else n.current=null}function nh(t,e,n){try{n()}catch(r){Ee(t,e,r)}}var Lg=!1;function f0(t,e){if(Ud=kl,t=P_(),rf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,m=0,p=t,f=null;t:for(;;){for(var v;p!==n||s!==0&&p.nodeType!==3||(c=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(v=p.firstChild)!==null;)f=p,p=v;for(;;){if(p===t)break t;if(f===n&&++d===s&&(c=o),f===i&&++m===r&&(u=o),(v=p.nextSibling)!==null)break;p=f,f=p.parentNode}p=v}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for($d={focusedElem:t,selectionRange:n},kl=!1,z=e;z!==null;)if(e=z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,z=t;else for(;z!==null;){e=z;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var T=w.memoizedProps,R=w.memoizedState,E=e.stateNode,S=E.getSnapshotBeforeUpdate(e.elementType===e.type?T:Ft(e.type,T),R);E.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(O){Ee(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}return w=Lg,Lg=!1,w}function uo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&nh(e,n,i)}s=s.next}while(s!==r)}}function jc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function rh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Iw(t){var e=t.alternate;e!==null&&(t.alternate=null,Iw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[on],delete e[Oo],delete e[Hd],delete e[YN],delete e[QN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Tw(t){return t.tag===5||t.tag===3||t.tag===4}function Mg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Tw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Rl));else if(r!==4&&(t=t.child,t!==null))for(sh(t,e,n),t=t.sibling;t!==null;)sh(t,e,n),t=t.sibling}function ih(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ih(t,e,n),t=t.sibling;t!==null;)ih(t,e,n),t=t.sibling}var He=null,Ut=!1;function Gn(t,e,n){for(n=n.child;n!==null;)kw(t,e,n),n=n.sibling}function kw(t,e,n){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(Ec,n)}catch{}switch(n.tag){case 5:Xe||Os(n,e);case 6:var r=He,s=Ut;He=null,Gn(t,e,n),He=r,Ut=s,He!==null&&(Ut?(t=He,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):He.removeChild(n.stateNode));break;case 18:He!==null&&(Ut?(t=He,n=n.stateNode,t.nodeType===8?Hu(t.parentNode,n):t.nodeType===1&&Hu(t,n),jo(t)):Hu(He,n.stateNode));break;case 4:r=He,s=Ut,He=n.stateNode.containerInfo,Ut=!0,Gn(t,e,n),He=r,Ut=s;break;case 0:case 11:case 14:case 15:if(!Xe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&nh(n,e,o),s=s.next}while(s!==r)}Gn(t,e,n);break;case 1:if(!Xe&&(Os(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Ee(n,e,c)}Gn(t,e,n);break;case 21:Gn(t,e,n);break;case 22:n.mode&1?(Xe=(r=Xe)||n.memoizedState!==null,Gn(t,e,n),Xe=r):Gn(t,e,n);break;default:Gn(t,e,n)}}function Fg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new h0),e.forEach(function(r){var s=x0.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Mt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:He=c.stateNode,Ut=!1;break e;case 3:He=c.stateNode.containerInfo,Ut=!0;break e;case 4:He=c.stateNode.containerInfo,Ut=!0;break e}c=c.return}if(He===null)throw Error(F(160));kw(i,o,s),He=null,Ut=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Ee(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jw(e,t),e=e.sibling}function jw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mt(e,t),tn(t),r&4){try{uo(3,t,t.return),jc(3,t)}catch(T){Ee(t,t.return,T)}try{uo(5,t,t.return)}catch(T){Ee(t,t.return,T)}}break;case 1:Mt(e,t),tn(t),r&512&&n!==null&&Os(n,n.return);break;case 5:if(Mt(e,t),tn(t),r&512&&n!==null&&Os(n,n.return),t.flags&32){var s=t.stateNode;try{No(s,"")}catch(T){Ee(t,t.return,T)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Xy(s,i),jd(c,o);var d=jd(c,i);for(o=0;o<u.length;o+=2){var m=u[o],p=u[o+1];m==="style"?n_(s,p):m==="dangerouslySetInnerHTML"?e_(s,p):m==="children"?No(s,p):Bh(s,m,p,d)}switch(c){case"input":Cd(s,i);break;case"textarea":Jy(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?Fs(s,!!i.multiple,v,!1):f!==!!i.multiple&&(i.defaultValue!=null?Fs(s,!!i.multiple,i.defaultValue,!0):Fs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Oo]=i}catch(T){Ee(t,t.return,T)}}break;case 6:if(Mt(e,t),tn(t),r&4){if(t.stateNode===null)throw Error(F(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(T){Ee(t,t.return,T)}}break;case 3:if(Mt(e,t),tn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{jo(e.containerInfo)}catch(T){Ee(t,t.return,T)}break;case 4:Mt(e,t),tn(t);break;case 13:Mt(e,t),tn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Cf=Ie())),r&4&&Fg(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Xe=(d=Xe)||m,Mt(e,t),Xe=d):Mt(e,t),tn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(z=t,m=t.child;m!==null;){for(p=z=m;z!==null;){switch(f=z,v=f.child,f.tag){case 0:case 11:case 14:case 15:uo(4,f,f.return);break;case 1:Os(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(T){Ee(r,n,T)}}break;case 5:Os(f,f.return);break;case 22:if(f.memoizedState!==null){$g(p);continue}}v!==null?(v.return=f,z=v):$g(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=t_("display",o))}catch(T){Ee(t,t.return,T)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(T){Ee(t,t.return,T)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Mt(e,t),tn(t),r&4&&Fg(t);break;case 21:break;default:Mt(e,t),tn(t)}}function tn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Tw(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(No(s,""),r.flags&=-33);var i=Mg(t);ih(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=Mg(t);sh(t,c,o);break;default:throw Error(F(161))}}catch(u){Ee(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function p0(t,e,n){z=t,Pw(t)}function Pw(t,e,n){for(var r=(t.mode&1)!==0;z!==null;){var s=z,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ka;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||Xe;c=Ka;var d=Xe;if(Ka=o,(Xe=u)&&!d)for(z=s;z!==null;)o=z,u=o.child,o.tag===22&&o.memoizedState!==null?Vg(s):u!==null?(u.return=o,z=u):Vg(s);for(;i!==null;)z=i,Pw(i),i=i.sibling;z=s,Ka=c,Xe=d}Ug(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,z=i):Ug(t)}}function Ug(t){for(;z!==null;){var e=z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Xe||jc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Xe)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ft(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Sg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Sg(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&jo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}Xe||e.flags&512&&rh(e)}catch(f){Ee(e,e.return,f)}}if(e===t){z=null;break}if(n=e.sibling,n!==null){n.return=e.return,z=n;break}z=e.return}}function $g(t){for(;z!==null;){var e=z;if(e===t){z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,z=n;break}z=e.return}}function Vg(t){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{jc(4,e)}catch(u){Ee(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ee(e,s,u)}}var i=e.return;try{rh(e)}catch(u){Ee(e,i,u)}break;case 5:var o=e.return;try{rh(e)}catch(u){Ee(e,o,u)}}}catch(u){Ee(e,e.return,u)}if(e===t){z=null;break}var c=e.sibling;if(c!==null){c.return=e.return,z=c;break}z=e.return}}var m0=Math.ceil,zl=Ln.ReactCurrentDispatcher,xf=Ln.ReactCurrentOwner,jt=Ln.ReactCurrentBatchConfig,re=0,Ve=null,ke=null,We=0,vt=0,Ds=Ir(0),De=0,$o=null,ns=0,Pc=0,Sf=0,ho=null,ct=null,Cf=0,ni=1/0,mn=null,Hl=!1,oh=null,ur=null,Ya=!1,rr=null,Bl=0,fo=0,ah=null,hl=-1,fl=0;function st(){return re&6?Ie():hl!==-1?hl:hl=Ie()}function dr(t){return t.mode&1?re&2&&We!==0?We&-We:JN.transition!==null?(fl===0&&(fl=p_()),fl):(t=oe,t!==0||(t=window.event,t=t===void 0?16:E_(t.type)),t):1}function qt(t,e,n,r){if(50<fo)throw fo=0,ah=null,Error(F(185));ra(t,n,r),(!(re&2)||t!==Ve)&&(t===Ve&&(!(re&2)&&(Pc|=n),De===4&&Xn(t,We)),gt(t,r),n===1&&re===0&&!(e.mode&1)&&(ni=Ie()+500,Ic&&Tr()))}function gt(t,e){var n=t.callbackNode;JC(t,e);var r=Tl(t,t===Ve?We:0);if(r===0)n!==null&&Qm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Qm(n),e===1)t.tag===0?XN(zg.bind(null,t)):$_(zg.bind(null,t)),qN(function(){!(re&6)&&Tr()}),n=null;else{switch(m_(r)){case 1:n=Yh;break;case 4:n=h_;break;case 16:n=Il;break;case 536870912:n=f_;break;default:n=Il}n=Fw(n,Rw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Rw(t,e){if(hl=-1,fl=0,re&6)throw Error(F(327));var n=t.callbackNode;if(Hs()&&t.callbackNode!==n)return null;var r=Tl(t,t===Ve?We:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Wl(t,r);else{e=r;var s=re;re|=2;var i=bw();(Ve!==t||We!==e)&&(mn=null,ni=Ie()+500,Yr(t,e));do try{y0();break}catch(c){Aw(t,c)}while(!0);cf(),zl.current=i,re=s,ke!==null?e=0:(Ve=null,We=0,e=De)}if(e!==0){if(e===2&&(s=Od(t),s!==0&&(r=s,e=lh(t,s))),e===1)throw n=$o,Yr(t,0),Xn(t,r),gt(t,Ie()),n;if(e===6)Xn(t,r);else{if(s=t.current.alternate,!(r&30)&&!g0(s)&&(e=Wl(t,r),e===2&&(i=Od(t),i!==0&&(r=i,e=lh(t,i))),e===1))throw n=$o,Yr(t,0),Xn(t,r),gt(t,Ie()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:Ur(t,ct,mn);break;case 3:if(Xn(t,r),(r&130023424)===r&&(e=Cf+500-Ie(),10<e)){if(Tl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){st(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=zd(Ur.bind(null,t,ct,mn),e);break}Ur(t,ct,mn);break;case 4:if(Xn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Gt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ie()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*m0(r/1960))-r,10<r){t.timeoutHandle=zd(Ur.bind(null,t,ct,mn),r);break}Ur(t,ct,mn);break;case 5:Ur(t,ct,mn);break;default:throw Error(F(329))}}}return gt(t,Ie()),t.callbackNode===n?Rw.bind(null,t):null}function lh(t,e){var n=ho;return t.current.memoizedState.isDehydrated&&(Yr(t,e).flags|=256),t=Wl(t,e),t!==2&&(e=ct,ct=n,e!==null&&ch(e)),t}function ch(t){ct===null?ct=t:ct.push.apply(ct,t)}function g0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Yt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xn(t,e){for(e&=~Sf,e&=~Pc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gt(e),r=1<<n;t[n]=-1,e&=~r}}function zg(t){if(re&6)throw Error(F(327));Hs();var e=Tl(t,0);if(!(e&1))return gt(t,Ie()),null;var n=Wl(t,e);if(t.tag!==0&&n===2){var r=Od(t);r!==0&&(e=r,n=lh(t,r))}if(n===1)throw n=$o,Yr(t,0),Xn(t,e),gt(t,Ie()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ur(t,ct,mn),gt(t,Ie()),null}function Nf(t,e){var n=re;re|=1;try{return t(e)}finally{re=n,re===0&&(ni=Ie()+500,Ic&&Tr())}}function rs(t){rr!==null&&rr.tag===0&&!(re&6)&&Hs();var e=re;re|=1;var n=jt.transition,r=oe;try{if(jt.transition=null,oe=1,t)return t()}finally{oe=r,jt.transition=n,re=e,!(re&6)&&Tr()}}function If(){vt=Ds.current,pe(Ds)}function Yr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,GN(n)),ke!==null)for(n=ke.return;n!==null;){var r=n;switch(of(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Al();break;case 3:ei(),pe(pt),pe(Je),mf();break;case 5:pf(r);break;case 4:ei();break;case 13:pe(ye);break;case 19:pe(ye);break;case 10:uf(r.type._context);break;case 22:case 23:If()}n=n.return}if(Ve=t,ke=t=hr(t.current,null),We=vt=e,De=0,$o=null,Sf=Pc=ns=0,ct=ho=null,Wr!==null){for(e=0;e<Wr.length;e++)if(n=Wr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Wr=null}return t}function Aw(t,e){do{var n=ke;try{if(cf(),cl.current=Vl,$l){for(var r=_e.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}$l=!1}if(ts=0,Ue=Ae=_e=null,co=!1,Mo=0,xf.current=null,n===null||n.return===null){De=1,$o=e,ke=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=We,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,m=c,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var f=m.alternate;f?(m.updateQueue=f.updateQueue,m.memoizedState=f.memoizedState,m.lanes=f.lanes):(m.updateQueue=null,m.memoizedState=null)}var v=jg(o);if(v!==null){v.flags&=-257,Pg(v,o,c,i,e),v.mode&1&&kg(i,d,e),e=v,u=d;var w=e.updateQueue;if(w===null){var T=new Set;T.add(u),e.updateQueue=T}else w.add(u);break e}else{if(!(e&1)){kg(i,d,e),Tf();break e}u=Error(F(426))}}else if(ge&&c.mode&1){var R=jg(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Pg(R,o,c,i,e),af(ti(u,c));break e}}i=u=ti(u,c),De!==4&&(De=2),ho===null?ho=[i]:ho.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=mw(i,u,e);xg(i,E);break e;case 1:c=u;var S=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof S.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(ur===null||!ur.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=gw(i,c,e);xg(i,O);break e}}i=i.return}while(i!==null)}Dw(n)}catch(L){e=L,ke===n&&n!==null&&(ke=n=n.return);continue}break}while(!0)}function bw(){var t=zl.current;return zl.current=Vl,t===null?Vl:t}function Tf(){(De===0||De===3||De===2)&&(De=4),Ve===null||!(ns&268435455)&&!(Pc&268435455)||Xn(Ve,We)}function Wl(t,e){var n=re;re|=2;var r=bw();(Ve!==t||We!==e)&&(mn=null,Yr(t,e));do try{v0();break}catch(s){Aw(t,s)}while(!0);if(cf(),re=n,zl.current=r,ke!==null)throw Error(F(261));return Ve=null,We=0,De}function v0(){for(;ke!==null;)Ow(ke)}function y0(){for(;ke!==null&&!HC();)Ow(ke)}function Ow(t){var e=Mw(t.alternate,t,vt);t.memoizedProps=t.pendingProps,e===null?Dw(t):ke=e,xf.current=null}function Dw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=d0(n,e),n!==null){n.flags&=32767,ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{De=6,ke=null;return}}else if(n=u0(n,e,vt),n!==null){ke=n;return}if(e=e.sibling,e!==null){ke=e;return}ke=e=t}while(e!==null);De===0&&(De=5)}function Ur(t,e,n){var r=oe,s=jt.transition;try{jt.transition=null,oe=1,_0(t,e,n,r)}finally{jt.transition=s,oe=r}return null}function _0(t,e,n,r){do Hs();while(rr!==null);if(re&6)throw Error(F(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(ZC(t,i),t===Ve&&(ke=Ve=null,We=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ya||(Ya=!0,Fw(Il,function(){return Hs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=jt.transition,jt.transition=null;var o=oe;oe=1;var c=re;re|=4,xf.current=null,f0(t,n),jw(n,t),UN($d),kl=!!Ud,$d=Ud=null,t.current=n,p0(n),BC(),re=c,oe=o,jt.transition=i}else t.current=n;if(Ya&&(Ya=!1,rr=t,Bl=s),i=t.pendingLanes,i===0&&(ur=null),qC(n.stateNode),gt(t,Ie()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Hl)throw Hl=!1,t=oh,oh=null,t;return Bl&1&&t.tag!==0&&Hs(),i=t.pendingLanes,i&1?t===ah?fo++:(fo=0,ah=t):fo=0,Tr(),null}function Hs(){if(rr!==null){var t=m_(Bl),e=jt.transition,n=oe;try{if(jt.transition=null,oe=16>t?16:t,rr===null)var r=!1;else{if(t=rr,rr=null,Bl=0,re&6)throw Error(F(331));var s=re;for(re|=4,z=t.current;z!==null;){var i=z,o=i.child;if(z.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(z=d;z!==null;){var m=z;switch(m.tag){case 0:case 11:case 15:uo(8,m,i)}var p=m.child;if(p!==null)p.return=m,z=p;else for(;z!==null;){m=z;var f=m.sibling,v=m.return;if(Iw(m),m===d){z=null;break}if(f!==null){f.return=v,z=f;break}z=v}}}var w=i.alternate;if(w!==null){var T=w.child;if(T!==null){w.child=null;do{var R=T.sibling;T.sibling=null,T=R}while(T!==null)}}z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,z=o;else e:for(;z!==null;){if(i=z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:uo(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,z=E;break e}z=i.return}}var S=t.current;for(z=S;z!==null;){o=z;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,z=C;else e:for(o=S;z!==null;){if(c=z,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:jc(9,c)}}catch(L){Ee(c,c.return,L)}if(c===o){z=null;break e}var O=c.sibling;if(O!==null){O.return=c.return,z=O;break e}z=c.return}}if(re=s,Tr(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(Ec,t)}catch{}r=!0}return r}finally{oe=n,jt.transition=e}}return!1}function Hg(t,e,n){e=ti(n,e),e=mw(t,e,1),t=cr(t,e,1),e=st(),t!==null&&(ra(t,1,e),gt(t,e))}function Ee(t,e,n){if(t.tag===3)Hg(t,t,n);else for(;e!==null;){if(e.tag===3){Hg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ur===null||!ur.has(r))){t=ti(n,t),t=gw(e,t,1),e=cr(e,t,1),t=st(),e!==null&&(ra(e,1,t),gt(e,t));break}}e=e.return}}function w0(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=st(),t.pingedLanes|=t.suspendedLanes&n,Ve===t&&(We&n)===n&&(De===4||De===3&&(We&130023424)===We&&500>Ie()-Cf?Yr(t,0):Sf|=n),gt(t,e)}function Lw(t,e){e===0&&(t.mode&1?(e=Ua,Ua<<=1,!(Ua&130023424)&&(Ua=4194304)):e=1);var n=st();t=jn(t,e),t!==null&&(ra(t,e,n),gt(t,n))}function E0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Lw(t,n)}function x0(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),Lw(t,n)}var Mw;Mw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pt.current)dt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dt=!1,c0(t,e,n);dt=!!(t.flags&131072)}else dt=!1,ge&&e.flags&1048576&&V_(e,Dl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;dl(t,e),t=e.pendingProps;var s=Xs(e,Je.current);zs(e,n),s=vf(null,e,r,t,s,n);var i=yf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mt(r)?(i=!0,bl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,hf(e),s.updater=kc,e.stateNode=s,s._reactInternals=e,Yd(e,r,t,n),e=Jd(null,e,r,!0,i,n)):(e.tag=0,ge&&i&&sf(e),tt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(dl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=C0(r),t=Ft(r,t),s){case 0:e=Xd(null,e,r,t,n);break e;case 1:e=bg(null,e,r,t,n);break e;case 11:e=Rg(null,e,r,t,n);break e;case 14:e=Ag(null,e,r,Ft(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ft(r,s),Xd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ft(r,s),bg(t,e,r,s,n);case 3:e:{if(ww(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,s=i.element,q_(t,e),Fl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ti(Error(F(423)),e),e=Og(t,e,r,n,s);break e}else if(r!==s){s=ti(Error(F(424)),e),e=Og(t,e,r,n,s);break e}else for(yt=lr(e.stateNode.containerInfo.firstChild),_t=e,ge=!0,$t=null,n=W_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Js(),r===s){e=Pn(t,e,n);break e}tt(t,e,r,n)}e=e.child}return e;case 5:return K_(e),t===null&&Gd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Vd(r,s)?o=null:i!==null&&Vd(r,i)&&(e.flags|=32),_w(t,e),tt(t,e,o,n),e.child;case 6:return t===null&&Gd(e),null;case 13:return Ew(t,e,n);case 4:return ff(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Zs(e,null,r,n):tt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ft(r,s),Rg(t,e,r,s,n);case 7:return tt(t,e,e.pendingProps,n),e.child;case 8:return tt(t,e,e.pendingProps.children,n),e.child;case 12:return tt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,de(Ll,r._currentValue),r._currentValue=o,i!==null)if(Yt(i.value,o)){if(i.children===s.children&&!pt.current){e=Pn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Sn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?u.next=u:(u.next=m.next,m.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),qd(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),qd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}tt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,zs(e,n),s=Rt(s),r=r(s),e.flags|=1,tt(t,e,r,n),e.child;case 14:return r=e.type,s=Ft(r,e.pendingProps),s=Ft(r.type,s),Ag(t,e,r,s,n);case 15:return vw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ft(r,s),dl(t,e),e.tag=1,mt(r)?(t=!0,bl(e)):t=!1,zs(e,n),pw(e,r,s),Yd(e,r,s,n),Jd(null,e,r,!0,t,n);case 19:return xw(t,e,n);case 22:return yw(t,e,n)}throw Error(F(156,e.tag))};function Fw(t,e){return d_(t,e)}function S0(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tt(t,e,n,r){return new S0(t,e,n,r)}function kf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function C0(t){if(typeof t=="function")return kf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Gh)return 11;if(t===qh)return 14}return 2}function hr(t,e){var n=t.alternate;return n===null?(n=Tt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function pl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")kf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ns:return Qr(n.children,s,i,e);case Wh:o=8,s|=8;break;case _d:return t=Tt(12,n,e,s|2),t.elementType=_d,t.lanes=i,t;case wd:return t=Tt(13,n,e,s),t.elementType=wd,t.lanes=i,t;case Ed:return t=Tt(19,n,e,s),t.elementType=Ed,t.lanes=i,t;case Ky:return Rc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Gy:o=10;break e;case qy:o=9;break e;case Gh:o=11;break e;case qh:o=14;break e;case Kn:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Tt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Qr(t,e,n,r){return t=Tt(7,t,r,e),t.lanes=n,t}function Rc(t,e,n,r){return t=Tt(22,t,r,e),t.elementType=Ky,t.lanes=n,t.stateNode={isHidden:!1},t}function Xu(t,e,n){return t=Tt(6,t,null,e),t.lanes=n,t}function Ju(t,e,n){return e=Tt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function N0(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Au(0),this.expirationTimes=Au(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Au(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function jf(t,e,n,r,s,i,o,c,u){return t=new N0(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Tt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hf(i),t}function I0(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Uw(t){if(!t)return yr;t=t._reactInternals;e:{if(fs(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(mt(n))return U_(t,n,e)}return e}function $w(t,e,n,r,s,i,o,c,u){return t=jf(n,r,!0,t,s,i,o,c,u),t.context=Uw(null),n=t.current,r=st(),s=dr(n),i=Sn(r,s),i.callback=e??null,cr(n,i,s),t.current.lanes=s,ra(t,s,r),gt(t,r),t}function Ac(t,e,n,r){var s=e.current,i=st(),o=dr(s);return n=Uw(n),e.context===null?e.context=n:e.pendingContext=n,e=Sn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=cr(s,e,o),t!==null&&(qt(t,s,o,i),ll(t,s,o)),o}function Gl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Bg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Pf(t,e){Bg(t,e),(t=t.alternate)&&Bg(t,e)}function T0(){return null}var Vw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Rf(t){this._internalRoot=t}bc.prototype.render=Rf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));Ac(t,e,null,null)};bc.prototype.unmount=Rf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;rs(function(){Ac(null,t,null,null)}),e[kn]=null}};function bc(t){this._internalRoot=t}bc.prototype.unstable_scheduleHydration=function(t){if(t){var e=y_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qn.length&&e!==0&&e<Qn[n].priority;n++);Qn.splice(n,0,t),n===0&&w_(t)}};function Af(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Oc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Wg(){}function k0(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Gl(o);i.call(d)}}var o=$w(e,r,t,0,null,!1,!1,"",Wg);return t._reactRootContainer=o,t[kn]=o.current,Ao(t.nodeType===8?t.parentNode:t),rs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Gl(u);c.call(d)}}var u=jf(t,0,!1,null,null,!1,!1,"",Wg);return t._reactRootContainer=u,t[kn]=u.current,Ao(t.nodeType===8?t.parentNode:t),rs(function(){Ac(e,u,n,r)}),u}function Dc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=Gl(o);c.call(u)}}Ac(e,o,t,s)}else o=k0(n,e,t,s,r);return Gl(o)}g_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=eo(e.pendingLanes);n!==0&&(Qh(e,n|1),gt(e,Ie()),!(re&6)&&(ni=Ie()+500,Tr()))}break;case 13:rs(function(){var r=jn(t,1);if(r!==null){var s=st();qt(r,t,1,s)}}),Pf(t,1)}};Xh=function(t){if(t.tag===13){var e=jn(t,134217728);if(e!==null){var n=st();qt(e,t,134217728,n)}Pf(t,134217728)}};v_=function(t){if(t.tag===13){var e=dr(t),n=jn(t,e);if(n!==null){var r=st();qt(n,t,e,r)}Pf(t,e)}};y_=function(){return oe};__=function(t,e){var n=oe;try{return oe=t,e()}finally{oe=n}};Rd=function(t,e,n){switch(e){case"input":if(Cd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Nc(r);if(!s)throw Error(F(90));Qy(r),Cd(r,s)}}}break;case"textarea":Jy(t,n);break;case"select":e=n.value,e!=null&&Fs(t,!!n.multiple,e,!1)}};i_=Nf;o_=rs;var j0={usingClientEntryPoint:!1,Events:[ia,js,Nc,r_,s_,Nf]},Gi={findFiberByHostInstance:Br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},P0={bundleType:Gi.bundleType,version:Gi.version,rendererPackageName:Gi.rendererPackageName,rendererConfig:Gi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=c_(t),t===null?null:t.stateNode},findFiberByHostInstance:Gi.findFiberByHostInstance||T0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qa.isDisabled&&Qa.supportsFiber)try{Ec=Qa.inject(P0),ln=Qa}catch{}}Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j0;Et.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Af(e))throw Error(F(200));return I0(t,e,null,n)};Et.createRoot=function(t,e){if(!Af(t))throw Error(F(299));var n=!1,r="",s=Vw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=jf(t,1,!1,null,null,n,!1,r,s),t[kn]=e.current,Ao(t.nodeType===8?t.parentNode:t),new Rf(e)};Et.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=c_(e),t=t===null?null:t.stateNode,t};Et.flushSync=function(t){return rs(t)};Et.hydrate=function(t,e,n){if(!Oc(e))throw Error(F(200));return Dc(null,t,e,!0,n)};Et.hydrateRoot=function(t,e,n){if(!Af(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Vw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=$w(e,null,t,1,n??null,s,!1,i,o),t[kn]=e.current,Ao(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new bc(e)};Et.render=function(t,e,n){if(!Oc(e))throw Error(F(200));return Dc(null,t,e,!1,n)};Et.unmountComponentAtNode=function(t){if(!Oc(t))throw Error(F(40));return t._reactRootContainer?(rs(function(){Dc(null,null,t,!1,function(){t._reactRootContainer=null,t[kn]=null})}),!0):!1};Et.unstable_batchedUpdates=Nf;Et.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Oc(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return Dc(t,e,n,!1,r)};Et.version="18.3.1-next-f1338f8080-20240426";function zw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zw)}catch(t){console.error(t)}}zw(),zy.exports=Et;var R0=zy.exports,Hw,Gg=R0;Hw=Gg.createRoot,Gg.hydrateRoot;const A0=()=>{};var qg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U=function(t,e){if(!t)throw pi(e)},pi=function(t){return new Error("Firebase Database ("+Bw.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},b0=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},bf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,m=i>>2,p=(i&3)<<4|c>>4;let f=(c&15)<<2|d>>6,v=d&63;u||(v=64,o||(f=64)),r.push(n[m],n[p],n[f],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ww(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):b0(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||p==null)throw new O0;const f=i<<2|c>>4;if(r.push(f),d!==64){const v=c<<4&240|d>>2;if(r.push(v),p!==64){const w=d<<6&192|p;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class O0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Gw=function(t){const e=Ww(t);return bf.encodeByteArray(e,!0)},ql=function(t){return Gw(t).replace(/\./g,"")},Kl=function(t){try{return bf.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(t){return qw(void 0,t)}function qw(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!L0(n)||(t[n]=qw(t[n],e[n]));return t}function L0(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0=()=>M0().__FIREBASE_DEFAULTS__,U0=()=>{if(typeof process>"u"||typeof qg>"u")return;const t=qg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},$0=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Kl(t[1]);return e&&JSON.parse(e)},Of=()=>{try{return A0()||F0()||U0()||$0()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Kw=t=>{var e,n;return(n=(e=Of())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Df=t=>{const e=Kw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Yw=()=>{var t;return(t=Of())==null?void 0:t.config},Qw=t=>{var e;return(e=Of())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Lc(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ql(JSON.stringify(n)),ql(JSON.stringify(o)),""].join(".")}const po={};function V0(){const t={prod:[],emulator:[]};for(const e of Object.keys(po))po[e]?t.emulator.push(e):t.prod.push(e);return t}function z0(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Kg=!1;function Mc(t,e){if(typeof window>"u"||typeof document>"u"||!Mn(window.location.host)||po[t]===e||po[t]||Kg)return;po[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=V0().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function c(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function u(f,v){f.setAttribute("width","24"),f.setAttribute("id",v),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function d(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Kg=!0,o()},f}function m(f,v){f.setAttribute("id",v),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function p(){const f=z0(r),v=n("text"),w=document.getElementById(v)||document.createElement("span"),T=n("learnmore"),R=document.getElementById(T)||document.createElement("a"),E=n("preprendIcon"),S=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const C=f.element;c(C),m(R,T);const O=d();u(S,E),C.append(S,w,R,O),document.body.appendChild(C)}i?(w.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Lf(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function H0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function B0(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Jw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function W0(){const t=ot();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function G0(){return Bw.NODE_ADMIN===!0}function q0(){try{return typeof indexedDB=="object"}catch{return!1}}function K0(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="FirebaseError";class hn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Y0,Object.setPrototypeOf(this,hn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,la.prototype.create)}}class la{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Q0(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new hn(s,c,r)}}function Q0(t,e){return t.replace(X0,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const X0=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(t){return JSON.parse(t)}function Oe(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Vo(Kl(i[0])||""),n=Vo(Kl(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},J0=function(t){const e=Zw(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Z0=function(t){const e=Zw(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ri(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function uh(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yl(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function _r(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Yg(i)&&Yg(o)){if(!_r(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Yg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function no(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ro(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)r[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)r[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){const f=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],c=this.chain_[3],u=this.chain_[4],d,m;for(let p=0;p<80;p++){p<40?p<20?(d=c^i&(o^c),m=1518500249):(d=i^o^c,m=1859775393):p<60?(d=i&o|c&(i|o),m=2400959708):(d=i^o^c,m=3395469782);const f=(s<<5|s>>>27)+d+u+m+r[p]&4294967295;u=c,c=o,o=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function tI(t,e){const n=new nI(t,e);return n.subscribe.bind(n)}class nI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");rI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Zu),s.error===void 0&&(s.error=Zu),s.complete===void 0&&(s.complete=Zu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Zu(){}function Fc(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,U(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Uc=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(t){return t&&t._delegate?t._delegate:t}class Rn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new aa;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aI(e))try{this.getOrInitializeService({instanceIdentifier:$r})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=$r){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$r){return this.instances.has(e)}getOptions(e=$r){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:oI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$r){return this.component?this.component.multipleInstances?e:$r:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oI(t){return t===$r?void 0:t}function aI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new iI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const cI={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},uI=ie.INFO,dI={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},hI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=dI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $c{constructor(e){this.name=e,this._logLevel=uI,this._logHandler=hI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const fI=(t,e)=>e.some(n=>t instanceof n);let Qg,Xg;function pI(){return Qg||(Qg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mI(){return Xg||(Xg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eE=new WeakMap,dh=new WeakMap,tE=new WeakMap,ed=new WeakMap,Mf=new WeakMap;function gI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(fr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&eE.set(n,t)}).catch(()=>{}),Mf.set(e,t),e}function vI(t){if(dh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});dh.set(t,e)}let hh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return dh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||tE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function yI(t){hh=t(hh)}function _I(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(td(this),e,...n);return tE.set(r,e.sort?e.sort():[e]),fr(r)}:mI().includes(t)?function(...e){return t.apply(td(this),e),fr(eE.get(this))}:function(...e){return fr(t.apply(td(this),e))}}function wI(t){return typeof t=="function"?_I(t):(t instanceof IDBTransaction&&vI(t),fI(t,pI())?new Proxy(t,hh):t)}function fr(t){if(t instanceof IDBRequest)return gI(t);if(ed.has(t))return ed.get(t);const e=wI(t);return e!==t&&(ed.set(t,e),Mf.set(e,t)),e}const td=t=>Mf.get(t);function EI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=fr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(fr(o.result),u.oldVersion,u.newVersion,fr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const xI=["get","getKey","getAll","getAllKeys","count"],SI=["put","add","delete","clear"],nd=new Map;function Jg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(nd.get(e))return nd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=SI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||xI.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return nd.set(e,i),i}yI(t=>({...t,get:(e,n,r)=>Jg(e,n)||t.get(e,n,r),has:(e,n)=>!!Jg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(NI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function NI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const fh="@firebase/app",Zg="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An=new $c("@firebase/app"),II="@firebase/app-compat",TI="@firebase/analytics-compat",kI="@firebase/analytics",jI="@firebase/app-check-compat",PI="@firebase/app-check",RI="@firebase/auth",AI="@firebase/auth-compat",bI="@firebase/database",OI="@firebase/data-connect",DI="@firebase/database-compat",LI="@firebase/functions",MI="@firebase/functions-compat",FI="@firebase/installations",UI="@firebase/installations-compat",$I="@firebase/messaging",VI="@firebase/messaging-compat",zI="@firebase/performance",HI="@firebase/performance-compat",BI="@firebase/remote-config",WI="@firebase/remote-config-compat",GI="@firebase/storage",qI="@firebase/storage-compat",KI="@firebase/firestore",YI="@firebase/ai",QI="@firebase/firestore-compat",XI="firebase",JI="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph="[DEFAULT]",ZI={[fh]:"fire-core",[II]:"fire-core-compat",[kI]:"fire-analytics",[TI]:"fire-analytics-compat",[PI]:"fire-app-check",[jI]:"fire-app-check-compat",[RI]:"fire-auth",[AI]:"fire-auth-compat",[bI]:"fire-rtdb",[OI]:"fire-data-connect",[DI]:"fire-rtdb-compat",[LI]:"fire-fn",[MI]:"fire-fn-compat",[FI]:"fire-iid",[UI]:"fire-iid-compat",[$I]:"fire-fcm",[VI]:"fire-fcm-compat",[zI]:"fire-perf",[HI]:"fire-perf-compat",[BI]:"fire-rc",[WI]:"fire-rc-compat",[GI]:"fire-gcs",[qI]:"fire-gcs-compat",[KI]:"fire-fst",[QI]:"fire-fst-compat",[YI]:"fire-vertex","fire-js":"fire-js",[XI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql=new Map,eT=new Map,mh=new Map;function ev(t,e){try{t.container.addComponent(e)}catch(n){An.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function wr(t){const e=t.name;if(mh.has(e))return An.debug(`There were multiple attempts to register component ${e}.`),!1;mh.set(e,t);for(const n of Ql.values())ev(n,t);for(const n of eT.values())ev(n,t);return!0}function ca(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ut(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pr=new la("app","Firebase",tT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=JI;function nE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ph,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw pr.create("bad-app-name",{appName:String(s)});if(n||(n=Yw()),!n)throw pr.create("no-options");const i=Ql.get(s);if(i){if(_r(n,i.options)&&_r(r,i.config))return i;throw pr.create("duplicate-app",{appName:s})}const o=new lI(s);for(const u of mh.values())o.addComponent(u);const c=new nT(n,r,o);return Ql.set(s,c),c}function Vc(t=ph){const e=Ql.get(t);if(!e&&t===ph&&Yw())return nE();if(!e)throw pr.create("no-app",{appName:t});return e}function Pt(t,e,n){let r=ZI[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),An.warn(o.join(" "));return}wr(new Rn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="firebase-heartbeat-database",sT=1,zo="firebase-heartbeat-store";let rd=null;function rE(){return rd||(rd=EI(rT,sT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(zo)}catch(n){console.warn(n)}}}}).catch(t=>{throw pr.create("idb-open",{originalErrorMessage:t.message})})),rd}async function iT(t){try{const n=(await rE()).transaction(zo),r=await n.objectStore(zo).get(sE(t));return await n.done,r}catch(e){if(e instanceof hn)An.warn(e.message);else{const n=pr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});An.warn(n.message)}}}async function tv(t,e){try{const r=(await rE()).transaction(zo,"readwrite");await r.objectStore(zo).put(e,sE(t)),await r.done}catch(n){if(n instanceof hn)An.warn(n.message);else{const r=pr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});An.warn(r.message)}}}function sE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT=1024,aT=30;class lT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new uT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=nv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>aT){const o=dT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){An.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=nv(),{heartbeatsToSend:r,unsentEntries:s}=cT(this._heartbeatsCache.heartbeats),i=ql(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return An.warn(n),""}}}function nv(){return new Date().toISOString().substring(0,10)}function cT(t,e=oT){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),rv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),rv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class uT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return q0()?K0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await iT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return tv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return tv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function rv(t){return ql(JSON.stringify({version:2,heartbeats:t})).length}function dT(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(t){wr(new Rn("platform-logger",e=>new CI(e),"PRIVATE")),wr(new Rn("heartbeat",e=>new lT(e),"PRIVATE")),Pt(fh,Zg,t),Pt(fh,Zg,"esm2020"),Pt("fire-js","")}hT("");var fT="firebase",pT="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pt(fT,pT,"app");function iE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mT=iE,oE=new la("auth","Firebase",iE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=new $c("@firebase/auth");function gT(t,...e){Xl.logLevel<=ie.WARN&&Xl.warn(`Auth (${ps}): ${t}`,...e)}function ml(t,...e){Xl.logLevel<=ie.ERROR&&Xl.error(`Auth (${ps}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(t,...e){throw Ff(t,...e)}function un(t,...e){return Ff(t,...e)}function aE(t,e,n){const r={...mT(),[e]:n};return new la("auth","Firebase",r).create(e,{appName:t.name})}function Cn(t){return aE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ff(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return oE.create(t,...e)}function H(t,e,...n){if(!t)throw Ff(e,...n)}function wn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ml(e),new Error(e)}function bn(t,e){t||wn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function vT(){return sv()==="http:"||sv()==="https:"}function sv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vT()||B0()||"connection"in navigator)?navigator.onLine:!0}function _T(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n){this.shortDelay=e,this.longDelay=n,bn(n>e,"Short delay should be less than long delay!"),this.isMobile=Lf()||Jw()}get(){return yT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(t,e){bn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xT=new ua(3e4,6e4);function kr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function jr(t,e,n,r,s={}){return cE(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=mi({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...i};return H0()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Mn(t.emulatorConfig.host)&&(d.credentials="include"),lE.fetch()(await uE(t,t.config.apiHost,n,c),d)})}async function cE(t,e,n){t._canInitEmulator=!1;const r={...wT,...e};try{const s=new CT(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Xa(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xa(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Xa(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Xa(t,"user-disabled",o);const m=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw aE(t,m,d);Qt(t,m)}}catch(s){if(s instanceof hn)throw s;Qt(t,"network-request-failed",{message:String(s)})}}async function da(t,e,n,r,s={}){const i=await jr(t,e,n,r,s);return"mfaPendingCredential"in i&&Qt(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function uE(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Uf(t.config,s):`${t.config.apiScheme}://${s}`;return ET.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function ST(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class CT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(un(this.auth,"network-request-failed")),xT.get())})}}function Xa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=un(t,e,r);return s.customData._tokenResponse=n,s}function iv(t){return t!==void 0&&t.enterprise!==void 0}class NT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ST(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function IT(t,e){return jr(t,"GET","/v2/recaptchaConfig",kr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TT(t,e){return jr(t,"POST","/v1/accounts:delete",e)}async function Jl(t,e){return jr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kT(t,e=!1){const n=Le(t),r=await n.getIdToken(e),s=$f(r);H(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:mo(sd(s.auth_time)),issuedAtTime:mo(sd(s.iat)),expirationTime:mo(sd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function sd(t){return Number(t)*1e3}function $f(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ml("JWT malformed, contained fewer than 3 sections"),null;try{const s=Kl(n);return s?JSON.parse(s):(ml("Failed to decode base64 JWT payload"),null)}catch(s){return ml("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ov(t){const e=$f(t);return H(e,"internal-error"),H(typeof e.exp<"u","internal-error"),H(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ho(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof hn&&jT(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function jT({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mo(this.lastLoginAt),this.creationTime=mo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(t){var p;const e=t.auth,n=await t.getIdToken(),r=await Ho(t,Jl(e,{idToken:n}));H(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(p=s.providerUserInfo)!=null&&p.length?dE(s.providerUserInfo):[],o=AT(t.providerData,i),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=c?u:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new vh(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function RT(t){const e=Le(t);await Zl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AT(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function dE(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bT(t,e){const n=await cE(t,{},async()=>{const r=mi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await uE(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&Mn(t.emulatorConfig.host)&&(u.credentials="include"),lE.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function OT(t,e){return jr(t,"POST","/v2/accounts:revokeToken",kr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){H(e.idToken,"internal-error"),H(typeof e.idToken<"u","internal-error"),H(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ov(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){H(e.length!==0,"internal-error");const n=ov(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(H(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await bT(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Bs;return r&&(H(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(H(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(H(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bs,this.toJSON())}_performRefresh(){return wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(t,e){H(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ht{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new PT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new vh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ho(this,this.stsTokenManager.getToken(this.auth,e));return H(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return kT(this,e)}reload(){return RT(this)}_assign(e){this!==e&&(H(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ht({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Zl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ut(this.auth.app))return Promise.reject(Cn(this.auth));const e=await this.getIdToken();return await Ho(this,TT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:p,emailVerified:f,isAnonymous:v,providerData:w,stsTokenManager:T}=n;H(p&&T,e,"internal-error");const R=Bs.fromJSON(this.name,T);H(typeof p=="string",e,"internal-error"),qn(r,e.name),qn(s,e.name),H(typeof f=="boolean",e,"internal-error"),H(typeof v=="boolean",e,"internal-error"),qn(i,e.name),qn(o,e.name),qn(c,e.name),qn(u,e.name),qn(d,e.name),qn(m,e.name);const E=new Ht({uid:p,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:v,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:R,createdAt:d,lastLoginAt:m});return w&&Array.isArray(w)&&(E.providerData=w.map(S=>({...S}))),u&&(E._redirectEventId=u),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new Bs;s.updateFromServerResponse(n);const i=new Ht({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Zl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];H(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?dE(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new Bs;c.updateFromIdToken(r);const u=new Ht({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new vh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av=new Map;function En(t){bn(t instanceof Function,"Expected a class definition");let e=av.get(t);return e?(bn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,av.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}hE.type="NONE";const lv=hE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(t,e,n){return`firebase:${t}:${e}:${n}`}class Ws{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=gl(this.userKey,s.apiKey,i),this.fullPersistenceKey=gl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Jl(this.auth,{idToken:e}).catch(()=>{});return n?Ht._fromGetAccountInfoResponse(this.auth,n,e):null}return Ht._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ws(En(lv),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||En(lv);const o=gl(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const m=await d._get(o);if(m){let p;if(typeof m=="string"){const f=await Jl(e,{idToken:m}).catch(()=>{});if(!f)break;p=await Ht._fromGetAccountInfoResponse(e,f,m)}else p=Ht._fromJSON(e,m);d!==i&&(c=p),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Ws(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Ws(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yE(e))return"Blackberry";if(_E(e))return"Webos";if(pE(e))return"Safari";if((e.includes("chrome/")||mE(e))&&!e.includes("edge/"))return"Chrome";if(vE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function fE(t=ot()){return/firefox\//i.test(t)}function pE(t=ot()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mE(t=ot()){return/crios\//i.test(t)}function gE(t=ot()){return/iemobile/i.test(t)}function vE(t=ot()){return/android/i.test(t)}function yE(t=ot()){return/blackberry/i.test(t)}function _E(t=ot()){return/webos/i.test(t)}function Vf(t=ot()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function DT(t=ot()){var e;return Vf(t)&&!!((e=window.navigator)!=null&&e.standalone)}function LT(){return W0()&&document.documentMode===10}function wE(t=ot()){return Vf(t)||vE(t)||_E(t)||yE(t)||/windows phone/i.test(t)||gE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(t,e=[]){let n;switch(t){case"Browser":n=cv(ot());break;case"Worker":n=`${cv(ot())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ps}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FT(t,e={}){return jr(t,"GET","/v2/passwordPolicy",kr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=6;class $T{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??UT,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uv(this),this.idTokenSubscription=new uv(this),this.beforeStateQueue=new MT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=En(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ws.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Jl(this,{idToken:e}),r=await Ht._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(ut(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return H(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Zl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_T()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ut(this.app))return Promise.reject(Cn(this));const n=e?Le(e):null;return n&&H(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&H(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ut(this.app)?Promise.reject(Cn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ut(this.app)?Promise.reject(Cn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(En(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FT(this),n=new $T(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new la("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await OT(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&En(e)||this._popupRedirectResolver;H(n,this,"argument-error"),this.redirectPersistenceManager=await Ws.create(this,[En(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(H(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=EE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(ut(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&gT(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ms(t){return Le(t)}class uv{constructor(e){this.auth=e,this.observer=null,this.addObserver=tI(n=>this.observer=n)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zT(t){zc=t}function xE(t){return zc.loadJS(t)}function HT(){return zc.recaptchaEnterpriseScript}function BT(){return zc.gapiScript}function WT(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class GT{constructor(){this.enterprise=new qT}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class qT{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const KT="recaptcha-enterprise",SE="NO_RECAPTCHA";class YT{constructor(e){this.type=KT,this.auth=ms(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{IT(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new NT(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,o,c){const u=window.grecaptcha;iv(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(SE)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new GT().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&iv(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=HT();u.length!==0&&(u+=c),xE(u).then(()=>{s(c,i,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function dv(t,e,n,r=!1,s=!1){const i=new YT(t);let o;if(s)o=SE;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function yh(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await dv(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await dv(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(t,e){const n=ca(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(_r(i,e??{}))return s;Qt(s,"already-initialized")}return n.initialize({options:e})}function XT(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(En);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function JT(t,e,n){const r=ms(t);H(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=CE(e),{host:o,port:c}=ZT(e),u=c===null?"":`:${c}`,d={url:`${i}//${o}${u}/`},m=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){H(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),H(_r(d,r.config.emulator)&&_r(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,Mn(o)?(Lc(`${i}//${o}${u}`),Mc("Auth",!0)):e1()}function CE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ZT(t){const e=CE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:hv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:hv(o)}}}function hv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function e1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return wn("not implemented")}_getIdTokenResponse(e){return wn("not implemented")}_linkToIdToken(e,n){return wn("not implemented")}_getReauthenticationResolver(e){return wn("not implemented")}}async function t1(t,e){return jr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n1(t,e){return da(t,"POST","/v1/accounts:signInWithPassword",kr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r1(t,e){return da(t,"POST","/v1/accounts:signInWithEmailLink",kr(t,e))}async function s1(t,e){return da(t,"POST","/v1/accounts:signInWithEmailLink",kr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo extends zf{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Bo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Bo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yh(e,n,"signInWithPassword",n1);case"emailLink":return r1(e,{email:this._email,oobCode:this._password});default:Qt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yh(e,r,"signUpPassword",t1);case"emailLink":return s1(e,{idToken:n,email:this._email,oobCode:this._password});default:Qt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gs(t,e){return da(t,"POST","/v1/accounts:signInWithIdp",kr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="http://localhost";class ss extends zf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ss(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Qt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new ss(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Gs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Gs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Gs(e,n)}buildRequest(){const e={requestUri:i1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=mi(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function a1(t){const e=no(ro(t)).link,n=e?no(ro(e)).deep_link_id:null,r=no(ro(t)).deep_link_id;return(r?no(ro(r)).link:null)||r||n||e||t}class Hf{constructor(e){const n=no(ro(e)),r=n.apiKey??null,s=n.oobCode??null,i=o1(n.mode??null);H(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=a1(e);try{return new Hf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(){this.providerId=gi.PROVIDER_ID}static credential(e,n){return Bo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Hf.parseLink(n);return H(r,"argument-error"),Bo._fromEmailAndCode(e,r.code,r.tenantId)}}gi.PROVIDER_ID="password";gi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";gi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends NE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn extends ha{constructor(){super("facebook.com")}static credential(e){return ss._fromParams({providerId:Jn.PROVIDER_ID,signInMethod:Jn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jn.credentialFromTaggedObject(e)}static credentialFromError(e){return Jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jn.credential(e.oauthAccessToken)}catch{return null}}}Jn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Jn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn extends ha{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ss._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Zn.credentialFromTaggedObject(e)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Zn.credential(n,r)}catch{return null}}}Zn.GOOGLE_SIGN_IN_METHOD="google.com";Zn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends ha{constructor(){super("github.com")}static credential(e){return ss._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return er.credential(e.oauthAccessToken)}catch{return null}}}er.GITHUB_SIGN_IN_METHOD="github.com";er.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends ha{constructor(){super("twitter.com")}static credential(e,n){return ss._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return tr.credential(n,r)}catch{return null}}}tr.TWITTER_SIGN_IN_METHOD="twitter.com";tr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l1(t,e){return da(t,"POST","/v1/accounts:signUp",kr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Ht._fromIdTokenResponse(e,r,s),o=fv(r);return new is({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=fv(r);return new is({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function fv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec extends hn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ec.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new ec(e,n,r,s)}}function IE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ec._fromErrorAndOperation(t,i,e,r):i})}async function c1(t,e,n=!1){const r=await Ho(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return is._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u1(t,e,n=!1){const{auth:r}=t;if(ut(r.app))return Promise.reject(Cn(r));const s="reauthenticate";try{const i=await Ho(t,IE(r,s,e,t),n);H(i.idToken,r,"internal-error");const o=$f(i.idToken);H(o,r,"internal-error");const{sub:c}=o;return H(t.uid===c,r,"user-mismatch"),is._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Qt(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TE(t,e,n=!1){if(ut(t.app))return Promise.reject(Cn(t));const r="signIn",s=await IE(t,r,e),i=await is._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function d1(t,e){return TE(ms(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kE(t){const e=ms(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function jE(t,e,n){if(ut(t.app))return Promise.reject(Cn(t));const r=ms(t),o=await yh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",l1).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&kE(t),u}),c=await is._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function h1(t,e,n){return ut(t.app)?Promise.reject(Cn(t)):d1(Le(t),gi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&kE(t),r})}function f1(t,e,n,r){return Le(t).onIdTokenChanged(e,n,r)}function p1(t,e,n){return Le(t).beforeAuthStateChanged(e,n)}function m1(t,e,n,r){return Le(t).onAuthStateChanged(e,n,r)}function g1(t){return Le(t).signOut()}const tc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(tc,"1"),this.storage.removeItem(tc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=1e3,y1=10;class RE extends PE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);LT()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,y1):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},v1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}RE.type="LOCAL";const _1=RE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE extends PE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}AE.type="SESSION";const bE=AE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Hc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async d=>d(n.origin,i)),u=await w1(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const d=Bf("",20);s.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const f=p;if(f.data.eventId===d)switch(f.data.status){case"ack":clearTimeout(m),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(f.data.response);break;default:clearTimeout(m),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return window}function x1(t){dn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(){return typeof dn().WorkerGlobalScope<"u"&&typeof dn().importScripts=="function"}async function S1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function C1(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function N1(){return OE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="firebaseLocalStorageDb",I1=1,nc="firebaseLocalStorage",LE="fbase_key";class fa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bc(t,e){return t.transaction([nc],e?"readwrite":"readonly").objectStore(nc)}function T1(){const t=indexedDB.deleteDatabase(DE);return new fa(t).toPromise()}function _h(){const t=indexedDB.open(DE,I1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(nc,{keyPath:LE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(nc)?e(r):(r.close(),await T1(),e(await _h()))})})}async function pv(t,e,n){const r=Bc(t,!0).put({[LE]:e,value:n});return new fa(r).toPromise()}async function k1(t,e){const n=Bc(t,!1).get(e),r=await new fa(n).toPromise();return r===void 0?null:r.value}function mv(t,e){const n=Bc(t,!0).delete(e);return new fa(n).toPromise()}const j1=800,P1=3;class ME{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _h(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>P1)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return OE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hc._getInstance(N1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await S1(),!this.activeServiceWorker)return;this.sender=new E1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||C1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _h();return await pv(e,tc,"1"),await mv(e,tc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>pv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>k1(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>mv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Bc(s,!1).getAll();return new fa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),j1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ME.type="LOCAL";const R1=ME;new ua(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(t,e){return e?En(e):(H(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf extends zf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Gs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Gs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function b1(t){return TE(t.auth,new Wf(t),t.bypassAuthState)}function O1(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),u1(n,new Wf(t),t.bypassAuthState)}async function D1(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),c1(n,new Wf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return b1;case"linkViaPopup":case"linkViaRedirect":return D1;case"reauthViaPopup":case"reauthViaRedirect":return O1;default:Qt(this.auth,"internal-error")}}resolve(e){bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=new ua(2e3,1e4);class Ls extends FE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ls.currentPopupAction&&Ls.currentPopupAction.cancel(),Ls.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return H(e,this.auth,"internal-error"),e}async onExecution(){bn(this.filter.length===1,"Popup operations only handle one event");const e=Bf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(un(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ls.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(un(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,L1.get())};e()}}Ls.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1="pendingRedirect",vl=new Map;class F1 extends FE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=vl.get(this.auth._key());if(!e){try{const r=await U1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}vl.set(this.auth._key(),e)}return this.bypassAuthState||vl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function U1(t,e){const n=z1(e),r=V1(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function $1(t,e){vl.set(t._key(),e)}function V1(t){return En(t._redirectPersistence)}function z1(t){return gl(M1,t.config.apiKey,t.name)}async function H1(t,e,n=!1){if(ut(t.app))return Promise.reject(Cn(t));const r=ms(t),s=A1(r,e),o=await new F1(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=10*60*1e3;class W1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!G1(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!UE(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(un(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=B1&&this.cachedEventUids.clear(),this.cachedEventUids.has(gv(e))}saveEventToCache(e){this.cachedEventUids.add(gv(e)),this.lastProcessedEventTime=Date.now()}}function gv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function UE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function G1(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return UE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q1(t,e={}){return jr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Y1=/^https?/;async function Q1(t){if(t.config.emulator)return;const{authorizedDomains:e}=await q1(t);for(const n of e)try{if(X1(n))return}catch{}Qt(t,"unauthorized-domain")}function X1(t){const e=gh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Y1.test(n))return!1;if(K1.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1=new ua(3e4,6e4);function vv(){const t=dn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Z1(t){return new Promise((e,n)=>{var s,i,o;function r(){vv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vv(),n(un(t,"network-request-failed"))},timeout:J1.get()})}if((i=(s=dn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=dn().gapi)!=null&&o.load)r();else{const c=WT("iframefcb");return dn()[c]=()=>{gapi.load?r():n(un(t,"network-request-failed"))},xE(`${BT()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw yl=null,e})}let yl=null;function ek(t){return yl=yl||Z1(t),yl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=new ua(5e3,15e3),nk="__/auth/iframe",rk="emulator/auth/iframe",sk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ik=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ok(t){const e=t.config;H(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Uf(e,rk):`https://${t.config.authDomain}/${nk}`,r={apiKey:e.apiKey,appName:t.name,v:ps},s=ik.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${mi(r).slice(1)}`}async function ak(t){const e=await ek(t),n=dn().gapi;return H(n,t,"internal-error"),e.open({where:document.body,url:ok(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sk,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=un(t,"network-request-failed"),c=dn().setTimeout(()=>{i(o)},tk.get());function u(){dn().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ck=500,uk=600,dk="_blank",hk="http://localhost";class yv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fk(t,e,n,r=ck,s=uk){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...lk,width:r.toString(),height:s.toString(),top:i,left:o},d=ot().toLowerCase();n&&(c=mE(d)?dk:n),fE(d)&&(e=e||hk,u.scrollbars="yes");const m=Object.entries(u).reduce((f,[v,w])=>`${f}${v}=${w},`,"");if(DT(d)&&c!=="_self")return pk(e||"",c),new yv(null);const p=window.open(e||"",c,m);H(p,t,"popup-blocked");try{p.focus()}catch{}return new yv(p)}function pk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk="__/auth/handler",gk="emulator/auth/handler",vk=encodeURIComponent("fac");async function _v(t,e,n,r,s,i){H(t.config.authDomain,t,"auth-domain-config-required"),H(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ps,eventId:s};if(e instanceof NE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",uh(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))o[m]=p}if(e instanceof ha){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const u=await t._getAppCheckToken(),d=u?`#${vk}=${encodeURIComponent(u)}`:"";return`${yk(t)}?${mi(c).slice(1)}${d}`}function yk({config:t}){return t.emulator?Uf(t,gk):`https://${t.authDomain}/${mk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id="webStorageSupport";class _k{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bE,this._completeRedirectFn=H1,this._overrideRedirectResult=$1}async _openPopup(e,n,r,s){var o;bn((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await _v(e,n,r,gh(),s);return fk(e,i,Bf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await _v(e,n,r,gh(),s);return x1(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(bn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await ak(e),r=new W1(e);return n.register("authEvent",s=>(H(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(id,{type:id},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[id];i!==void 0&&n(!!i),Qt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Q1(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return wE()||pE()||Vf()}}const wk=_k;var wv="@firebase/auth",Ev="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Sk(t){wr(new Rn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;H(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:EE(t)},d=new VT(r,s,i,u);return XT(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),wr(new Rn("auth-internal",e=>{const n=ms(e.getProvider("auth").getImmediate());return(r=>new Ek(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pt(wv,Ev,xk(t)),Pt(wv,Ev,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=5*60,Nk=Qw("authIdTokenMaxAge")||Ck;let xv=null;const Ik=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Nk)return;const s=n==null?void 0:n.token;xv!==s&&(xv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Tk(t=Vc()){const e=ca(t,"auth");if(e.isInitialized())return e.getImmediate();const n=QT(t,{popupRedirectResolver:wk,persistence:[R1,_1,bE]}),r=Qw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=Ik(i.toString());p1(n,o,()=>o(n.currentUser)),f1(n,c=>o(c))}}const s=Kw("auth");return s&&JT(n,`http://${s}`),n}function kk(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}zT({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=un("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",kk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Sk("Browser");var Sv={};const Cv="@firebase/database",Nv="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $E="";function jk(t){$E=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Oe(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Vo(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return fn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Pk(e)}}catch{}return new Rk},qr=VE("localStorage"),Ak=VE("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=new $c("@firebase/database"),bk=function(){let t=1;return function(){return t++}}(),zE=function(t){const e=sI(t),n=new eI;n.update(e);const r=n.digest();return bf.encodeByteArray(r)},pa=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=pa.apply(null,r):typeof r=="object"?e+=Oe(r):e+=r,e+=" "}return e};let go=null,Iv=!0;const Ok=function(t,e){U(!0,"Can't turn on custom loggers persistently."),qs.logLevel=ie.VERBOSE,go=qs.log.bind(qs)},Be=function(...t){if(Iv===!0&&(Iv=!1,go===null&&Ak.get("logging_enabled")===!0&&Ok()),go){const e=pa.apply(null,t);go(e)}},ma=function(t){return function(...e){Be(t,...e)}},wh=function(...t){const e="FIREBASE INTERNAL ERROR: "+pa(...t);qs.error(e)},On=function(...t){const e=`FIREBASE FATAL ERROR: ${pa(...t)}`;throw qs.error(e),new Error(e)},it=function(...t){const e="FIREBASE WARNING: "+pa(...t);qs.warn(e)},Dk=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&it("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Gf=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Lk=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},si="[MIN_NAME]",os="[MAX_NAME]",gs=function(t,e){if(t===e)return 0;if(t===si||e===os)return-1;if(e===si||t===os)return 1;{const n=Tv(t),r=Tv(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Mk=function(t,e){return t===e?0:t<e?-1:1},qi=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Oe(e))},qf=function(t){if(typeof t!="object"||t===null)return Oe(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Oe(e[r]),n+=":",n+=qf(t[e[r]]);return n+="}",n},HE=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function qe(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const BE=function(t){U(!Gf(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,c,u;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=c+r,o=Math.round(t*Math.pow(2,n-c)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const d=[];for(u=n;u;u-=1)d.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)d.push(i%2?1:0),i=Math.floor(i/2);d.push(s?1:0),d.reverse();const m=d.join("");let p="";for(u=0;u<64;u+=8){let f=parseInt(m.substr(u,8),2).toString(16);f.length===1&&(f="0"+f),p=p+f}return p.toLowerCase()},Fk=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Uk=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function $k(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Vk=new RegExp("^-?(0*)\\d{1,10}$"),zk=-2147483648,Hk=2147483647,Tv=function(t){if(Vk.test(t)){const e=Number(t);if(e>=zk&&e<=Hk)return e}return null},vi=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw it("Exception was thrown by user callback.",n),e},Math.floor(0))}},Bk=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},vo=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,ut(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){it(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Be("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',it(e)}}class _l{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}_l.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf="5",WE="v",GE="s",qE="r",KE="f",YE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,QE="ls",XE="p",Eh="ac",JE="websocket",ZE="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,n,r,s,i=!1,o="",c=!1,u=!1,d=null){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=u,this.emulatorOptions=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=qr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&qr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function qk(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function tx(t,e,n){U(typeof e=="string","typeof type must == string"),U(typeof n=="object","typeof params must == object");let r;if(e===JE)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===ZE)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);qk(t)&&(n.ns=t.namespace);const s=[];return qe(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(){this.counters_={}}incrementCounter(e,n=1){fn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return D0(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od={},ad={};function Yf(t){const e=t.toString();return od[e]||(od[e]=new Kk),od[e]}function Yk(t,e){const n=t.toString();return ad[n]||(ad[n]=e()),ad[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&vi(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="start",Xk="close",Jk="pLPCommand",Zk="pRTLPCB",nx="id",rx="pw",sx="ser",ej="cb",tj="seg",nj="ts",rj="d",sj="dframe",ix=1870,ox=30,ij=ix-ox,oj=25e3,aj=3e4;class Ms{constructor(e,n,r,s,i,o,c){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ma(e),this.stats_=Yf(n),this.urlFn=u=>(this.appCheckToken&&(u[Eh]=this.appCheckToken),tx(n,ZE,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Qk(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(aj)),Lk(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Qf((...i)=>{const[o,c,u,d,m]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===kv)this.id=c,this.password=u;else if(o===Xk)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,c]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,c)},()=>{this.onClosed_()},this.urlFn);const r={};r[kv]="t",r[sx]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[ej]=this.scriptTagHolder.uniqueCallbackIdentifier),r[WE]=Kf,this.transportSessionId&&(r[GE]=this.transportSessionId),this.lastSessionId&&(r[QE]=this.lastSessionId),this.applicationId&&(r[XE]=this.applicationId),this.appCheckToken&&(r[Eh]=this.appCheckToken),typeof location<"u"&&location.hostname&&YE.test(location.hostname)&&(r[qE]=KE);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ms.forceAllow_=!0}static forceDisallow(){Ms.forceDisallow_=!0}static isAvailable(){return Ms.forceAllow_?!0:!Ms.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Fk()&&!Uk()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Oe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Gw(n),s=HE(r,ij);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[sj]="t",r[nx]=e,r[rx]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Oe(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Qf{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=bk(),window[Jk+this.uniqueCallbackIdentifier]=e,window[Zk+this.uniqueCallbackIdentifier]=n,this.myIFrame=Qf.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(c){Be("frame writing exception"),c.stack&&Be(c.stack),Be(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Be("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[nx]=this.myID,e[rx]=this.myPW,e[sx]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+ox+r.length<=ix;){const o=this.pendingSegs.shift();r=r+"&"+tj+s+"="+o.seg+"&"+nj+s+"="+o.ts+"&"+rj+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(oj)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Be("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj=16384,cj=45e3;let rc=null;typeof MozWebSocket<"u"?rc=MozWebSocket:typeof WebSocket<"u"&&(rc=WebSocket);class zt{constructor(e,n,r,s,i,o,c){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ma(this.connId),this.stats_=Yf(n),this.connURL=zt.connectionURL_(n,o,c,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[WE]=Kf,typeof location<"u"&&location.hostname&&YE.test(location.hostname)&&(o[qE]=KE),n&&(o[GE]=n),r&&(o[QE]=r),s&&(o[Eh]=s),i&&(o[XE]=i),tx(e,JE,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,qr.set("previous_websocket_failure",!0);try{let r;G0(),this.mySock=new rc(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){zt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&rc!==null&&!zt.forceDisallow_}static previouslyFailed(){return qr.isInMemoryStorage||qr.get("previous_websocket_failure")===!0}markConnectionHealthy(){qr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Vo(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(U(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Oe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=HE(n,lj);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(cj))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}zt.responsesRequiredToBeHealthy=2;zt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{static get ALL_TRANSPORTS(){return[Ms,zt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=zt&&zt.isAvailable();let r=n&&!zt.previouslyFailed();if(e.webSocketOnly&&(n||it("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[zt];else{const s=this.transports_=[];for(const i of Wo.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);Wo.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Wo.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=6e4,dj=5e3,hj=10*1024,fj=100*1024,ld="t",jv="d",pj="s",Pv="r",mj="e",Rv="o",Av="a",bv="n",Ov="p",gj="h";class vj{constructor(e,n,r,s,i,o,c,u,d,m){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=c,this.onDisconnect_=u,this.onKill_=d,this.lastSessionId=m,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ma("c:"+this.id+":"),this.transportManager_=new Wo(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=vo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>fj?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>hj?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ld in e){const n=e[ld];n===Av?this.upgradeIfSecondaryHealthy_():n===Pv?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Rv&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=qi("t",e),r=qi("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Ov,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Av,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:bv,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=qi("t",e),r=qi("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=qi(ld,e);if(jv in e){const r=e[jv];if(n===gj){const s={...r};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===bv){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===pj?this.onConnectionShutdown_(r):n===Pv?this.onReset_(r):n===mj?wh("Server Error: "+r):n===Rv?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):wh("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Kf!==r&&it("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),vo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(uj))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):vo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(dj))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Ov,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(qr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e){this.allowedEvents_=e,this.listeners_={},U(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){U(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc extends lx{static getInstance(){return new sc}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Lf()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return U(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv=32,Lv=768;class ae{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function se(){return new ae("")}function Q(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Er(t){return t.pieces_.length-t.pieceNum_}function ue(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ae(t.pieces_,e)}function Xf(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function yj(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Go(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function cx(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ae(e,0)}function xe(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ae)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new ae(n,0)}function J(t){return t.pieceNum_>=t.pieces_.length}function rt(t,e){const n=Q(t),r=Q(e);if(n===null)return e;if(n===r)return rt(ue(t),ue(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function _j(t,e){const n=Go(t,0),r=Go(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=gs(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function Jf(t,e){if(Er(t)!==Er(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function kt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Er(t)>Er(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class wj{constructor(e,n){this.errorPrefix_=n,this.parts_=Go(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Uc(this.parts_[r]);ux(this)}}function Ej(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Uc(e),ux(t)}function xj(t){const e=t.parts_.pop();t.byteLength_-=Uc(e),t.parts_.length>0&&(t.byteLength_-=1)}function ux(t){if(t.byteLength_>Lv)throw new Error(t.errorPrefix_+"has a key path longer than "+Lv+" bytes ("+t.byteLength_+").");if(t.parts_.length>Dv)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Dv+") or object contains a cycle "+Vr(t))}function Vr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf extends lx{static getInstance(){return new Zf}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return U(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=1e3,Sj=60*5*1e3,Mv=30*1e3,Cj=1.3,Nj=3e4,Ij="server_kill",Fv=3;class Nn extends ax{constructor(e,n,r,s,i,o,c,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=Nn.nextPersistentConnectionId_++,this.log_=ma("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ki,this.maxReconnectDelay_=Sj,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Zf.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&sc.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Oe(i)),U(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new aa,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const c=o.d;o.s==="ok"?n.resolve(c):n.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),U(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),U(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const c={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,c=>{const u=c.d,d=c.s;Nn.warnOnListenWarnings_(u,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(d,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&fn(e,"w")){const r=ri(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();it(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Z0(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Mv)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=J0(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),U(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Oe(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):wh("Unrecognized action received from server: "+Oe(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){U(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ki,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ki,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Nj&&(this.reconnectDelay_=Ki),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Cj)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Nn.nextConnectionId_++,i=this.lastSessionId;let o=!1,c=null;const u=function(){c?c.close():(o=!0,r())},d=function(p){U(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(p)};this.realtime_={close:u,sendRequest:d};const m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[p,f]=await Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);o?Be("getToken() completed but was canceled"):(Be("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=f&&f.token,c=new vj(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,v=>{it(v+" ("+this.repoInfo_.toString()+")"),this.interrupt(Ij)},i))}catch(p){this.log_("Failed to get token: "+p),o||(this.repoInfo_.nodeAdmin&&it(p),u())}}}interrupt(e){Be("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Be("Resuming connection for reason: "+e),delete this.interruptReasons_[e],uh(this.interruptReasons_)&&(this.reconnectDelay_=Ki,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>qf(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new ae(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Be("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Fv&&(this.reconnectDelay_=Mv,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Be("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Fv&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+$E.replace(/\./g,"-")]=1,Lf()?e["framework.cordova"]=1:Jw()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=sc.getInstance().currentlyOnline();return uh(this.interruptReasons_)&&e}}Nn.nextPersistentConnectionId_=0;Nn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new X(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new X(si,e),s=new X(si,n);return this.compare(r,s)!==0}minPost(){return X.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ja;class dx extends Wc{static get __EMPTY_NODE(){return Ja}static set __EMPTY_NODE(e){Ja=e}compare(e,n){return gs(e.name,n.name)}isDefinedOn(e){throw pi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return X.MIN}maxPost(){return new X(os,Ja)}makePost(e,n){return U(typeof e=="string","KeyIndex indexValue must always be a string."),new X(e,Ja)}toString(){return".key"}}const Ks=new dx;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class $e{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??$e.RED,this.left=s??ht.EMPTY_NODE,this.right=i??ht.EMPTY_NODE}copy(e,n,r,s,i){return new $e(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ht.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return ht.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,$e.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,$e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}$e.RED=!0;$e.BLACK=!1;class Tj{copy(e,n,r,s,i){return this}insert(e,n,r){return new $e(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ht{constructor(e,n=ht.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new ht(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,$e.BLACK,null,null))}remove(e){return new ht(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,$e.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Za(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Za(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Za(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Za(this.root_,null,this.comparator_,!0,e)}}ht.EMPTY_NODE=new Tj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(t,e){return gs(t.name,e.name)}function ep(t,e){return gs(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xh;function jj(t){xh=t}const hx=function(t){return typeof t=="number"?"number:"+BE(t):"string:"+t},fx=function(t){if(t.isLeafNode()){const e=t.val();U(typeof e=="string"||typeof e=="number"||typeof e=="object"&&fn(e,".sv"),"Priority must be a string or number.")}else U(t===xh||t.isEmpty(),"priority of unexpected type.");U(t===xh||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uv;class Fe{static set __childrenNodeConstructor(e){Uv=e}static get __childrenNodeConstructor(){return Uv}constructor(e,n=Fe.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,U(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),fx(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Fe(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Fe.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return J(e)?this:Q(e)===".priority"?this.priorityNode_:Fe.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Fe.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Q(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(U(r!==".priority"||Er(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Fe.__childrenNodeConstructor.EMPTY_NODE.updateChild(ue(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+hx(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=BE(this.value_):e+=this.value_,this.lazyHash_=zE(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Fe.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Fe.__childrenNodeConstructor?-1:(U(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Fe.VALUE_TYPE_ORDER.indexOf(n),i=Fe.VALUE_TYPE_ORDER.indexOf(r);return U(s>=0,"Unknown leaf type: "+n),U(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Fe.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let px,mx;function Pj(t){px=t}function Rj(t){mx=t}class Aj extends Wc{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?gs(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return X.MIN}maxPost(){return new X(os,new Fe("[PRIORITY-POST]",mx))}makePost(e,n){const r=px(e);return new X(n,new Fe("[PRIORITY-POST]",r))}toString(){return".priority"}}const Se=new Aj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj=Math.log(2);class Oj{constructor(e){const n=i=>parseInt(Math.log(i)/bj,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ic=function(t,e,n,r){t.sort(e);const s=function(u,d){const m=d-u;let p,f;if(m===0)return null;if(m===1)return p=t[u],f=n?n(p):p,new $e(f,p.node,$e.BLACK,null,null);{const v=parseInt(m/2,10)+u,w=s(u,v),T=s(v+1,d);return p=t[v],f=n?n(p):p,new $e(f,p.node,$e.BLACK,w,T)}},i=function(u){let d=null,m=null,p=t.length;const f=function(w,T){const R=p-w,E=p;p-=w;const S=s(R+1,E),C=t[R],O=n?n(C):C;v(new $e(O,C.node,T,null,S))},v=function(w){d?(d.left=w,d=w):(m=w,d=w)};for(let w=0;w<u.count;++w){const T=u.nextBitIsOne(),R=Math.pow(2,u.count-(w+1));T?f(R,$e.BLACK):(f(R,$e.BLACK),f(R,$e.RED))}return m},o=new Oj(t.length),c=i(o);return new ht(r||e,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cd;const Ss={};class xn{static get Default(){return U(Ss&&Se,"ChildrenNode.ts has not been loaded"),cd=cd||new xn({".priority":Ss},{".priority":Se}),cd}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=ri(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ht?n:null}hasIndex(e){return fn(this.indexSet_,e.toString())}addIndex(e,n){U(e!==Ks,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(X.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let c;s?c=ic(r,e.getCompare()):c=Ss;const u=e.toString(),d={...this.indexSet_};d[u]=e;const m={...this.indexes_};return m[u]=c,new xn(m,d)}addToIndexes(e,n){const r=Yl(this.indexes_,(s,i)=>{const o=ri(this.indexSet_,i);if(U(o,"Missing index implementation for "+i),s===Ss)if(o.isDefinedOn(e.node)){const c=[],u=n.getIterator(X.Wrap);let d=u.getNext();for(;d;)d.name!==e.name&&c.push(d),d=u.getNext();return c.push(e),ic(c,o.getCompare())}else return Ss;else{const c=n.get(e.name);let u=s;return c&&(u=u.remove(new X(e.name,c))),u.insert(e,e.node)}});return new xn(r,this.indexSet_)}removeFromIndexes(e,n){const r=Yl(this.indexes_,s=>{if(s===Ss)return s;{const i=n.get(e.name);return i?s.remove(new X(e.name,i)):s}});return new xn(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yi;class B{static get EMPTY_NODE(){return Yi||(Yi=new B(new ht(ep),null,xn.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&fx(this.priorityNode_),this.children_.isEmpty()&&U(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Yi}updatePriority(e){return this.children_.isEmpty()?this:new B(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Yi:n}}getChild(e){const n=Q(e);return n===null?this:this.getImmediateChild(n).getChild(ue(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(U(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new X(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Yi:this.priorityNode_;return new B(s,o,i)}}updateChild(e,n){const r=Q(e);if(r===null)return n;{U(Q(e)!==".priority"||Er(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(ue(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Se,(o,c)=>{n[o]=c.val(e),r++,i&&B.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const c in n)o[c]=n[c];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+hx(this.getPriority().val())+":"),this.forEachChild(Se,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":zE(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new X(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new X(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new X(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,X.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,X.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ga?-1:0}withIndex(e){if(e===Ks||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new B(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ks||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Se),s=n.getIterator(Se);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Ks?null:this.indexMap_.get(e.toString())}}B.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Dj extends B{constructor(){super(new ht(ep),B.EMPTY_NODE,xn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return B.EMPTY_NODE}isEmpty(){return!1}}const ga=new Dj;Object.defineProperties(X,{MIN:{value:new X(si,B.EMPTY_NODE)},MAX:{value:new X(os,ga)}});dx.__EMPTY_NODE=B.EMPTY_NODE;Fe.__childrenNodeConstructor=B;jj(ga);Rj(ga);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj=!0;function be(t,e=null){if(t===null)return B.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),U(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Fe(n,be(e))}if(!(t instanceof Array)&&Lj){const n=[];let r=!1;if(qe(t,(o,c)=>{if(o.substring(0,1)!=="."){const u=be(c);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new X(o,u)))}}),n.length===0)return B.EMPTY_NODE;const i=ic(n,kj,o=>o.name,ep);if(r){const o=ic(n,Se.getCompare());return new B(i,be(e),new xn({".priority":o},{".priority":Se}))}else return new B(i,be(e),xn.Default)}else{let n=B.EMPTY_NODE;return qe(t,(r,s)=>{if(fn(t,r)&&r.substring(0,1)!=="."){const i=be(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(be(e))}}Pj(be);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj extends Wc{constructor(e){super(),this.indexPath_=e,U(!J(e)&&Q(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?gs(e.name,n.name):i}makePost(e,n){const r=be(e),s=B.EMPTY_NODE.updateChild(this.indexPath_,r);return new X(n,s)}maxPost(){const e=B.EMPTY_NODE.updateChild(this.indexPath_,ga);return new X(os,e)}toString(){return Go(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj extends Wc{compare(e,n){const r=e.node.compareTo(n.node);return r===0?gs(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return X.MIN}maxPost(){return X.MAX}makePost(e,n){const r=be(e);return new X(n,r)}toString(){return".value"}}const Uj=new Fj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(t){return{type:"value",snapshotNode:t}}function ii(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function qo(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ko(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function $j(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){U(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const c=e.getImmediateChild(n);return c.getChild(s).equals(r.getChild(s))&&c.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(qo(n,c)):U(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?o.trackChildChange(ii(n,r)):o.trackChildChange(Ko(n,r,c))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Se,(s,i)=>{n.hasChild(s)||r.trackChildChange(qo(s,i))}),n.isLeafNode()||n.forEachChild(Se,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(Ko(s,i,o))}else r.trackChildChange(ii(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?B.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e){this.indexedFilter_=new tp(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Yo.getStartPost_(e),this.endPost_=Yo.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new X(n,r))||(r=B.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=B.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(B.EMPTY_NODE);const i=this;return n.forEachChild(Se,(o,c)=>{i.matches(new X(o,c))||(s=s.updateImmediateChild(o,B.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Yo(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new X(n,r))||(r=B.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=B.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=B.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const c=i.getNext();if(this.withinDirectionalStart(c))if(this.withinDirectionalEnd(c))s=s.updateImmediateChild(c.name,c.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(B.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const c=i.getNext();o<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?o++:s=s.updateImmediateChild(c.name,B.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const p=this.index_.getCompare();o=(f,v)=>p(v,f)}else o=this.index_.getCompare();const c=e;U(c.numChildren()===this.limit_,"");const u=new X(n,r),d=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),m=this.rangedFilter_.matches(u);if(c.hasChild(n)){const p=c.getImmediateChild(n);let f=s.getChildAfterChild(this.index_,d,this.reverse_);for(;f!=null&&(f.name===n||c.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);const v=f==null?1:o(f,u);if(m&&!r.isEmpty()&&v>=0)return i!=null&&i.trackChildChange(Ko(n,r,p)),c.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(qo(n,p));const T=c.updateImmediateChild(n,B.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(i!=null&&i.trackChildChange(ii(f.name,f.node)),T.updateImmediateChild(f.name,f.node)):T}}else return r.isEmpty()?e:m&&o(d,u)>=0?(i!=null&&(i.trackChildChange(qo(d.name,d.node)),i.trackChildChange(ii(n,r))),c.updateImmediateChild(n,r).updateImmediateChild(d.name,B.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Se}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return U(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return U(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:si}hasEnd(){return this.endSet_}getIndexEndValue(){return U(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return U(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:os}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return U(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Se}copy(){const e=new np;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function zj(t){return t.loadsAllData()?new tp(t.getIndex()):t.hasLimit()?new Vj(t):new Yo(t)}function $v(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Se?n="$priority":t.index_===Uj?n="$value":t.index_===Ks?n="$key":(U(t.index_ instanceof Mj,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Oe(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Oe(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Oe(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Oe(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Oe(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Vv(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Se&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc extends ax{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(U(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=ma("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=oc.getListenId_(e,r),c={};this.listens_[o]=c;const u=$v(e._queryParams);this.restRequest_(i+".json",u,(d,m)=>{let p=m;if(d===404&&(p=null,d=null),d===null&&this.onDataUpdate_(i,p,!1,r),ri(this.listens_,o)===c){let f;d?d===401?f="permission_denied":f="rest_error:"+d:f="ok",s(f,null)}})}unlisten(e,n){const r=oc.getListenId_(e,n);delete this.listens_[r]}get(e){const n=$v(e._queryParams),r=e._path.toString(),s=new aa;return this.restRequest_(r+".json",n,(i,o)=>{let c=o;i===404&&(c=null,i=null),i===null?(this.onDataUpdate_(r,c,!1,null),s.resolve(c)):s.reject(new Error(c))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+mi(n);this.log_("Sending REST request for "+o);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(r&&c.readyState===4){this.log_("REST Response for "+o+" received. status:",c.status,"response:",c.responseText);let u=null;if(c.status>=200&&c.status<300){try{u=Vo(c.responseText)}catch{it("Failed to parse JSON response for "+o+": "+c.responseText)}r(null,u)}else c.status!==401&&c.status!==404&&it("Got unsuccessful REST response for "+o+" Status: "+c.status),r(c.status);r=null}},c.open("GET",o,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(){this.rootNode_=B.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(){return{value:null,children:new Map}}function vx(t,e,n){if(J(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Q(e);t.children.has(r)||t.children.set(r,ac());const s=t.children.get(r);e=ue(e),vx(s,e,n)}}function Sh(t,e,n){t.value!==null?n(e,t.value):Bj(t,(r,s)=>{const i=new ae(e.toString()+"/"+r);Sh(s,i,n)})}function Bj(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&qe(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=10*1e3,Gj=30*1e3,qj=5*60*1e3;class Kj{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Wj(e);const r=zv+(Gj-zv)*Math.random();vo(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;qe(e,(s,i)=>{i>0&&fn(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),vo(this.reportStats_.bind(this),Math.floor(Math.random()*2*qj))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Bt||(Bt={}));function rp(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function sp(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ip(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Bt.ACK_USER_WRITE,this.source=rp()}operationForChild(e){if(J(this.path)){if(this.affectedTree.value!=null)return U(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ae(e));return new lc(se(),n,this.revert)}}else return U(Q(this.path)===e,"operationForChild called for unrelated child."),new lc(ue(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n){this.source=e,this.path=n,this.type=Bt.LISTEN_COMPLETE}operationForChild(e){return J(this.path)?new Qo(this.source,se()):new Qo(this.source,ue(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Bt.OVERWRITE}operationForChild(e){return J(this.path)?new as(this.source,se(),this.snap.getImmediateChild(e)):new as(this.source,ue(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Bt.MERGE}operationForChild(e){if(J(this.path)){const n=this.children.subtree(new ae(e));return n.isEmpty()?null:n.value?new as(this.source,se(),n.value):new oi(this.source,se(),n)}else return U(Q(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new oi(this.source,ue(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(J(e))return this.isFullyInitialized()&&!this.filtered_;const n=Q(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Qj(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push($j(o.childName,o.snapshotNode))}),Qi(t,s,"child_removed",e,r,n),Qi(t,s,"child_added",e,r,n),Qi(t,s,"child_moved",i,r,n),Qi(t,s,"child_changed",e,r,n),Qi(t,s,"value",e,r,n),s}function Qi(t,e,n,r,s,i){const o=r.filter(c=>c.type===n);o.sort((c,u)=>Jj(t,c,u)),o.forEach(c=>{const u=Xj(t,c,i);s.forEach(d=>{d.respondsTo(c.type)&&e.push(d.createEvent(u,t.query_))})})}function Xj(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Jj(t,e,n){if(e.childName==null||n.childName==null)throw pi("Should only compare child_ events.");const r=new X(e.childName,e.snapshotNode),s=new X(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(t,e){return{eventCache:t,serverCache:e}}function yo(t,e,n,r){return Gc(new xr(e,n,r),t.serverCache)}function yx(t,e,n,r){return Gc(t.eventCache,new xr(e,n,r))}function cc(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ls(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ud;const Zj=()=>(ud||(ud=new ht(Mk)),ud);class ce{static fromObject(e){let n=new ce(null);return qe(e,(r,s)=>{n=n.set(new ae(r),s)}),n}constructor(e,n=Zj()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:se(),value:this.value};if(J(e))return null;{const r=Q(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(ue(e),n);return i!=null?{path:xe(new ae(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(J(e))return this;{const n=Q(e),r=this.children.get(n);return r!==null?r.subtree(ue(e)):new ce(null)}}set(e,n){if(J(e))return new ce(n,this.children);{const r=Q(e),i=(this.children.get(r)||new ce(null)).set(ue(e),n),o=this.children.insert(r,i);return new ce(this.value,o)}}remove(e){if(J(e))return this.children.isEmpty()?new ce(null):new ce(null,this.children);{const n=Q(e),r=this.children.get(n);if(r){const s=r.remove(ue(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new ce(null):new ce(this.value,i)}else return this}}get(e){if(J(e))return this.value;{const n=Q(e),r=this.children.get(n);return r?r.get(ue(e)):null}}setTree(e,n){if(J(e))return n;{const r=Q(e),i=(this.children.get(r)||new ce(null)).setTree(ue(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new ce(this.value,o)}}fold(e){return this.fold_(se(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(xe(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,se(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(J(e))return null;{const i=Q(e),o=this.children.get(i);return o?o.findOnPath_(ue(e),xe(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,se(),n)}foreachOnPath_(e,n,r){if(J(e))return this;{this.value&&r(n,this.value);const s=Q(e),i=this.children.get(s);return i?i.foreachOnPath_(ue(e),xe(n,s),r):new ce(null)}}foreach(e){this.foreach_(se(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(xe(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.writeTree_=e}static empty(){return new Kt(new ce(null))}}function _o(t,e,n){if(J(e))return new Kt(new ce(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=rt(s,e);return i=i.updateChild(o,n),new Kt(t.writeTree_.set(s,i))}else{const s=new ce(n),i=t.writeTree_.setTree(e,s);return new Kt(i)}}}function Ch(t,e,n){let r=t;return qe(n,(s,i)=>{r=_o(r,xe(e,s),i)}),r}function Hv(t,e){if(J(e))return Kt.empty();{const n=t.writeTree_.setTree(e,new ce(null));return new Kt(n)}}function Nh(t,e){return vs(t,e)!=null}function vs(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(rt(n.path,e)):null}function Bv(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Se,(r,s)=>{e.push(new X(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new X(r,s.value))}),e}function mr(t,e){if(J(e))return t;{const n=vs(t,e);return n!=null?new Kt(new ce(n)):new Kt(t.writeTree_.subtree(e))}}function Ih(t){return t.writeTree_.isEmpty()}function ai(t,e){return _x(se(),t.writeTree_,e)}function _x(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(U(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=_x(xe(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(xe(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(t,e){return Sx(e,t)}function eP(t,e,n,r,s){U(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=_o(t.visibleWrites,e,n)),t.lastWriteId=r}function tP(t,e,n,r){U(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Ch(t.visibleWrites,e,n),t.lastWriteId=r}function nP(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function rP(t,e){const n=t.allWrites.findIndex(c=>c.writeId===e);U(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const c=t.allWrites[o];c.visible&&(o>=n&&sP(c,r.path)?s=!1:kt(r.path,c.path)&&(i=!0)),o--}if(s){if(i)return iP(t),!0;if(r.snap)t.visibleWrites=Hv(t.visibleWrites,r.path);else{const c=r.children;qe(c,u=>{t.visibleWrites=Hv(t.visibleWrites,xe(r.path,u))})}return!0}else return!1}function sP(t,e){if(t.snap)return kt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&kt(xe(t.path,n),e))return!0;return!1}function iP(t){t.visibleWrites=wx(t.allWrites,oP,se()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function oP(t){return t.visible}function wx(t,e,n){let r=Kt.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let c;if(i.snap)kt(n,o)?(c=rt(n,o),r=_o(r,c,i.snap)):kt(o,n)&&(c=rt(o,n),r=_o(r,se(),i.snap.getChild(c)));else if(i.children){if(kt(n,o))c=rt(n,o),r=Ch(r,c,i.children);else if(kt(o,n))if(c=rt(o,n),J(c))r=Ch(r,se(),i.children);else{const u=ri(i.children,Q(c));if(u){const d=u.getChild(ue(c));r=_o(r,se(),d)}}}else throw pi("WriteRecord should have .snap or .children")}}return r}function Ex(t,e,n,r,s){if(!r&&!s){const i=vs(t.visibleWrites,e);if(i!=null)return i;{const o=mr(t.visibleWrites,e);if(Ih(o))return n;if(n==null&&!Nh(o,se()))return null;{const c=n||B.EMPTY_NODE;return ai(o,c)}}}else{const i=mr(t.visibleWrites,e);if(!s&&Ih(i))return n;if(!s&&n==null&&!Nh(i,se()))return null;{const o=function(d){return(d.visible||s)&&(!r||!~r.indexOf(d.writeId))&&(kt(d.path,e)||kt(e,d.path))},c=wx(t.allWrites,o,e),u=n||B.EMPTY_NODE;return ai(c,u)}}}function aP(t,e,n){let r=B.EMPTY_NODE;const s=vs(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Se,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=mr(t.visibleWrites,e);return n.forEachChild(Se,(o,c)=>{const u=ai(mr(i,new ae(o)),c);r=r.updateImmediateChild(o,u)}),Bv(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=mr(t.visibleWrites,e);return Bv(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function lP(t,e,n,r,s){U(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=xe(e,n);if(Nh(t.visibleWrites,i))return null;{const o=mr(t.visibleWrites,i);return Ih(o)?s.getChild(n):ai(o,s.getChild(n))}}function cP(t,e,n,r){const s=xe(e,n),i=vs(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=mr(t.visibleWrites,s);return ai(o,r.getNode().getImmediateChild(n))}else return null}function uP(t,e){return vs(t.visibleWrites,e)}function dP(t,e,n,r,s,i,o){let c;const u=mr(t.visibleWrites,e),d=vs(u,se());if(d!=null)c=d;else if(n!=null)c=ai(u,n);else return[];if(c=c.withIndex(o),!c.isEmpty()&&!c.isLeafNode()){const m=[],p=o.getCompare(),f=i?c.getReverseIteratorFrom(r,o):c.getIteratorFrom(r,o);let v=f.getNext();for(;v&&m.length<s;)p(v,r)!==0&&m.push(v),v=f.getNext();return m}else return[]}function hP(){return{visibleWrites:Kt.empty(),allWrites:[],lastWriteId:-1}}function uc(t,e,n,r){return Ex(t.writeTree,t.treePath,e,n,r)}function op(t,e){return aP(t.writeTree,t.treePath,e)}function Wv(t,e,n,r){return lP(t.writeTree,t.treePath,e,n,r)}function dc(t,e){return uP(t.writeTree,xe(t.treePath,e))}function fP(t,e,n,r,s,i){return dP(t.writeTree,t.treePath,e,n,r,s,i)}function ap(t,e,n){return cP(t.writeTree,t.treePath,e,n)}function xx(t,e){return Sx(xe(t.treePath,e),t.writeTree)}function Sx(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;U(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),U(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,Ko(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,qo(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,ii(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,Ko(r,e.snapshotNode,s.oldSnap));else throw pi("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Cx=new mP;class lp{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new xr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ap(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ls(this.viewCache_),i=fP(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(t){return{filter:t}}function vP(t,e){U(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),U(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function yP(t,e,n,r,s){const i=new pP;let o,c;if(n.type===Bt.OVERWRITE){const d=n;d.source.fromUser?o=Th(t,e,d.path,d.snap,r,s,i):(U(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered()&&!J(d.path),o=hc(t,e,d.path,d.snap,r,s,c,i))}else if(n.type===Bt.MERGE){const d=n;d.source.fromUser?o=wP(t,e,d.path,d.children,r,s,i):(U(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered(),o=kh(t,e,d.path,d.children,r,s,c,i))}else if(n.type===Bt.ACK_USER_WRITE){const d=n;d.revert?o=SP(t,e,d.path,r,s,i):o=EP(t,e,d.path,d.affectedTree,r,s,i)}else if(n.type===Bt.LISTEN_COMPLETE)o=xP(t,e,n.path,r,i);else throw pi("Unknown operation type: "+n.type);const u=i.getChanges();return _P(e,o,u),{viewCache:o,changes:u}}function _P(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=cc(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(gx(cc(e)))}}function Nx(t,e,n,r,s,i){const o=e.eventCache;if(dc(r,n)!=null)return e;{let c,u;if(J(n))if(U(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const d=ls(e),m=d instanceof B?d:B.EMPTY_NODE,p=op(r,m);c=t.filter.updateFullNode(e.eventCache.getNode(),p,i)}else{const d=uc(r,ls(e));c=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const d=Q(n);if(d===".priority"){U(Er(n)===1,"Can't have a priority with additional path components");const m=o.getNode();u=e.serverCache.getNode();const p=Wv(r,n,m,u);p!=null?c=t.filter.updatePriority(m,p):c=o.getNode()}else{const m=ue(n);let p;if(o.isCompleteForChild(d)){u=e.serverCache.getNode();const f=Wv(r,n,o.getNode(),u);f!=null?p=o.getNode().getImmediateChild(d).updateChild(m,f):p=o.getNode().getImmediateChild(d)}else p=ap(r,d,e.serverCache);p!=null?c=t.filter.updateChild(o.getNode(),d,p,m,s,i):c=o.getNode()}}return yo(e,c,o.isFullyInitialized()||J(n),t.filter.filtersNodes())}}function hc(t,e,n,r,s,i,o,c){const u=e.serverCache;let d;const m=o?t.filter:t.filter.getIndexedFilter();if(J(n))d=m.updateFullNode(u.getNode(),r,null);else if(m.filtersNodes()&&!u.isFiltered()){const v=u.getNode().updateChild(n,r);d=m.updateFullNode(u.getNode(),v,null)}else{const v=Q(n);if(!u.isCompleteForPath(n)&&Er(n)>1)return e;const w=ue(n),R=u.getNode().getImmediateChild(v).updateChild(w,r);v===".priority"?d=m.updatePriority(u.getNode(),R):d=m.updateChild(u.getNode(),v,R,w,Cx,null)}const p=yx(e,d,u.isFullyInitialized()||J(n),m.filtersNodes()),f=new lp(s,p,i);return Nx(t,p,n,s,f,c)}function Th(t,e,n,r,s,i,o){const c=e.eventCache;let u,d;const m=new lp(s,e,i);if(J(n))d=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=yo(e,d,!0,t.filter.filtersNodes());else{const p=Q(n);if(p===".priority")d=t.filter.updatePriority(e.eventCache.getNode(),r),u=yo(e,d,c.isFullyInitialized(),c.isFiltered());else{const f=ue(n),v=c.getNode().getImmediateChild(p);let w;if(J(f))w=r;else{const T=m.getCompleteChild(p);T!=null?Xf(f)===".priority"&&T.getChild(cx(f)).isEmpty()?w=T:w=T.updateChild(f,r):w=B.EMPTY_NODE}if(v.equals(w))u=e;else{const T=t.filter.updateChild(c.getNode(),p,w,f,m,o);u=yo(e,T,c.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function Gv(t,e){return t.eventCache.isCompleteForChild(e)}function wP(t,e,n,r,s,i,o){let c=e;return r.foreach((u,d)=>{const m=xe(n,u);Gv(e,Q(m))&&(c=Th(t,c,m,d,s,i,o))}),r.foreach((u,d)=>{const m=xe(n,u);Gv(e,Q(m))||(c=Th(t,c,m,d,s,i,o))}),c}function qv(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function kh(t,e,n,r,s,i,o,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,d;J(n)?d=r:d=new ce(null).setTree(n,r);const m=e.serverCache.getNode();return d.children.inorderTraversal((p,f)=>{if(m.hasChild(p)){const v=e.serverCache.getNode().getImmediateChild(p),w=qv(t,v,f);u=hc(t,u,new ae(p),w,s,i,o,c)}}),d.children.inorderTraversal((p,f)=>{const v=!e.serverCache.isCompleteForChild(p)&&f.value===null;if(!m.hasChild(p)&&!v){const w=e.serverCache.getNode().getImmediateChild(p),T=qv(t,w,f);u=hc(t,u,new ae(p),T,s,i,o,c)}}),u}function EP(t,e,n,r,s,i,o){if(dc(s,n)!=null)return e;const c=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(J(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return hc(t,e,n,u.getNode().getChild(n),s,i,c,o);if(J(n)){let d=new ce(null);return u.getNode().forEachChild(Ks,(m,p)=>{d=d.set(new ae(m),p)}),kh(t,e,n,d,s,i,c,o)}else return e}else{let d=new ce(null);return r.foreach((m,p)=>{const f=xe(n,m);u.isCompleteForPath(f)&&(d=d.set(m,u.getNode().getChild(f)))}),kh(t,e,n,d,s,i,c,o)}}function xP(t,e,n,r,s){const i=e.serverCache,o=yx(e,i.getNode(),i.isFullyInitialized()||J(n),i.isFiltered());return Nx(t,o,n,r,Cx,s)}function SP(t,e,n,r,s,i){let o;if(dc(r,n)!=null)return e;{const c=new lp(r,e,s),u=e.eventCache.getNode();let d;if(J(n)||Q(n)===".priority"){let m;if(e.serverCache.isFullyInitialized())m=uc(r,ls(e));else{const p=e.serverCache.getNode();U(p instanceof B,"serverChildren would be complete if leaf node"),m=op(r,p)}m=m,d=t.filter.updateFullNode(u,m,i)}else{const m=Q(n);let p=ap(r,m,e.serverCache);p==null&&e.serverCache.isCompleteForChild(m)&&(p=u.getImmediateChild(m)),p!=null?d=t.filter.updateChild(u,m,p,ue(n),c,i):e.eventCache.getNode().hasChild(m)?d=t.filter.updateChild(u,m,B.EMPTY_NODE,ue(n),c,i):d=u,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=uc(r,ls(e)),o.isLeafNode()&&(d=t.filter.updateFullNode(d,o,i)))}return o=e.serverCache.isFullyInitialized()||dc(r,se())!=null,yo(e,d,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new tp(r.getIndex()),i=zj(r);this.processor_=gP(i);const o=n.serverCache,c=n.eventCache,u=s.updateFullNode(B.EMPTY_NODE,o.getNode(),null),d=i.updateFullNode(B.EMPTY_NODE,c.getNode(),null),m=new xr(u,o.isFullyInitialized(),s.filtersNodes()),p=new xr(d,c.isFullyInitialized(),i.filtersNodes());this.viewCache_=Gc(p,m),this.eventGenerator_=new Yj(this.query_)}get query(){return this.query_}}function NP(t){return t.viewCache_.serverCache.getNode()}function IP(t){return cc(t.viewCache_)}function TP(t,e){const n=ls(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!J(e)&&!n.getImmediateChild(Q(e)).isEmpty())?n.getChild(e):null}function Kv(t){return t.eventRegistrations_.length===0}function kP(t,e){t.eventRegistrations_.push(e)}function Yv(t,e,n){const r=[];if(n){U(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Qv(t,e,n,r){e.type===Bt.MERGE&&e.source.queryId!==null&&(U(ls(t.viewCache_),"We should always have a full cache before handling merges"),U(cc(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=yP(t.processor_,s,e,n,r);return vP(t.processor_,i.viewCache),U(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,Ix(t,i.changes,i.viewCache.eventCache.getNode(),null)}function jP(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Se,(i,o)=>{r.push(ii(i,o))}),n.isFullyInitialized()&&r.push(gx(n.getNode())),Ix(t,r,n.getNode(),e)}function Ix(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return Qj(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc;class Tx{constructor(){this.views=new Map}}function PP(t){U(!fc,"__referenceConstructor has already been defined"),fc=t}function RP(){return U(fc,"Reference.ts has not been loaded"),fc}function AP(t){return t.views.size===0}function cp(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return U(i!=null,"SyncTree gave us an op for an invalid query."),Qv(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(Qv(o,e,n,r));return i}}function kx(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let c=uc(n,s?r:null),u=!1;c?u=!0:r instanceof B?(c=op(n,r),u=!1):(c=B.EMPTY_NODE,u=!1);const d=Gc(new xr(c,u,!1),new xr(r,s,!1));return new CP(e,d)}return o}function bP(t,e,n,r,s,i){const o=kx(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),kP(o,n),jP(o,n)}function OP(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const c=Sr(t);if(s==="default")for(const[u,d]of t.views.entries())o=o.concat(Yv(d,n,r)),Kv(d)&&(t.views.delete(u),d.query._queryParams.loadsAllData()||i.push(d.query));else{const u=t.views.get(s);u&&(o=o.concat(Yv(u,n,r)),Kv(u)&&(t.views.delete(s),u.query._queryParams.loadsAllData()||i.push(u.query)))}return c&&!Sr(t)&&i.push(new(RP())(e._repo,e._path)),{removed:i,events:o}}function jx(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function gr(t,e){let n=null;for(const r of t.views.values())n=n||TP(r,e);return n}function Px(t,e){if(e._queryParams.loadsAllData())return Kc(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Rx(t,e){return Px(t,e)!=null}function Sr(t){return Kc(t)!=null}function Kc(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pc;function DP(t){U(!pc,"__referenceConstructor has already been defined"),pc=t}function LP(){return U(pc,"Reference.ts has not been loaded"),pc}let MP=1;class Xv{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ce(null),this.pendingWriteTree_=hP(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ax(t,e,n,r,s){return eP(t.pendingWriteTree_,e,n,r,s),s?yi(t,new as(rp(),e,n)):[]}function FP(t,e,n,r){tP(t.pendingWriteTree_,e,n,r);const s=ce.fromObject(n);return yi(t,new oi(rp(),e,s))}function sr(t,e,n=!1){const r=nP(t.pendingWriteTree_,e);if(rP(t.pendingWriteTree_,e)){let i=new ce(null);return r.snap!=null?i=i.set(se(),!0):qe(r.children,o=>{i=i.set(new ae(o),!0)}),yi(t,new lc(r.path,i,n))}else return[]}function va(t,e,n){return yi(t,new as(sp(),e,n))}function UP(t,e,n){const r=ce.fromObject(n);return yi(t,new oi(sp(),e,r))}function $P(t,e){return yi(t,new Qo(sp(),e))}function VP(t,e,n){const r=dp(t,n);if(r){const s=hp(r),i=s.path,o=s.queryId,c=rt(i,e),u=new Qo(ip(o),c);return fp(t,i,u)}else return[]}function mc(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let c=[];if(o&&(e._queryIdentifier==="default"||Rx(o,e))){const u=OP(o,e,n,r);AP(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const d=u.removed;if(c=u.events,!s){const m=d.findIndex(f=>f._queryParams.loadsAllData())!==-1,p=t.syncPointTree_.findOnPath(i,(f,v)=>Sr(v));if(m&&!p){const f=t.syncPointTree_.subtree(i);if(!f.isEmpty()){const v=BP(f);for(let w=0;w<v.length;++w){const T=v[w],R=T.query,E=Lx(t,T);t.listenProvider_.startListening(wo(R),Xo(t,R),E.hashFn,E.onComplete)}}}!p&&d.length>0&&!r&&(m?t.listenProvider_.stopListening(wo(e),null):d.forEach(f=>{const v=t.queryToTagMap.get(Yc(f));t.listenProvider_.stopListening(wo(f),v)}))}WP(t,d)}return c}function bx(t,e,n,r){const s=dp(t,r);if(s!=null){const i=hp(s),o=i.path,c=i.queryId,u=rt(o,e),d=new as(ip(c),u,n);return fp(t,o,d)}else return[]}function zP(t,e,n,r){const s=dp(t,r);if(s){const i=hp(s),o=i.path,c=i.queryId,u=rt(o,e),d=ce.fromObject(n),m=new oi(ip(c),u,d);return fp(t,o,m)}else return[]}function jh(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(f,v)=>{const w=rt(f,s);i=i||gr(v,w),o=o||Sr(v)});let c=t.syncPointTree_.get(s);c?(o=o||Sr(c),i=i||gr(c,se())):(c=new Tx,t.syncPointTree_=t.syncPointTree_.set(s,c));let u;i!=null?u=!0:(u=!1,i=B.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((v,w)=>{const T=gr(w,se());T&&(i=i.updateImmediateChild(v,T))}));const d=Rx(c,e);if(!d&&!e._queryParams.loadsAllData()){const f=Yc(e);U(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const v=GP();t.queryToTagMap.set(f,v),t.tagToQueryMap.set(v,f)}const m=qc(t.pendingWriteTree_,s);let p=bP(c,e,n,m,i,u);if(!d&&!o&&!r){const f=Px(c,e);p=p.concat(qP(t,e,f))}return p}function up(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,c)=>{const u=rt(o,e),d=gr(c,u);if(d)return d});return Ex(s,e,i,n,!0)}function HP(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(d,m)=>{const p=rt(d,n);r=r||gr(m,p)});let s=t.syncPointTree_.get(n);s?r=r||gr(s,se()):(s=new Tx,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new xr(r,!0,!1):null,c=qc(t.pendingWriteTree_,e._path),u=kx(s,e,c,i?o.getNode():B.EMPTY_NODE,i);return IP(u)}function yi(t,e){return Ox(e,t.syncPointTree_,null,qc(t.pendingWriteTree_,se()))}function Ox(t,e,n,r){if(J(t.path))return Dx(t,e,n,r);{const s=e.get(se());n==null&&s!=null&&(n=gr(s,se()));let i=[];const o=Q(t.path),c=t.operationForChild(o),u=e.children.get(o);if(u&&c){const d=n?n.getImmediateChild(o):null,m=xx(r,o);i=i.concat(Ox(c,u,d,m))}return s&&(i=i.concat(cp(s,t,r,n))),i}}function Dx(t,e,n,r){const s=e.get(se());n==null&&s!=null&&(n=gr(s,se()));let i=[];return e.children.inorderTraversal((o,c)=>{const u=n?n.getImmediateChild(o):null,d=xx(r,o),m=t.operationForChild(o);m&&(i=i.concat(Dx(m,c,u,d)))}),s&&(i=i.concat(cp(s,t,r,n))),i}function Lx(t,e){const n=e.query,r=Xo(t,n);return{hashFn:()=>(NP(e)||B.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?VP(t,n._path,r):$P(t,n._path);{const i=$k(s,n);return mc(t,n,null,i)}}}}function Xo(t,e){const n=Yc(e);return t.queryToTagMap.get(n)}function Yc(t){return t._path.toString()+"$"+t._queryIdentifier}function dp(t,e){return t.tagToQueryMap.get(e)}function hp(t){const e=t.indexOf("$");return U(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ae(t.substr(0,e))}}function fp(t,e,n){const r=t.syncPointTree_.get(e);U(r,"Missing sync point for query tag that we're tracking");const s=qc(t.pendingWriteTree_,e);return cp(r,n,s,null)}function BP(t){return t.fold((e,n,r)=>{if(n&&Sr(n))return[Kc(n)];{let s=[];return n&&(s=jx(n)),qe(r,(i,o)=>{s=s.concat(o)}),s}})}function wo(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(LP())(t._repo,t._path):t}function WP(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Yc(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function GP(){return MP++}function qP(t,e,n){const r=e._path,s=Xo(t,e),i=Lx(t,n),o=t.listenProvider_.startListening(wo(e),s,i.hashFn,i.onComplete),c=t.syncPointTree_.subtree(r);if(s)U(!Sr(c.value),"If we're adding a query, it shouldn't be shadowed");else{const u=c.fold((d,m,p)=>{if(!J(d)&&m&&Sr(m))return[Kc(m).query];{let f=[];return m&&(f=f.concat(jx(m).map(v=>v.query))),qe(p,(v,w)=>{f=f.concat(w)}),f}});for(let d=0;d<u.length;++d){const m=u[d];t.listenProvider_.stopListening(wo(m),Xo(t,m))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new pp(n)}node(){return this.node_}}class mp{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=xe(this.path_,e);return new mp(this.syncTree_,n)}node(){return up(this.syncTree_,this.path_)}}const KP=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Jv=function(t,e,n){if(!t||typeof t!="object")return t;if(U(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return YP(t[".sv"],e,n);if(typeof t[".sv"]=="object")return QP(t[".sv"],e);U(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},YP=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:U(!1,"Unexpected server value: "+t)}},QP=function(t,e,n){t.hasOwnProperty("increment")||U(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&U(!1,"Unexpected increment value: "+r);const s=e.node();if(U(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},Mx=function(t,e,n,r){return gp(e,new mp(n,t),r)},Fx=function(t,e,n){return gp(t,new pp(e),n)};function gp(t,e,n){const r=t.getPriority().val(),s=Jv(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,c=Jv(o.getValue(),e,n);return c!==o.getValue()||s!==o.getPriority().val()?new Fe(c,be(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Fe(s))),o.forEachChild(Se,(c,u)=>{const d=gp(u,e.getImmediateChild(c),n);d!==u&&(i=i.updateImmediateChild(c,d))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function yp(t,e){let n=e instanceof ae?e:new ae(e),r=t,s=Q(n);for(;s!==null;){const i=ri(r.node.children,s)||{children:{},childCount:0};r=new vp(s,r,i),n=ue(n),s=Q(n)}return r}function _i(t){return t.node.value}function Ux(t,e){t.node.value=e,Ph(t)}function $x(t){return t.node.childCount>0}function XP(t){return _i(t)===void 0&&!$x(t)}function Qc(t,e){qe(t.node.children,(n,r)=>{e(new vp(n,t,r))})}function Vx(t,e,n,r){n&&e(t),Qc(t,s=>{Vx(s,e,!0)})}function JP(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ya(t){return new ae(t.parent===null?t.name:ya(t.parent)+"/"+t.name)}function Ph(t){t.parent!==null&&ZP(t.parent,t.name,t)}function ZP(t,e,n){const r=XP(n),s=fn(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,Ph(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,Ph(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=/[\[\].#$\/\u0000-\u001F\u007F]/,tR=/[\[\].#$\u0000-\u001F\u007F]/,dd=10*1024*1024,_p=function(t){return typeof t=="string"&&t.length!==0&&!eR.test(t)},zx=function(t){return typeof t=="string"&&t.length!==0&&!tR.test(t)},nR=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),zx(t)},rR=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Gf(t)||t&&typeof t=="object"&&fn(t,".sv")},Hx=function(t,e,n,r){r&&e===void 0||Xc(Fc(t,"value"),e,n)},Xc=function(t,e,n){const r=n instanceof ae?new wj(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Vr(r));if(typeof e=="function")throw new Error(t+"contains a function "+Vr(r)+" with contents = "+e.toString());if(Gf(e))throw new Error(t+"contains "+e.toString()+" "+Vr(r));if(typeof e=="string"&&e.length>dd/3&&Uc(e)>dd)throw new Error(t+"contains a string greater than "+dd+" utf8 bytes "+Vr(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(qe(e,(o,c)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!_p(o)))throw new Error(t+" contains an invalid key ("+o+") "+Vr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Ej(r,o),Xc(t,c,r),xj(r)}),s&&i)throw new Error(t+' contains ".value" child '+Vr(r)+" in addition to actual children.")}},sR=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=Go(r);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!_p(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(_j);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&kt(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},iR=function(t,e,n,r){const s=Fc(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];qe(e,(o,c)=>{const u=new ae(o);if(Xc(s,c,xe(n,u)),Xf(u)===".priority"&&!rR(c))throw new Error(s+"contains an invalid value for '"+u.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(u)}),sR(s,i)},Bx=function(t,e,n,r){if(!zx(n))throw new Error(Fc(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},oR=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Bx(t,e,n)},wp=function(t,e){if(Q(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},aR=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!_p(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!nR(n))throw new Error(Fc(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Jc(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!Jf(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function Wx(t,e,n){Jc(t,n),Gx(t,r=>Jf(r,e))}function bt(t,e,n){Jc(t,n),Gx(t,r=>kt(r,e)||kt(e,r))}function Gx(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(cR(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function cR(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();go&&Be("event: "+n.toString()),vi(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR="repo_interrupt",dR=25;class hR{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new lR,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ac(),this.transactionQueueTree_=new vp,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function fR(t,e,n){if(t.stats_=Yf(t.repoInfo_),t.forceRestClient_||Bk())t.server_=new oc(t.repoInfo_,(r,s,i,o)=>{Zv(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>ey(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Oe(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Nn(t.repoInfo_,e,(r,s,i,o)=>{Zv(t,r,s,i,o)},r=>{ey(t,r)},r=>{pR(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Yk(t.repoInfo_,()=>new Kj(t.stats_,t.server_)),t.infoData_=new Hj,t.infoSyncTree_=new Xv({startListening:(r,s,i,o)=>{let c=[];const u=t.infoData_.getNode(r._path);return u.isEmpty()||(c=va(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),c},stopListening:()=>{}}),Ep(t,"connected",!1),t.serverSyncTree_=new Xv({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(c,u)=>{const d=o(c,u);bt(t.eventQueue_,r._path,d)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function qx(t){const n=t.infoData_.getNode(new ae(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Zc(t){return KP({timestamp:qx(t)})}function Zv(t,e,n,r,s){t.dataUpdateCount++;const i=new ae(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const u=Yl(n,d=>be(d));o=zP(t.serverSyncTree_,i,u,s)}else{const u=be(n);o=bx(t.serverSyncTree_,i,u,s)}else if(r){const u=Yl(n,d=>be(d));o=UP(t.serverSyncTree_,i,u)}else{const u=be(n);o=va(t.serverSyncTree_,i,u)}let c=i;o.length>0&&(c=li(t,i)),bt(t.eventQueue_,c,o)}function ey(t,e){Ep(t,"connected",e),e===!1&&yR(t)}function pR(t,e){qe(e,(n,r)=>{Ep(t,n,r)})}function Ep(t,e,n){const r=new ae("/.info/"+e),s=be(n);t.infoData_.updateSnapshot(r,s);const i=va(t.infoSyncTree_,r,s);bt(t.eventQueue_,r,i)}function xp(t){return t.nextWriteId_++}function mR(t,e,n){const r=HP(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=be(s).withIndex(e._queryParams.getIndex());jh(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=va(t.serverSyncTree_,e._path,i);else{const c=Xo(t.serverSyncTree_,e);o=bx(t.serverSyncTree_,e._path,i,c)}return bt(t.eventQueue_,e._path,o),mc(t.serverSyncTree_,e,n,null,!0),i},s=>(_a(t,"get for query "+Oe(e)+" failed: "+s),Promise.reject(new Error(s))))}function gR(t,e,n,r,s){_a(t,"set",{path:e.toString(),value:n,priority:r});const i=Zc(t),o=be(n,r),c=up(t.serverSyncTree_,e),u=Fx(o,c,i),d=xp(t),m=Ax(t.serverSyncTree_,e,u,d,!0);Jc(t.eventQueue_,m),t.server_.put(e.toString(),o.val(!0),(f,v)=>{const w=f==="ok";w||it("set at "+e+" failed: "+f);const T=sr(t.serverSyncTree_,d,!w);bt(t.eventQueue_,e,T),Rh(t,s,f,v)});const p=Cp(t,e);li(t,p),bt(t.eventQueue_,p,[])}function vR(t,e,n,r){_a(t,"update",{path:e.toString(),value:n});let s=!0;const i=Zc(t),o={};if(qe(n,(c,u)=>{s=!1,o[c]=Mx(xe(e,c),be(u),t.serverSyncTree_,i)}),s)Be("update() called with empty data.  Don't do anything."),Rh(t,r,"ok",void 0);else{const c=xp(t),u=FP(t.serverSyncTree_,e,o,c);Jc(t.eventQueue_,u),t.server_.merge(e.toString(),n,(d,m)=>{const p=d==="ok";p||it("update at "+e+" failed: "+d);const f=sr(t.serverSyncTree_,c,!p),v=f.length>0?li(t,e):e;bt(t.eventQueue_,v,f),Rh(t,r,d,m)}),qe(n,d=>{const m=Cp(t,xe(e,d));li(t,m)}),bt(t.eventQueue_,e,[])}}function yR(t){_a(t,"onDisconnectEvents");const e=Zc(t),n=ac();Sh(t.onDisconnect_,se(),(s,i)=>{const o=Mx(s,i,t.serverSyncTree_,e);vx(n,s,o)});let r=[];Sh(n,se(),(s,i)=>{r=r.concat(va(t.serverSyncTree_,s,i));const o=Cp(t,s);li(t,o)}),t.onDisconnect_=ac(),bt(t.eventQueue_,se(),r)}function _R(t,e,n){let r;Q(e._path)===".info"?r=jh(t.infoSyncTree_,e,n):r=jh(t.serverSyncTree_,e,n),Wx(t.eventQueue_,e._path,r)}function wR(t,e,n){let r;Q(e._path)===".info"?r=mc(t.infoSyncTree_,e,n):r=mc(t.serverSyncTree_,e,n),Wx(t.eventQueue_,e._path,r)}function ER(t){t.persistentConnection_&&t.persistentConnection_.interrupt(uR)}function _a(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Be(n,...e)}function Rh(t,e,n,r){e&&vi(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function Kx(t,e,n){return up(t.serverSyncTree_,e,n)||B.EMPTY_NODE}function Sp(t,e=t.transactionQueueTree_){if(e||eu(t,e),_i(e)){const n=Qx(t,e);U(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&xR(t,ya(e),n)}else $x(e)&&Qc(e,n=>{Sp(t,n)})}function xR(t,e,n){const r=n.map(d=>d.currentWriteId),s=Kx(t,e,r);let i=s;const o=s.hash();for(let d=0;d<n.length;d++){const m=n[d];U(m.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),m.status=1,m.retryCount++;const p=rt(e,m.path);i=i.updateChild(p,m.currentOutputSnapshotRaw)}const c=i.val(!0),u=e;t.server_.put(u.toString(),c,d=>{_a(t,"transaction put response",{path:u.toString(),status:d});let m=[];if(d==="ok"){const p=[];for(let f=0;f<n.length;f++)n[f].status=2,m=m.concat(sr(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&p.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();eu(t,yp(t.transactionQueueTree_,e)),Sp(t,t.transactionQueueTree_),bt(t.eventQueue_,e,m);for(let f=0;f<p.length;f++)vi(p[f])}else{if(d==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{it("transaction at "+u.toString()+" failed: "+d);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=d}li(t,e)}},o)}function li(t,e){const n=Yx(t,e),r=ya(n),s=Qx(t,n);return SR(t,s,r),r}function SR(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const u=e[c],d=rt(n,u.path);let m=!1,p;if(U(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)m=!0,p=u.abortReason,s=s.concat(sr(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=dR)m=!0,p="maxretry",s=s.concat(sr(t.serverSyncTree_,u.currentWriteId,!0));else{const f=Kx(t,u.path,o);u.currentInputSnapshot=f;const v=e[c].update(f.val());if(v!==void 0){Xc("transaction failed: Data returned ",v,u.path);let w=be(v);typeof v=="object"&&v!=null&&fn(v,".priority")||(w=w.updatePriority(f.getPriority()));const R=u.currentWriteId,E=Zc(t),S=Fx(w,f,E);u.currentOutputSnapshotRaw=w,u.currentOutputSnapshotResolved=S,u.currentWriteId=xp(t),o.splice(o.indexOf(R),1),s=s.concat(Ax(t.serverSyncTree_,u.path,S,u.currentWriteId,u.applyLocally)),s=s.concat(sr(t.serverSyncTree_,R,!0))}else m=!0,p="nodata",s=s.concat(sr(t.serverSyncTree_,u.currentWriteId,!0))}bt(t.eventQueue_,n,s),s=[],m&&(e[c].status=2,function(f){setTimeout(f,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(p==="nodata"?r.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):r.push(()=>e[c].onComplete(new Error(p),!1,null))))}eu(t,t.transactionQueueTree_);for(let c=0;c<r.length;c++)vi(r[c]);Sp(t,t.transactionQueueTree_)}function Yx(t,e){let n,r=t.transactionQueueTree_;for(n=Q(e);n!==null&&_i(r)===void 0;)r=yp(r,n),e=ue(e),n=Q(e);return r}function Qx(t,e){const n=[];return Xx(t,e,n),n.sort((r,s)=>r.order-s.order),n}function Xx(t,e,n){const r=_i(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Qc(e,s=>{Xx(t,s,n)})}function eu(t,e){const n=_i(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,Ux(e,n.length>0?n:void 0)}Qc(e,r=>{eu(t,r)})}function Cp(t,e){const n=ya(Yx(t,e)),r=yp(t.transactionQueueTree_,e);return JP(r,s=>{hd(t,s)}),hd(t,r),Vx(r,s=>{hd(t,s)}),n}function hd(t,e){const n=_i(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(U(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(U(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(sr(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?Ux(e,void 0):n.length=i+1,bt(t.eventQueue_,ya(e),s);for(let o=0;o<r.length;o++)vi(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function NR(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):it(`Invalid query segment '${n}' in query '${t}'`)}return e}const ty=function(t,e){const n=IR(t),r=n.namespace;n.domain==="firebase.com"&&On(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&On("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Dk();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new ex(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new ae(n.pathString)}},IR=function(t){let e="",n="",r="",s="",i="",o=!0,c="https",u=443;if(typeof t=="string"){let d=t.indexOf("//");d>=0&&(c=t.substring(0,d-1),t=t.substring(d+2));let m=t.indexOf("/");m===-1&&(m=t.length);let p=t.indexOf("?");p===-1&&(p=t.length),e=t.substring(0,Math.min(m,p)),m<p&&(s=CR(t.substring(m,p)));const f=NR(t.substring(Math.min(t.length,p)));d=e.indexOf(":"),d>=0?(o=c==="https"||c==="wss",u=parseInt(e.substring(d+1),10)):d=e.length;const v=e.slice(0,d);if(v.toLowerCase()==="localhost")n="localhost";else if(v.split(".").length<=2)n=v;else{const w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),n=e.substring(w+1),i=r}"ns"in f&&(i=f.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:c,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",TR=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let s;const i=new Array(8);for(s=7;s>=0;s--)i[s]=ny.charAt(n%64),n=Math.floor(n/64);U(n===0,"Cannot push at time == 0");let o=i.join("");if(r){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=ny.charAt(e[s]);return U(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Oe(this.snapshot.exportVal())}}class jR{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return U(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return J(this._path)?null:Xf(this._path)}get ref(){return new Fn(this._repo,this._path)}get _queryIdentifier(){const e=Vv(this._queryParams),n=qf(e);return n==="{}"?"default":n}get _queryObject(){return Vv(this._queryParams)}isEqual(e){if(e=Le(e),!(e instanceof Np))return!1;const n=this._repo===e._repo,r=Jf(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+yj(this._path)}}class Fn extends Np{constructor(e,n){super(e,n,new np,!1)}get parent(){const e=cx(this._path);return e===null?null:new Fn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Jo{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ae(e),r=Zo(this.ref,e);return new Jo(this._node.getChild(n),r,Se)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new Jo(s,Zo(this.ref,r),Se)))}hasChild(e){const n=new ae(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function W(t,e){return t=Le(t),t._checkNotDeleted("ref"),e!==void 0?Zo(t._root,e):t._root}function Zo(t,e){return t=Le(t),Q(t._path)===null?oR("child","path",e):Bx("child","path",e),new Fn(t._repo,xe(t._path,e))}function Ip(t,e){t=Le(t),wp("push",t._path),Hx("push",e,t._path,!0);const n=qx(t._repo),r=TR(n),s=Zo(t,r),i=Zo(t,r);let o;return e!=null?o=cs(i,e).then(()=>i):o=Promise.resolve(i),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function Zx(t){return wp("remove",t._path),cs(t,null)}function cs(t,e){t=Le(t),wp("set",t._path),Hx("set",e,t._path,!1);const n=new aa;return gR(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function ze(t,e){iR("update",e,t._path);const n=new aa;return vR(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function eS(t){t=Le(t);const e=new Jx(()=>{}),n=new tu(e);return mR(t._repo,t,n).then(r=>new Jo(r,new Fn(t._repo,t._path),t._queryParams.getIndex()))}class tu{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new kR("value",this,new Jo(e.snapshotNode,new Fn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new jR(this,e,n):null}matches(e){return e instanceof tu?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function PR(t,e,n,r,s){const i=new Jx(n,void 0),o=new tu(i);return _R(t._repo,t,o),()=>wR(t._repo,t,o)}function je(t,e,n,r){return PR(t,"value",e)}PP(Fn);DP(Fn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="FIREBASE_DATABASE_EMULATOR_HOST",Ah={};let AR=!1;function bR(t,e,n,r){const s=e.lastIndexOf(":"),i=e.substring(0,s),o=Mn(i);t.repoInfo_=new ex(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function OR(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||On("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Be("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=ty(i,s),c=o.repoInfo,u;typeof process<"u"&&Sv&&(u=Sv[RR]),u?(i=`http://${u}?ns=${c.namespace}`,o=ty(i,s),c=o.repoInfo):o.repoInfo.secure;const d=new Gk(t.name,t.options,e);aR("Invalid Firebase Database URL",o),J(o.path)||On("Database URL must point to the root of a Firebase Database (not including a child path).");const m=LR(c,t,d,new Wk(t,n));return new MR(m,t)}function DR(t,e){const n=Ah[e];(!n||n[t.key]!==t)&&On(`Database ${e}(${t.repoInfo_}) has already been deleted.`),ER(t),delete n[t.key]}function LR(t,e,n,r){let s=Ah[e.name];s||(s={},Ah[e.name]=s);let i=s[t.toURLString()];return i&&On("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new hR(t,AR,n,r),s[t.toURLString()]=i,i}class MR{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(fR(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fn(this._repo,se())),this._rootInternal}_delete(){return this._rootInternal!==null&&(DR(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&On("Cannot call "+e+" on a deleted database.")}}function FR(t=Vc(),e){const n=ca(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Df("database");r&&UR(n,...r)}return n}function UR(t,e,n,r={}){t=Le(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&_r(r,i.repoInfo_.emulatorOptions))return;On("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&On('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new _l(_l.OWNER);else if(r.mockUserToken){const c=typeof r.mockUserToken=="string"?r.mockUserToken:Xw(r.mockUserToken,t.app.options.projectId);o=new _l(c)}Mn(e)&&(Lc(e),Mc("Database",!0)),bR(i,s,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(t){jk(ps),wr(new Rn("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return OR(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Pt(Cv,Nv,t),Pt(Cv,Nv,"esm2020")}Nn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Nn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};$R();var ry=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tp;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,x){function y(){}y.prototype=x.prototype,N.F=x.prototype,N.prototype=new y,N.prototype.constructor=N,N.D=function(I,P,A){for(var k=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)k[Te-2]=arguments[Te];return x.prototype[P].apply(I,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,x,y){y||(y=0);const I=Array(16);if(typeof x=="string")for(var P=0;P<16;++P)I[P]=x.charCodeAt(y++)|x.charCodeAt(y++)<<8|x.charCodeAt(y++)<<16|x.charCodeAt(y++)<<24;else for(P=0;P<16;++P)I[P]=x[y++]|x[y++]<<8|x[y++]<<16|x[y++]<<24;x=N.g[0],y=N.g[1],P=N.g[2];let A=N.g[3],k;k=x+(A^y&(P^A))+I[0]+3614090360&4294967295,x=y+(k<<7&4294967295|k>>>25),k=A+(P^x&(y^P))+I[1]+3905402710&4294967295,A=x+(k<<12&4294967295|k>>>20),k=P+(y^A&(x^y))+I[2]+606105819&4294967295,P=A+(k<<17&4294967295|k>>>15),k=y+(x^P&(A^x))+I[3]+3250441966&4294967295,y=P+(k<<22&4294967295|k>>>10),k=x+(A^y&(P^A))+I[4]+4118548399&4294967295,x=y+(k<<7&4294967295|k>>>25),k=A+(P^x&(y^P))+I[5]+1200080426&4294967295,A=x+(k<<12&4294967295|k>>>20),k=P+(y^A&(x^y))+I[6]+2821735955&4294967295,P=A+(k<<17&4294967295|k>>>15),k=y+(x^P&(A^x))+I[7]+4249261313&4294967295,y=P+(k<<22&4294967295|k>>>10),k=x+(A^y&(P^A))+I[8]+1770035416&4294967295,x=y+(k<<7&4294967295|k>>>25),k=A+(P^x&(y^P))+I[9]+2336552879&4294967295,A=x+(k<<12&4294967295|k>>>20),k=P+(y^A&(x^y))+I[10]+4294925233&4294967295,P=A+(k<<17&4294967295|k>>>15),k=y+(x^P&(A^x))+I[11]+2304563134&4294967295,y=P+(k<<22&4294967295|k>>>10),k=x+(A^y&(P^A))+I[12]+1804603682&4294967295,x=y+(k<<7&4294967295|k>>>25),k=A+(P^x&(y^P))+I[13]+4254626195&4294967295,A=x+(k<<12&4294967295|k>>>20),k=P+(y^A&(x^y))+I[14]+2792965006&4294967295,P=A+(k<<17&4294967295|k>>>15),k=y+(x^P&(A^x))+I[15]+1236535329&4294967295,y=P+(k<<22&4294967295|k>>>10),k=x+(P^A&(y^P))+I[1]+4129170786&4294967295,x=y+(k<<5&4294967295|k>>>27),k=A+(y^P&(x^y))+I[6]+3225465664&4294967295,A=x+(k<<9&4294967295|k>>>23),k=P+(x^y&(A^x))+I[11]+643717713&4294967295,P=A+(k<<14&4294967295|k>>>18),k=y+(A^x&(P^A))+I[0]+3921069994&4294967295,y=P+(k<<20&4294967295|k>>>12),k=x+(P^A&(y^P))+I[5]+3593408605&4294967295,x=y+(k<<5&4294967295|k>>>27),k=A+(y^P&(x^y))+I[10]+38016083&4294967295,A=x+(k<<9&4294967295|k>>>23),k=P+(x^y&(A^x))+I[15]+3634488961&4294967295,P=A+(k<<14&4294967295|k>>>18),k=y+(A^x&(P^A))+I[4]+3889429448&4294967295,y=P+(k<<20&4294967295|k>>>12),k=x+(P^A&(y^P))+I[9]+568446438&4294967295,x=y+(k<<5&4294967295|k>>>27),k=A+(y^P&(x^y))+I[14]+3275163606&4294967295,A=x+(k<<9&4294967295|k>>>23),k=P+(x^y&(A^x))+I[3]+4107603335&4294967295,P=A+(k<<14&4294967295|k>>>18),k=y+(A^x&(P^A))+I[8]+1163531501&4294967295,y=P+(k<<20&4294967295|k>>>12),k=x+(P^A&(y^P))+I[13]+2850285829&4294967295,x=y+(k<<5&4294967295|k>>>27),k=A+(y^P&(x^y))+I[2]+4243563512&4294967295,A=x+(k<<9&4294967295|k>>>23),k=P+(x^y&(A^x))+I[7]+1735328473&4294967295,P=A+(k<<14&4294967295|k>>>18),k=y+(A^x&(P^A))+I[12]+2368359562&4294967295,y=P+(k<<20&4294967295|k>>>12),k=x+(y^P^A)+I[5]+4294588738&4294967295,x=y+(k<<4&4294967295|k>>>28),k=A+(x^y^P)+I[8]+2272392833&4294967295,A=x+(k<<11&4294967295|k>>>21),k=P+(A^x^y)+I[11]+1839030562&4294967295,P=A+(k<<16&4294967295|k>>>16),k=y+(P^A^x)+I[14]+4259657740&4294967295,y=P+(k<<23&4294967295|k>>>9),k=x+(y^P^A)+I[1]+2763975236&4294967295,x=y+(k<<4&4294967295|k>>>28),k=A+(x^y^P)+I[4]+1272893353&4294967295,A=x+(k<<11&4294967295|k>>>21),k=P+(A^x^y)+I[7]+4139469664&4294967295,P=A+(k<<16&4294967295|k>>>16),k=y+(P^A^x)+I[10]+3200236656&4294967295,y=P+(k<<23&4294967295|k>>>9),k=x+(y^P^A)+I[13]+681279174&4294967295,x=y+(k<<4&4294967295|k>>>28),k=A+(x^y^P)+I[0]+3936430074&4294967295,A=x+(k<<11&4294967295|k>>>21),k=P+(A^x^y)+I[3]+3572445317&4294967295,P=A+(k<<16&4294967295|k>>>16),k=y+(P^A^x)+I[6]+76029189&4294967295,y=P+(k<<23&4294967295|k>>>9),k=x+(y^P^A)+I[9]+3654602809&4294967295,x=y+(k<<4&4294967295|k>>>28),k=A+(x^y^P)+I[12]+3873151461&4294967295,A=x+(k<<11&4294967295|k>>>21),k=P+(A^x^y)+I[15]+530742520&4294967295,P=A+(k<<16&4294967295|k>>>16),k=y+(P^A^x)+I[2]+3299628645&4294967295,y=P+(k<<23&4294967295|k>>>9),k=x+(P^(y|~A))+I[0]+4096336452&4294967295,x=y+(k<<6&4294967295|k>>>26),k=A+(y^(x|~P))+I[7]+1126891415&4294967295,A=x+(k<<10&4294967295|k>>>22),k=P+(x^(A|~y))+I[14]+2878612391&4294967295,P=A+(k<<15&4294967295|k>>>17),k=y+(A^(P|~x))+I[5]+4237533241&4294967295,y=P+(k<<21&4294967295|k>>>11),k=x+(P^(y|~A))+I[12]+1700485571&4294967295,x=y+(k<<6&4294967295|k>>>26),k=A+(y^(x|~P))+I[3]+2399980690&4294967295,A=x+(k<<10&4294967295|k>>>22),k=P+(x^(A|~y))+I[10]+4293915773&4294967295,P=A+(k<<15&4294967295|k>>>17),k=y+(A^(P|~x))+I[1]+2240044497&4294967295,y=P+(k<<21&4294967295|k>>>11),k=x+(P^(y|~A))+I[8]+1873313359&4294967295,x=y+(k<<6&4294967295|k>>>26),k=A+(y^(x|~P))+I[15]+4264355552&4294967295,A=x+(k<<10&4294967295|k>>>22),k=P+(x^(A|~y))+I[6]+2734768916&4294967295,P=A+(k<<15&4294967295|k>>>17),k=y+(A^(P|~x))+I[13]+1309151649&4294967295,y=P+(k<<21&4294967295|k>>>11),k=x+(P^(y|~A))+I[4]+4149444226&4294967295,x=y+(k<<6&4294967295|k>>>26),k=A+(y^(x|~P))+I[11]+3174756917&4294967295,A=x+(k<<10&4294967295|k>>>22),k=P+(x^(A|~y))+I[2]+718787259&4294967295,P=A+(k<<15&4294967295|k>>>17),k=y+(A^(P|~x))+I[9]+3951481745&4294967295,N.g[0]=N.g[0]+x&4294967295,N.g[1]=N.g[1]+(P+(k<<21&4294967295|k>>>11))&4294967295,N.g[2]=N.g[2]+P&4294967295,N.g[3]=N.g[3]+A&4294967295}r.prototype.v=function(N,x){x===void 0&&(x=N.length);const y=x-this.blockSize,I=this.C;let P=this.h,A=0;for(;A<x;){if(P==0)for(;A<=y;)s(this,N,A),A+=this.blockSize;if(typeof N=="string"){for(;A<x;)if(I[P++]=N.charCodeAt(A++),P==this.blockSize){s(this,I),P=0;break}}else for(;A<x;)if(I[P++]=N[A++],P==this.blockSize){s(this,I),P=0;break}}this.h=P,this.o+=x},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var x=1;x<N.length-8;++x)N[x]=0;x=this.o*8;for(var y=N.length-8;y<N.length;++y)N[y]=x&255,x/=256;for(this.v(N),N=Array(16),x=0,y=0;y<4;++y)for(let I=0;I<32;I+=8)N[x++]=this.g[y]>>>I&255;return N};function i(N,x){var y=c;return Object.prototype.hasOwnProperty.call(y,N)?y[N]:y[N]=x(N)}function o(N,x){this.h=x;const y=[];let I=!0;for(let P=N.length-1;P>=0;P--){const A=N[P]|0;I&&A==x||(y[P]=A,I=!1)}this.g=y}var c={};function u(N){return-128<=N&&N<128?i(N,function(x){return new o([x|0],x<0?-1:0)}):new o([N|0],N<0?-1:0)}function d(N){if(isNaN(N)||!isFinite(N))return p;if(N<0)return R(d(-N));const x=[];let y=1;for(let I=0;N>=y;I++)x[I]=N/y|0,y*=4294967296;return new o(x,0)}function m(N,x){if(N.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(N.charAt(0)=="-")return R(m(N.substring(1),x));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const y=d(Math.pow(x,8));let I=p;for(let A=0;A<N.length;A+=8){var P=Math.min(8,N.length-A);const k=parseInt(N.substring(A,A+P),x);P<8?(P=d(Math.pow(x,P)),I=I.j(P).add(d(k))):(I=I.j(y),I=I.add(d(k)))}return I}var p=u(0),f=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(T(this))return-R(this).m();let N=0,x=1;for(let y=0;y<this.g.length;y++){const I=this.i(y);N+=(I>=0?I:4294967296+I)*x,x*=4294967296}return N},t.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(w(this))return"0";if(T(this))return"-"+R(this).toString(N);const x=d(Math.pow(N,6));var y=this;let I="";for(;;){const P=O(y,x).g;y=E(y,P.j(x));let A=((y.g.length>0?y.g[0]:y.h)>>>0).toString(N);if(y=P,w(y))return A+I;for(;A.length<6;)A="0"+A;I=A+I}},t.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function w(N){if(N.h!=0)return!1;for(let x=0;x<N.g.length;x++)if(N.g[x]!=0)return!1;return!0}function T(N){return N.h==-1}t.l=function(N){return N=E(this,N),T(N)?-1:w(N)?0:1};function R(N){const x=N.g.length,y=[];for(let I=0;I<x;I++)y[I]=~N.g[I];return new o(y,~N.h).add(f)}t.abs=function(){return T(this)?R(this):this},t.add=function(N){const x=Math.max(this.g.length,N.g.length),y=[];let I=0;for(let P=0;P<=x;P++){let A=I+(this.i(P)&65535)+(N.i(P)&65535),k=(A>>>16)+(this.i(P)>>>16)+(N.i(P)>>>16);I=k>>>16,A&=65535,k&=65535,y[P]=k<<16|A}return new o(y,y[y.length-1]&-2147483648?-1:0)};function E(N,x){return N.add(R(x))}t.j=function(N){if(w(this)||w(N))return p;if(T(this))return T(N)?R(this).j(R(N)):R(R(this).j(N));if(T(N))return R(this.j(R(N)));if(this.l(v)<0&&N.l(v)<0)return d(this.m()*N.m());const x=this.g.length+N.g.length,y=[];for(var I=0;I<2*x;I++)y[I]=0;for(I=0;I<this.g.length;I++)for(let P=0;P<N.g.length;P++){const A=this.i(I)>>>16,k=this.i(I)&65535,Te=N.i(P)>>>16,Ot=N.i(P)&65535;y[2*I+2*P]+=k*Ot,S(y,2*I+2*P),y[2*I+2*P+1]+=A*Ot,S(y,2*I+2*P+1),y[2*I+2*P+1]+=k*Te,S(y,2*I+2*P+1),y[2*I+2*P+2]+=A*Te,S(y,2*I+2*P+2)}for(N=0;N<x;N++)y[N]=y[2*N+1]<<16|y[2*N];for(N=x;N<2*x;N++)y[N]=0;return new o(y,0)};function S(N,x){for(;(N[x]&65535)!=N[x];)N[x+1]+=N[x]>>>16,N[x]&=65535,x++}function C(N,x){this.g=N,this.h=x}function O(N,x){if(w(x))throw Error("division by zero");if(w(N))return new C(p,p);if(T(N))return x=O(R(N),x),new C(R(x.g),R(x.h));if(T(x))return x=O(N,R(x)),new C(R(x.g),x.h);if(N.g.length>30){if(T(N)||T(x))throw Error("slowDivide_ only works with positive integers.");for(var y=f,I=x;I.l(N)<=0;)y=L(y),I=L(I);var P=M(y,1),A=M(I,1);for(I=M(I,2),y=M(y,2);!w(I);){var k=A.add(I);k.l(N)<=0&&(P=P.add(y),A=k),I=M(I,1),y=M(y,1)}return x=E(N,P.j(x)),new C(P,x)}for(P=p;N.l(x)>=0;){for(y=Math.max(1,Math.floor(N.m()/x.m())),I=Math.ceil(Math.log(y)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),A=d(y),k=A.j(x);T(k)||k.l(N)>0;)y-=I,A=d(y),k=A.j(x);w(A)&&(A=f),P=P.add(A),N=E(N,k)}return new C(P,N)}t.B=function(N){return O(this,N).h},t.and=function(N){const x=Math.max(this.g.length,N.g.length),y=[];for(let I=0;I<x;I++)y[I]=this.i(I)&N.i(I);return new o(y,this.h&N.h)},t.or=function(N){const x=Math.max(this.g.length,N.g.length),y=[];for(let I=0;I<x;I++)y[I]=this.i(I)|N.i(I);return new o(y,this.h|N.h)},t.xor=function(N){const x=Math.max(this.g.length,N.g.length),y=[];for(let I=0;I<x;I++)y[I]=this.i(I)^N.i(I);return new o(y,this.h^N.h)};function L(N){const x=N.g.length+1,y=[];for(let I=0;I<x;I++)y[I]=N.i(I)<<1|N.i(I-1)>>>31;return new o(y,N.h)}function M(N,x){const y=x>>5;x%=32;const I=N.g.length-y,P=[];for(let A=0;A<I;A++)P[A]=x>0?N.i(A+y)>>>x|N.i(A+y+1)<<32-x:N.i(A+y);return new o(P,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,Tp=o}).apply(typeof ry<"u"?ry:typeof self<"u"?self:typeof window<"u"?window:{});var el=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof el=="object"&&el];for(var h=0;h<l.length;++h){var g=l[h];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var g=r;l=l.split(".");for(var _=0;_<l.length-1;_++){var b=l[_];if(!(b in g))break e;g=g[b]}l=l[l.length-1],_=g[l],h=h(_),h!=_&&h!=null&&e(g,l,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(l){return l||function(h){var g=[],_;for(_ in h)Object.prototype.hasOwnProperty.call(h,_)&&g.push([_,h[_]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function u(l,h,g){return l.call.apply(l.bind,arguments)}function d(l,h,g){return d=u,d.apply(null,arguments)}function m(l,h){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function p(l,h){function g(){}g.prototype=h.prototype,l.Z=h.prototype,l.prototype=new g,l.prototype.constructor=l,l.Ob=function(_,b,D){for(var $=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)$[Y-2]=arguments[Y];return h.prototype[b].apply(_,$)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function v(l){const h=l.length;if(h>0){const g=Array(h);for(let _=0;_<h;_++)g[_]=l[_];return g}return[]}function w(l,h){for(let _=1;_<arguments.length;_++){const b=arguments[_];var g=typeof b;if(g=g!="object"?g:b?Array.isArray(b)?"array":g:"null",g=="array"||g=="object"&&typeof b.length=="number"){g=l.length||0;const D=b.length||0;l.length=g+D;for(let $=0;$<D;$++)l[g+$]=b[$]}else l.push(b)}}class T{constructor(h,g){this.i=h,this.j=g,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function R(l){o.setTimeout(()=>{throw l},0)}function E(){var l=N;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class S{constructor(){this.h=this.g=null}add(h,g){const _=C.get();_.set(h,g),this.h?this.h.next=_:this.g=_,this.h=_}}var C=new T(()=>new O,l=>l.reset());class O{constructor(){this.next=this.g=this.h=null}set(h,g){this.h=h,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let L,M=!1,N=new S,x=()=>{const l=Promise.resolve(void 0);L=()=>{l.then(y)}};function y(){for(var l;l=E();){try{l.h.call(l.g)}catch(g){R(g)}var h=C;h.j(l),h.h<100&&(h.h++,l.next=h.g,h.g=l)}M=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};o.addEventListener("test",g,h),o.removeEventListener("test",g,h)}catch{}return l}();function k(l){return/^[\s\xa0]*$/.test(l)}function Te(l,h){P.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,h)}p(Te,P),Te.prototype.init=function(l,h){const g=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget,h||(g=="mouseover"?h=l.fromElement:g=="mouseout"&&(h=l.toElement)),this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&Te.Z.h.call(this)},Te.prototype.h=function(){Te.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ot="closure_listenable_"+(Math.random()*1e6|0),Dt=0;function Rr(l,h,g,_,b){this.listener=l,this.proxy=null,this.src=h,this.type=g,this.capture=!!_,this.ha=b,this.key=++Dt,this.da=this.fa=!1}function V(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function q(l,h,g){for(const _ in l)h.call(g,l[_],_,l)}function K(l,h){for(const g in l)h.call(void 0,l[g],g,l)}function me(l){const h={};for(const g in l)h[g]=l[g];return h}const Ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ar(l,h){let g,_;for(let b=1;b<arguments.length;b++){_=arguments[b];for(g in _)l[g]=_[g];for(let D=0;D<Ce.length;D++)g=Ce[D],Object.prototype.hasOwnProperty.call(_,g)&&(l[g]=_[g])}}function St(l){this.src=l,this.g={},this.h=0}St.prototype.add=function(l,h,g,_,b){const D=l.toString();l=this.g[D],l||(l=this.g[D]=[],this.h++);const $=Lt(l,h,_,b);return $>-1?(h=l[$],g||(h.fa=!1)):(h=new Rr(h,this.src,D,!!_,b),h.fa=g,l.push(h)),h};function br(l,h){const g=h.type;if(g in l.g){var _=l.g[g],b=Array.prototype.indexOf.call(_,h,void 0),D;(D=b>=0)&&Array.prototype.splice.call(_,b,1),D&&(V(h),l.g[g].length==0&&(delete l.g[g],l.h--))}}function Lt(l,h,g,_){for(let b=0;b<l.length;++b){const D=l[b];if(!D.da&&D.listener==h&&D.capture==!!g&&D.ha==_)return b}return-1}var Un="closure_lm_"+(Math.random()*1e6|0),su={};function zp(l,h,g,_,b){if(Array.isArray(h)){for(let D=0;D<h.length;D++)zp(l,h[D],g,_,b);return null}return g=Wp(g),l&&l[Ot]?l.J(h,g,c(_)?!!_.capture:!1,b):kS(l,h,g,!1,_,b)}function kS(l,h,g,_,b,D){if(!h)throw Error("Invalid event type");const $=c(b)?!!b.capture:!!b;let Y=ou(l);if(Y||(l[Un]=Y=new St(l)),g=Y.add(h,g,_,$,D),g.proxy)return g;if(_=jS(),g.proxy=_,_.src=l,_.listener=g,l.addEventListener)A||(b=$),b===void 0&&(b=!1),l.addEventListener(h.toString(),_,b);else if(l.attachEvent)l.attachEvent(Bp(h.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function jS(){function l(g){return h.call(l.src,l.listener,g)}const h=PS;return l}function Hp(l,h,g,_,b){if(Array.isArray(h))for(var D=0;D<h.length;D++)Hp(l,h[D],g,_,b);else _=c(_)?!!_.capture:!!_,g=Wp(g),l&&l[Ot]?(l=l.i,D=String(h).toString(),D in l.g&&(h=l.g[D],g=Lt(h,g,_,b),g>-1&&(V(h[g]),Array.prototype.splice.call(h,g,1),h.length==0&&(delete l.g[D],l.h--)))):l&&(l=ou(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Lt(h,g,_,b)),(g=l>-1?h[l]:null)&&iu(g))}function iu(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[Ot])br(h.i,l);else{var g=l.type,_=l.proxy;h.removeEventListener?h.removeEventListener(g,_,l.capture):h.detachEvent?h.detachEvent(Bp(g),_):h.addListener&&h.removeListener&&h.removeListener(_),(g=ou(h))?(br(g,l),g.h==0&&(g.src=null,h[Un]=null)):V(l)}}}function Bp(l){return l in su?su[l]:su[l]="on"+l}function PS(l,h){if(l.da)l=!0;else{h=new Te(h,this);const g=l.listener,_=l.ha||l.src;l.fa&&iu(l),l=g.call(_,h)}return l}function ou(l){return l=l[Un],l instanceof St?l:null}var au="__closure_events_fn_"+(Math.random()*1e9>>>0);function Wp(l){return typeof l=="function"?l:(l[au]||(l[au]=function(h){return l.handleEvent(h)}),l[au])}function Ke(){I.call(this),this.i=new St(this),this.M=this,this.G=null}p(Ke,I),Ke.prototype[Ot]=!0,Ke.prototype.removeEventListener=function(l,h,g,_){Hp(this,l,h,g,_)};function Ze(l,h){var g,_=l.G;if(_)for(g=[];_;_=_.G)g.push(_);if(l=l.M,_=h.type||h,typeof h=="string")h=new P(h,l);else if(h instanceof P)h.target=h.target||l;else{var b=h;h=new P(_,l),Ar(h,b)}b=!0;let D,$;if(g)for($=g.length-1;$>=0;$--)D=h.g=g[$],b=Na(D,_,!0,h)&&b;if(D=h.g=l,b=Na(D,_,!0,h)&&b,b=Na(D,_,!1,h)&&b,g)for($=0;$<g.length;$++)D=h.g=g[$],b=Na(D,_,!1,h)&&b}Ke.prototype.N=function(){if(Ke.Z.N.call(this),this.i){var l=this.i;for(const h in l.g){const g=l.g[h];for(let _=0;_<g.length;_++)V(g[_]);delete l.g[h],l.h--}}this.G=null},Ke.prototype.J=function(l,h,g,_){return this.i.add(String(l),h,!1,g,_)},Ke.prototype.K=function(l,h,g,_){return this.i.add(String(l),h,!0,g,_)};function Na(l,h,g,_){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();let b=!0;for(let D=0;D<h.length;++D){const $=h[D];if($&&!$.da&&$.capture==g){const Y=$.listener,Re=$.ha||$.src;$.fa&&br(l.i,$),b=Y.call(Re,_)!==!1&&b}}return b&&!_.defaultPrevented}function RS(l,h){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(l,h||0)}function Gp(l){l.g=RS(()=>{l.g=null,l.i&&(l.i=!1,Gp(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class AS extends I{constructor(h,g){super(),this.m=h,this.l=g,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Gp(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Si(l){I.call(this),this.h=l,this.g={}}p(Si,I);var qp=[];function Kp(l){q(l.g,function(h,g){this.g.hasOwnProperty(g)&&iu(h)},l),l.g={}}Si.prototype.N=function(){Si.Z.N.call(this),Kp(this)},Si.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lu=o.JSON.stringify,bS=o.JSON.parse,OS=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function Yp(){}function DS(){}var Ci={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function cu(){P.call(this,"d")}p(cu,P);function uu(){P.call(this,"c")}p(uu,P);var ys={},Qp=null;function du(){return Qp=Qp||new Ke}ys.Ia="serverreachability";function Xp(l){P.call(this,ys.Ia,l)}p(Xp,P);function Ni(l){const h=du();Ze(h,new Xp(h))}ys.STAT_EVENT="statevent";function Jp(l,h){P.call(this,ys.STAT_EVENT,l),this.stat=h}p(Jp,P);function et(l){const h=du();Ze(h,new Jp(h,l))}ys.Ja="timingevent";function Zp(l,h){P.call(this,ys.Ja,l),this.size=h}p(Zp,P);function Ii(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},h)}function Ti(){this.g=!0}Ti.prototype.ua=function(){this.g=!1};function LS(l,h,g,_,b,D){l.info(function(){if(l.g)if(D){var $="",Y=D.split("&");for(let le=0;le<Y.length;le++){var Re=Y[le].split("=");if(Re.length>1){const Me=Re[0];Re=Re[1];const en=Me.split("_");$=en.length>=2&&en[1]=="type"?$+(Me+"="+Re+"&"):$+(Me+"=redacted&")}}}else $=null;else $=D;return"XMLHTTP REQ ("+_+") [attempt "+b+"]: "+h+`
`+g+`
`+$})}function MS(l,h,g,_,b,D,$){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+b+"]: "+h+`
`+g+`
`+D+" "+$})}function _s(l,h,g,_){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+US(l,g)+(_?" "+_:"")})}function FS(l,h){l.info(function(){return"TIMEOUT: "+h})}Ti.prototype.info=function(){};function US(l,h){if(!l.g)return h;if(!h)return null;try{const D=JSON.parse(h);if(D){for(l=0;l<D.length;l++)if(Array.isArray(D[l])){var g=D[l];if(!(g.length<2)){var _=g[1];if(Array.isArray(_)&&!(_.length<1)){var b=_[0];if(b!="noop"&&b!="stop"&&b!="close")for(let $=1;$<_.length;$++)_[$]=""}}}}return lu(D)}catch{return h}}var hu={NO_ERROR:0,TIMEOUT:8},$S={},em;function fu(){}p(fu,Yp),fu.prototype.g=function(){return new XMLHttpRequest},em=new fu;function ki(l){return encodeURIComponent(String(l))}function VS(l){var h=1;l=l.split(":");const g=[];for(;h>0&&l.length;)g.push(l.shift()),h--;return l.length&&g.push(l.join(":")),g}function $n(l,h,g,_){this.j=l,this.i=h,this.l=g,this.S=_||1,this.V=new Si(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new tm}function tm(){this.i=null,this.g="",this.h=!1}var nm={},pu={};function mu(l,h,g){l.M=1,l.A=Ta(Zt(h)),l.u=g,l.R=!0,rm(l,null)}function rm(l,h){l.F=Date.now(),Ia(l),l.B=Zt(l.A);var g=l.B,_=l.S;Array.isArray(_)||(_=[String(_)]),gm(g.i,"t",_),l.C=0,g=l.j.L,l.h=new tm,l.g=Om(l.j,g?h:null,!l.u),l.P>0&&(l.O=new AS(d(l.Y,l,l.g),l.P)),h=l.V,g=l.g,_=l.ba;var b="readystatechange";Array.isArray(b)||(b&&(qp[0]=b.toString()),b=qp);for(let D=0;D<b.length;D++){const $=zp(g,b[D],_||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=l.J?me(l.J):{},l.u?(l.v||(l.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,h)):(l.v="GET",l.g.ea(l.B,l.v,null,h)),Ni(),LS(l.i,l.v,l.B,l.l,l.S,l.u)}$n.prototype.ba=function(l){l=l.target;const h=this.O;h&&Hn(l)==3?h.j():this.Y(l)},$n.prototype.Y=function(l){try{if(l==this.g)e:{const Y=Hn(this.g),Re=this.g.ya(),le=this.g.ca();if(!(Y<3)&&(Y!=3||this.g&&(this.h.h||this.g.la()||Sm(this.g)))){this.K||Y!=4||Re==7||(Re==8||le<=0?Ni(3):Ni(2)),gu(this);var h=this.g.ca();this.X=h;var g=zS(this);if(this.o=h==200,MS(this.i,this.v,this.B,this.l,this.S,Y,h),this.o){if(this.U&&!this.L){t:{if(this.g){var _,b=this.g;if((_=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(_)){var D=_;break t}}D=null}if(l=D)_s(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,vu(this,l);else{this.o=!1,this.m=3,et(12),Or(this),ji(this);break e}}if(this.R){l=!0;let Me;for(;!this.K&&this.C<g.length;)if(Me=HS(this,g),Me==pu){Y==4&&(this.m=4,et(14),l=!1),_s(this.i,this.l,null,"[Incomplete Response]");break}else if(Me==nm){this.m=4,et(15),_s(this.i,this.l,g,"[Invalid Chunk]"),l=!1;break}else _s(this.i,this.l,Me,null),vu(this,Me);if(sm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Y!=4||g.length!=0||this.h.h||(this.m=1,et(16),l=!1),this.o=this.o&&l,!l)_s(this.i,this.l,g,"[Invalid Chunked Response]"),Or(this),ji(this);else if(g.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Nu($),$.P=!0,et(11))}}else _s(this.i,this.l,g,null),vu(this,g);Y==4&&Or(this),this.o&&!this.K&&(Y==4?Pm(this.j,this):(this.o=!1,Ia(this)))}else rC(this.g),h==400&&g.indexOf("Unknown SID")>0?(this.m=3,et(12)):(this.m=0,et(13)),Or(this),ji(this)}}}catch{}finally{}};function zS(l){if(!sm(l))return l.g.la();const h=Sm(l.g);if(h==="")return"";let g="";const _=h.length,b=Hn(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return Or(l),ji(l),"";l.h.i=new o.TextDecoder}for(let D=0;D<_;D++)l.h.h=!0,g+=l.h.i.decode(h[D],{stream:!(b&&D==_-1)});return h.length=0,l.h.g+=g,l.C=0,l.h.g}function sm(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function HS(l,h){var g=l.C,_=h.indexOf(`
`,g);return _==-1?pu:(g=Number(h.substring(g,_)),isNaN(g)?nm:(_+=1,_+g>h.length?pu:(h=h.slice(_,_+g),l.C=_+g,h)))}$n.prototype.cancel=function(){this.K=!0,Or(this)};function Ia(l){l.T=Date.now()+l.H,im(l,l.H)}function im(l,h){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Ii(d(l.aa,l),h)}function gu(l){l.D&&(o.clearTimeout(l.D),l.D=null)}$n.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(FS(this.i,this.B),this.M!=2&&(Ni(),et(17)),Or(this),this.m=2,ji(this)):im(this,this.T-l)};function ji(l){l.j.I==0||l.K||Pm(l.j,l)}function Or(l){gu(l);var h=l.O;h&&typeof h.dispose=="function"&&h.dispose(),l.O=null,Kp(l.V),l.g&&(h=l.g,l.g=null,h.abort(),h.dispose())}function vu(l,h){try{var g=l.j;if(g.I!=0&&(g.g==l||yu(g.h,l))){if(!l.L&&yu(g.h,l)&&g.I==3){try{var _=g.Ba.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var b=_;if(b[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<l.F)Aa(g),Pa(g);else break e;Cu(g),et(18)}}else g.xa=b[1],0<g.xa-g.K&&b[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=Ii(d(g.Va,g),6e3));lm(g.h)<=1&&g.ta&&(g.ta=void 0)}else Lr(g,11)}else if((l.L||g.g==l)&&Aa(g),!k(h))for(b=g.Ba.g.parse(h),h=0;h<b.length;h++){let le=b[h];const Me=le[0];if(!(Me<=g.K))if(g.K=Me,le=le[1],g.I==2)if(le[0]=="c"){g.M=le[1],g.ba=le[2];const en=le[3];en!=null&&(g.ka=en,g.j.info("VER="+g.ka));const Mr=le[4];Mr!=null&&(g.za=Mr,g.j.info("SVER="+g.za));const Bn=le[5];Bn!=null&&typeof Bn=="number"&&Bn>0&&(_=1.5*Bn,g.O=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;const Wn=l.g;if(Wn){const ba=Wn.g?Wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ba){var D=_.h;D.g||ba.indexOf("spdy")==-1&&ba.indexOf("quic")==-1&&ba.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(_u(D,D.h),D.h=null))}if(_.G){const Iu=Wn.g?Wn.g.getResponseHeader("X-HTTP-Session-Id"):null;Iu&&(_.wa=Iu,he(_.J,_.G,Iu))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-l.F,g.j.info("Handshake RTT: "+g.T+"ms")),_=g;var $=l;if(_.na=bm(_,_.L?_.ba:null,_.W),$.L){cm(_.h,$);var Y=$,Re=_.O;Re&&(Y.H=Re),Y.D&&(gu(Y),Ia(Y)),_.g=$}else km(_);g.i.length>0&&Ra(g)}else le[0]!="stop"&&le[0]!="close"||Lr(g,7);else g.I==3&&(le[0]=="stop"||le[0]=="close"?le[0]=="stop"?Lr(g,7):Su(g):le[0]!="noop"&&g.l&&g.l.qa(le),g.A=0)}}Ni(4)}catch{}}var BS=class{constructor(l,h){this.g=l,this.map=h}};function om(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function am(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function lm(l){return l.h?1:l.g?l.g.size:0}function yu(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function _u(l,h){l.g?l.g.add(h):l.h=h}function cm(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}om.prototype.cancel=function(){if(this.i=um(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function um(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const g of l.g.values())h=h.concat(g.G);return h}return v(l.i)}var dm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function WS(l,h){if(l){l=l.split("&");for(let g=0;g<l.length;g++){const _=l[g].indexOf("=");let b,D=null;_>=0?(b=l[g].substring(0,_),D=l[g].substring(_+1)):b=l[g],h(b,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Vn(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;l instanceof Vn?(this.l=l.l,Pi(this,l.j),this.o=l.o,this.g=l.g,Ri(this,l.u),this.h=l.h,wu(this,vm(l.i)),this.m=l.m):l&&(h=String(l).match(dm))?(this.l=!1,Pi(this,h[1]||"",!0),this.o=Ai(h[2]||""),this.g=Ai(h[3]||"",!0),Ri(this,h[4]),this.h=Ai(h[5]||"",!0),wu(this,h[6]||"",!0),this.m=Ai(h[7]||"")):(this.l=!1,this.i=new Oi(null,this.l))}Vn.prototype.toString=function(){const l=[];var h=this.j;h&&l.push(bi(h,hm,!0),":");var g=this.g;return(g||h=="file")&&(l.push("//"),(h=this.o)&&l.push(bi(h,hm,!0),"@"),l.push(ki(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&l.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(bi(g,g.charAt(0)=="/"?KS:qS,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",bi(g,QS)),l.join("")},Vn.prototype.resolve=function(l){const h=Zt(this);let g=!!l.j;g?Pi(h,l.j):g=!!l.o,g?h.o=l.o:g=!!l.g,g?h.g=l.g:g=l.u!=null;var _=l.h;if(g)Ri(h,l.u);else if(g=!!l.h){if(_.charAt(0)!="/")if(this.g&&!this.h)_="/"+_;else{var b=h.h.lastIndexOf("/");b!=-1&&(_=h.h.slice(0,b+1)+_)}if(b=_,b==".."||b==".")_="";else if(b.indexOf("./")!=-1||b.indexOf("/.")!=-1){_=b.lastIndexOf("/",0)==0,b=b.split("/");const D=[];for(let $=0;$<b.length;){const Y=b[$++];Y=="."?_&&$==b.length&&D.push(""):Y==".."?((D.length>1||D.length==1&&D[0]!="")&&D.pop(),_&&$==b.length&&D.push("")):(D.push(Y),_=!0)}_=D.join("/")}else _=b}return g?h.h=_:g=l.i.toString()!=="",g?wu(h,vm(l.i)):g=!!l.m,g&&(h.m=l.m),h};function Zt(l){return new Vn(l)}function Pi(l,h,g){l.j=g?Ai(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Ri(l,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);l.u=h}else l.u=null}function wu(l,h,g){h instanceof Oi?(l.i=h,XS(l.i,l.l)):(g||(h=bi(h,YS)),l.i=new Oi(h,l.l))}function he(l,h,g){l.i.set(h,g)}function Ta(l){return he(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Ai(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function bi(l,h,g){return typeof l=="string"?(l=encodeURI(l).replace(h,GS),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function GS(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var hm=/[#\/\?@]/g,qS=/[#\?:]/g,KS=/[#\?]/g,YS=/[#\?@]/g,QS=/#/g;function Oi(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Dr(l){l.g||(l.g=new Map,l.h=0,l.i&&WS(l.i,function(h,g){l.add(decodeURIComponent(h.replace(/\+/g," ")),g)}))}t=Oi.prototype,t.add=function(l,h){Dr(this),this.i=null,l=ws(this,l);let g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(h),this.h+=1,this};function fm(l,h){Dr(l),h=ws(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function pm(l,h){return Dr(l),h=ws(l,h),l.g.has(h)}t.forEach=function(l,h){Dr(this),this.g.forEach(function(g,_){g.forEach(function(b){l.call(h,b,_,this)},this)},this)};function mm(l,h){Dr(l);let g=[];if(typeof h=="string")pm(l,h)&&(g=g.concat(l.g.get(ws(l,h))));else for(l=Array.from(l.g.values()),h=0;h<l.length;h++)g=g.concat(l[h]);return g}t.set=function(l,h){return Dr(this),this.i=null,l=ws(this,l),pm(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=mm(this,l),l.length>0?String(l[0]):h):h};function gm(l,h,g){fm(l,h),g.length>0&&(l.i=null,l.g.set(ws(l,h),v(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(let _=0;_<h.length;_++){var g=h[_];const b=ki(g);g=mm(this,g);for(let D=0;D<g.length;D++){let $=b;g[D]!==""&&($+="="+ki(g[D])),l.push($)}}return this.i=l.join("&")};function vm(l){const h=new Oi;return h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),h}function ws(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function XS(l,h){h&&!l.j&&(Dr(l),l.i=null,l.g.forEach(function(g,_){const b=_.toLowerCase();_!=b&&(fm(this,_),gm(this,b,g))},l)),l.j=h}function JS(l,h){const g=new Ti;if(o.Image){const _=new Image;_.onload=m(zn,g,"TestLoadImage: loaded",!0,h,_),_.onerror=m(zn,g,"TestLoadImage: error",!1,h,_),_.onabort=m(zn,g,"TestLoadImage: abort",!1,h,_),_.ontimeout=m(zn,g,"TestLoadImage: timeout",!1,h,_),o.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else h(!1)}function ZS(l,h){const g=new Ti,_=new AbortController,b=setTimeout(()=>{_.abort(),zn(g,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:_.signal}).then(D=>{clearTimeout(b),D.ok?zn(g,"TestPingServer: ok",!0,h):zn(g,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(b),zn(g,"TestPingServer: error",!1,h)})}function zn(l,h,g,_,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),_(g)}catch{}}function eC(){this.g=new OS}function Eu(l){this.i=l.Sb||null,this.h=l.ab||!1}p(Eu,Yp),Eu.prototype.g=function(){return new ka(this.i,this.h)};function ka(l,h){Ke.call(this),this.H=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(ka,Ke),t=ka.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=h,this.readyState=1,Li(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(h.body=l),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Di(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Li(this)),this.g&&(this.readyState=3,Li(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ym(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function ym(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Di(this):Li(this),this.readyState==3&&ym(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,Di(this))},t.Na=function(l){this.g&&(this.response=l,Di(this))},t.ga=function(){this.g&&Di(this)};function Di(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Li(l)}t.setRequestHeader=function(l,h){this.A.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var g=h.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=h.next();return l.join(`\r
`)};function Li(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ka.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function _m(l){let h="";return q(l,function(g,_){h+=_,h+=":",h+=g,h+=`\r
`}),h}function xu(l,h,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=_m(g),typeof l=="string"?g!=null&&ki(g):he(l,h,g))}function Ne(l){Ke.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ne,Ke);var tC=/^https?$/i,nC=["POST","PUT"];t=Ne.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,h,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():em.g(),this.g.onreadystatechange=f(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(D){wm(this,D);return}if(l=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var b in _)g.set(b,_[b]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const D of _.keys())g.set(D,_.get(D));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(D=>D.toLowerCase()=="content-type"),b=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(nC,h,void 0)>=0)||_||b||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,$]of g)this.g.setRequestHeader(D,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(D){wm(this,D)}};function wm(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.o=5,Em(l),ja(l)}function Em(l){l.A||(l.A=!0,Ze(l,"complete"),Ze(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,Ze(this,"complete"),Ze(this,"abort"),ja(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ja(this,!0)),Ne.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?xm(this):this.Xa())},t.Xa=function(){xm(this)};function xm(l){if(l.h&&typeof i<"u"){if(l.v&&Hn(l)==4)setTimeout(l.Ca.bind(l),0);else if(Ze(l,"readystatechange"),Hn(l)==4){l.h=!1;try{const D=l.ca();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var g;if(!(g=h)){var _;if(_=D===0){let $=String(l.D).match(dm)[1]||null;!$&&o.self&&o.self.location&&($=o.self.location.protocol.slice(0,-1)),_=!tC.test($?$.toLowerCase():"")}g=_}if(g)Ze(l,"complete"),Ze(l,"success");else{l.o=6;try{var b=Hn(l)>2?l.g.statusText:""}catch{b=""}l.l=b+" ["+l.ca()+"]",Em(l)}}finally{ja(l)}}}}function ja(l,h){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const g=l.g;l.g=null,h||Ze(l,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Hn(l){return l.g?l.g.readyState:0}t.ca=function(){try{return Hn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),bS(h)}};function Sm(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function rC(l){const h={};l=(l.g&&Hn(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(k(l[_]))continue;var g=VS(l[_]);const b=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const D=h[b]||[];h[b]=D,D.push(g)}K(h,function(_){return _.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mi(l,h,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||h}function Cm(l){this.za=0,this.i=[],this.j=new Ti,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Mi("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Mi("baseRetryDelayMs",5e3,l),this.Za=Mi("retryDelaySeedMs",1e4,l),this.Ta=Mi("forwardChannelMaxRetries",2,l),this.va=Mi("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new om(l&&l.concurrentRequestLimit),this.Ba=new eC,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Cm.prototype,t.ka=8,t.I=1,t.connect=function(l,h,g,_){et(0),this.W=l,this.H=h||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.J=bm(this,null,this.W),Ra(this)};function Su(l){if(Nm(l),l.I==3){var h=l.V++,g=Zt(l.J);if(he(g,"SID",l.M),he(g,"RID",h),he(g,"TYPE","terminate"),Fi(l,g),h=new $n(l,l.j,h),h.M=2,h.A=Ta(Zt(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=h.A,g=!0),g||(h.g=Om(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Ia(h)}Am(l)}function Pa(l){l.g&&(Nu(l),l.g.cancel(),l.g=null)}function Nm(l){Pa(l),l.v&&(o.clearTimeout(l.v),l.v=null),Aa(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function Ra(l){if(!am(l.h)&&!l.m){l.m=!0;var h=l.Ea;L||x(),M||(L(),M=!0),N.add(h,l),l.D=0}}function sC(l,h){return lm(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=h.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Ii(d(l.Ea,l,h),Rm(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const b=new $n(this,this.j,l);let D=this.o;if(this.U&&(D?(D=me(D),Ar(D,this.U)):D=this.U),this.u!==null||this.R||(b.J=D,D=null),this.S)e:{for(var h=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,h>4096){h=g;break e}if(h===4096||g===this.i.length-1){h=g+1;break e}}h=1e3}else h=1e3;h=Tm(this,b,h),g=Zt(this.J),he(g,"RID",l),he(g,"CVER",22),this.G&&he(g,"X-HTTP-Session-Id",this.G),Fi(this,g),D&&(this.R?h="headers="+ki(_m(D))+"&"+h:this.u&&xu(g,this.u,D)),_u(this.h,b),this.Ra&&he(g,"TYPE","init"),this.S?(he(g,"$req",h),he(g,"SID","null"),b.U=!0,mu(b,g,null)):mu(b,g,h),this.I=2}}else this.I==3&&(l?Im(this,l):this.i.length==0||am(this.h)||Im(this))};function Im(l,h){var g;h?g=h.l:g=l.V++;const _=Zt(l.J);he(_,"SID",l.M),he(_,"RID",g),he(_,"AID",l.K),Fi(l,_),l.u&&l.o&&xu(_,l.u,l.o),g=new $n(l,l.j,g,l.D+1),l.u===null&&(g.J=l.o),h&&(l.i=h.G.concat(l.i)),h=Tm(l,g,1e3),g.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),_u(l.h,g),mu(g,_,h)}function Fi(l,h){l.H&&q(l.H,function(g,_){he(h,_,g)}),l.l&&q({},function(g,_){he(h,_,g)})}function Tm(l,h,g){g=Math.min(l.i.length,g);const _=l.l?d(l.l.Ka,l.l,l):null;e:{var b=l.i;let Y=-1;for(;;){const Re=["count="+g];Y==-1?g>0?(Y=b[0].g,Re.push("ofs="+Y)):Y=0:Re.push("ofs="+Y);let le=!0;for(let Me=0;Me<g;Me++){var D=b[Me].g;const en=b[Me].map;if(D-=Y,D<0)Y=Math.max(0,b[Me].g-100),le=!1;else try{D="req"+D+"_"||"";try{var $=en instanceof Map?en:Object.entries(en);for(const[Mr,Bn]of $){let Wn=Bn;c(Bn)&&(Wn=lu(Bn)),Re.push(D+Mr+"="+encodeURIComponent(Wn))}}catch(Mr){throw Re.push(D+"type="+encodeURIComponent("_badmap")),Mr}}catch{_&&_(en)}}if(le){$=Re.join("&");break e}}$=void 0}return l=l.i.splice(0,g),h.G=l,$}function km(l){if(!l.g&&!l.v){l.Y=1;var h=l.Da;L||x(),M||(L(),M=!0),N.add(h,l),l.A=0}}function Cu(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Ii(d(l.Da,l),Rm(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,jm(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Ii(d(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,et(10),Pa(this),jm(this))};function Nu(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function jm(l){l.g=new $n(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var h=Zt(l.na);he(h,"RID","rpc"),he(h,"SID",l.M),he(h,"AID",l.K),he(h,"CI",l.F?"0":"1"),!l.F&&l.ia&&he(h,"TO",l.ia),he(h,"TYPE","xmlhttp"),Fi(l,h),l.u&&l.o&&xu(h,l.u,l.o),l.O&&(l.g.H=l.O);var g=l.g;l=l.ba,g.M=1,g.A=Ta(Zt(h)),g.u=null,g.R=!0,rm(g,l)}t.Va=function(){this.C!=null&&(this.C=null,Pa(this),Cu(this),et(19))};function Aa(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Pm(l,h){var g=null;if(l.g==h){Aa(l),Nu(l),l.g=null;var _=2}else if(yu(l.h,h))g=h.G,cm(l.h,h),_=1;else return;if(l.I!=0){if(h.o)if(_==1){g=h.u?h.u.length:0,h=Date.now()-h.F;var b=l.D;_=du(),Ze(_,new Zp(_,g)),Ra(l)}else km(l);else if(b=h.m,b==3||b==0&&h.X>0||!(_==1&&sC(l,h)||_==2&&Cu(l)))switch(g&&g.length>0&&(h=l.h,h.i=h.i.concat(g)),b){case 1:Lr(l,5);break;case 4:Lr(l,10);break;case 3:Lr(l,6);break;default:Lr(l,2)}}}function Rm(l,h){let g=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(g*=2),g*h}function Lr(l,h){if(l.j.info("Error code "+h),h==2){var g=d(l.bb,l),_=l.Ua;const b=!_;_=new Vn(_||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Pi(_,"https"),Ta(_),b?JS(_.toString(),g):ZS(_.toString(),g)}else et(2);l.I=0,l.l&&l.l.pa(h),Am(l),Nm(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function Am(l){if(l.I=0,l.ja=[],l.l){const h=um(l.h);(h.length!=0||l.i.length!=0)&&(w(l.ja,h),w(l.ja,l.i),l.h.i.length=0,v(l.i),l.i.length=0),l.l.oa()}}function bm(l,h,g){var _=g instanceof Vn?Zt(g):new Vn(g);if(_.g!="")h&&(_.g=h+"."+_.g),Ri(_,_.u);else{var b=o.location;_=b.protocol,h=h?h+"."+b.hostname:b.hostname,b=+b.port;const D=new Vn(null);_&&Pi(D,_),h&&(D.g=h),b&&Ri(D,b),g&&(D.h=g),_=D}return g=l.G,h=l.wa,g&&h&&he(_,g,h),he(_,"VER",l.ka),Fi(l,_),_}function Om(l,h,g){if(h&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Aa&&!l.ma?new Ne(new Eu({ab:g})):new Ne(l.ma),h.Fa(l.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dm(){}t=Dm.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ct(l,h){Ke.call(this),this.g=new Cm(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(l?l["X-WebChannel-Client-Profile"]=h.sa:l={"X-WebChannel-Client-Profile":h.sa}),this.g.U=l,(l=h&&h.Qb)&&!k(l)&&(this.g.u=l),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!k(h)&&(this.g.G=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Es(this)}p(Ct,Ke),Ct.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ct.prototype.close=function(){Su(this.g)},Ct.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.v&&(g={},g.__data__=lu(l),l=g);h.i.push(new BS(h.Ya++,l)),h.I==3&&Ra(h)},Ct.prototype.N=function(){this.g.l=null,delete this.j,Su(this.g),delete this.g,Ct.Z.N.call(this)};function Lm(l){cu.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const g in h){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}p(Lm,cu);function Mm(){uu.call(this),this.status=1}p(Mm,uu);function Es(l){this.g=l}p(Es,Dm),Es.prototype.ra=function(){Ze(this.g,"a")},Es.prototype.qa=function(l){Ze(this.g,new Lm(l))},Es.prototype.pa=function(l){Ze(this.g,new Mm)},Es.prototype.oa=function(){Ze(this.g,"b")},Ct.prototype.send=Ct.prototype.o,Ct.prototype.open=Ct.prototype.m,Ct.prototype.close=Ct.prototype.close,hu.NO_ERROR=0,hu.TIMEOUT=8,hu.HTTP_ERROR=6,$S.COMPLETE="complete",DS.EventType=Ci,Ci.OPEN="a",Ci.CLOSE="b",Ci.ERROR="c",Ci.MESSAGE="d",Ke.prototype.listen=Ke.prototype.J,Ne.prototype.listenOnce=Ne.prototype.K,Ne.prototype.getLastError=Ne.prototype.Ha,Ne.prototype.getLastErrorCode=Ne.prototype.ya,Ne.prototype.getStatus=Ne.prototype.ca,Ne.prototype.getResponseJson=Ne.prototype.La,Ne.prototype.getResponseText=Ne.prototype.la,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Fa}).apply(typeof el<"u"?el:typeof self<"u"?self:typeof window<"u"?window:{});const sy="@firebase/firestore",iy="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nt.UNAUTHENTICATED=new nt(null),nt.GOOGLE_CREDENTIALS=new nt("google-credentials-uid"),nt.FIRST_PARTY=new nt("first-party-uid"),nt.MOCK_USER=new nt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wa="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=new $c("@firebase/firestore");function Wt(t,...e){if(ci.logLevel<=ie.DEBUG){const n=e.map(kp);ci.debug(`Firestore (${wa}): ${t}`,...n)}}function tS(t,...e){if(ci.logLevel<=ie.ERROR){const n=e.map(kp);ci.error(`Firestore (${wa}): ${t}`,...n)}}function VR(t,...e){if(ci.logLevel<=ie.WARN){const n=e.map(kp);ci.warn(`Firestore (${wa}): ${t}`,...n)}}function kp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,nS(t,r,n)}function nS(t,e,n){let r=`FIRESTORE (${wa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw tS(r),new Error(r)}function Eo(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||nS(e,s,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class ne extends hn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nt.UNAUTHENTICATED))}shutdown(){}}class HR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class BR{constructor(e){this.t=e,this.currentUser=nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Eo(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new xo;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new xo,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{Wt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Wt("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new xo)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Wt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Eo(typeof r.accessToken=="string",31837,{l:r}),new rS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Eo(e===null||typeof e=="string",2055,{h:e}),new nt(e)}}class WR{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=nt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class GR{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new WR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ut(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Eo(this.o===void 0,3512);const r=i=>{i.error!=null&&Wt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Wt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Wt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Wt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new oy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Eo(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new oy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=KR(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Cr(t,e){return t<e?-1:t>e?1:0}function QR(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return fd(s)===fd(i)?Cr(s,i):fd(s)?1:-1}return Cr(t.length,e.length)}const XR=55296,JR=57343;function fd(t){const e=t.charCodeAt(0);return e>=XR&&e<=JR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay="__name__";class rn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ea(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ea(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return rn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=rn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Cr(e.length,n.length)}static compareSegments(e,n){const r=rn.isNumericId(e),s=rn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?rn.extractNumericId(e).compare(rn.extractNumericId(n)):QR(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Tp.fromString(e.substring(4,e.length-2))}}class Vt extends rn{construct(e,n,r){return new Vt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Vt(n)}static emptyPath(){return new Vt([])}}const ZR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hr extends rn{construct(e,n,r){return new Hr(e,n,r)}static isValidIdentifier(e){return ZR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ay}static keyField(){return new Hr([ay])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ne(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new ne(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ne(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new ne(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hr(n)}static emptyPath(){return new Hr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this.path=e}static fromPath(e){return new Kr(Vt.fromString(e))}static fromName(e){return new Kr(Vt.fromString(e).popFirst(5))}static empty(){return new Kr(Vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Vt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Kr(new Vt(e.slice()))}}function eA(t,e,n,r){if(e===!0&&r===!0)throw new ne(te.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function tA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function nA(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ea(12329,{type:typeof t})}function rA(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=nA(t);throw new ne(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ea(t,e){if(!tA(t))throw new ne(te.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new ne(te.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly=-62135596800,cy=1e6;class sn{static now(){return sn.fromMillis(Date.now())}static fromDate(e){return sn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*cy);return new sn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ly)throw new ne(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cy}_compareTo(e){return this.seconds===e.seconds?Cr(this.nanoseconds,e.nanoseconds):Cr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:sn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ea(e,sn._jsonSchema))return new sn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ly;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}sn._jsonSchemaVersion="firestore/timestamp/1.0",sn._jsonSchema={type:Pe("string",sn._jsonSchemaVersion),seconds:Pe("number"),nanoseconds:Pe("number")};function sA(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new iA("Invalid base64 string: "+i):i}}(e);return new us(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new us(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Cr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}us.EMPTY_BYTE_STRING=new us("");const bh="(default)";class gc{constructor(e,n){this.projectId=e,this.database=n||bh}static empty(){return new gc("","")}get isDefaultDatabase(){return this.database===bh}isEqual(e){return e instanceof gc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function aA(t){return new oA(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uy,ee;(ee=uy||(uy={}))[ee.OK=0]="OK",ee[ee.CANCELLED=1]="CANCELLED",ee[ee.UNKNOWN=2]="UNKNOWN",ee[ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ee[ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ee[ee.NOT_FOUND=5]="NOT_FOUND",ee[ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",ee[ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",ee[ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",ee[ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ee[ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ee[ee.ABORTED=10]="ABORTED",ee[ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",ee[ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",ee[ee.INTERNAL=13]="INTERNAL",ee[ee.UNAVAILABLE=14]="UNAVAILABLE",ee[ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Tp([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=1048576;function pd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Wt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new xo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new jp(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var dy,hy;(hy=dy||(dy={})).Ma="default",hy.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="firestore.googleapis.com",py=!0;class my{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ne(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sS,this.ssl=py}else this.host=e.host,this.ssl=e.ssl??py;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cA)throw new ne(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dA(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ne(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ne(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ne(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class iS{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new my({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new my(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zR;switch(r.type){case"firstParty":return new GR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=fy.get(n);r&&(Wt("ComponentProvider","Removing Datastore"),fy.delete(n),r.terminate())}(this),Promise.resolve()}}function hA(t,e,n,r={}){var d;t=rA(t,iS);const s=Mn(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(Lc(`https://${c}`),Mc("Firestore",!0)),i.host!==sS&&i.host!==c&&VR("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:r};if(!_r(u,o)&&(t._setSettings(u),r.mockUserToken)){let m,p;if(typeof r.mockUserToken=="string")m=r.mockUserToken,p=nt.MOCK_USER;else{m=Xw(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ne(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new nt(f)}t._authCredentials=new HR(new rS(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pp(this.firestore,e,this._query)}}class an{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}toJSON(){return{type:an._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ea(n,an._jsonSchema))return new an(e,r||null,new Kr(Vt.fromString(n.referencePath)))}}an._jsonSchemaVersion="firestore/documentReference/1.0",an._jsonSchema={type:Pe("string",an._jsonSchemaVersion),referencePath:Pe("string")};class Rp extends Pp{constructor(e,n,r){super(e,n,aA(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new Kr(e))}withConverter(e){return new Rp(this.firestore,e,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="AsyncQueue";class vy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new uA(this,"async_queue_retry"),this._c=()=>{const r=pd();r&&Wt(gy,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=pd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=pd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new xo;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!sA(e))throw e;Wt(gy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,tS("INTERNAL UNHANDLED ERROR: ",yy(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=jp.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ea(47125,{Pc:yy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function yy(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class fA extends iS{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new vy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vy(e),this._firestoreClient=void 0,await e}}}function pA(t,e){const n=typeof t=="object"?t:Vc(),r=typeof t=="string"?t:bh,s=ca(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Df("firestore");i&&hA(s,...i)}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vn(us.fromBase64String(e))}catch(n){throw new ne(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new vn(us.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ea(e,vn._jsonSchema))return vn.fromBase64String(e.bytes)}}vn._jsonSchemaVersion="firestore/bytes/1.0",vn._jsonSchema={type:Pe("string",vn._jsonSchemaVersion),bytes:Pe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Cr(this._lat,e._lat)||Cr(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xr._jsonSchemaVersion}}static fromJSON(e){if(Ea(e,Xr._jsonSchema))return new Xr(e.latitude,e.longitude)}}Xr._jsonSchemaVersion="firestore/geoPoint/1.0",Xr._jsonSchema={type:Pe("string",Xr._jsonSchemaVersion),latitude:Pe("number"),longitude:Pe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Jr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ea(e,Jr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Jr(e.vectorValues);throw new ne(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Jr._jsonSchemaVersion="firestore/vectorValue/1.0",Jr._jsonSchema={type:Pe("string",Jr._jsonSchemaVersion),vectorValues:Pe("object")};const mA=new RegExp("[~\\*/\\[\\]]");function gA(t,e,n){if(e.search(mA)>=0)throw _y(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t);try{return new oS(...e.split("."))._internalPath}catch{throw _y(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t)}}function _y(t,e,n,r,s){let i=`Function ${e}() called with invalid data`;i+=". ";let o="";return new ne(te.INVALID_ARGUMENT,i+t+o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class vA extends aS{data(){return super.data()}}function lS(t,e){return typeof e=="string"?gA(t,e):e instanceof oS?e._internalPath:e._delegate._internalPath}class tl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ys extends aS{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new wl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(lS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ys._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ys._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ys._jsonSchema={type:Pe("string",Ys._jsonSchemaVersion),bundleSource:Pe("string","DocumentSnapshot"),bundleName:Pe("string"),bundle:Pe("string")};class wl extends Ys{data(e={}){return super.data(e)}}class So{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new tl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new wl(this._firestore,this._userDataWriter,r.key,r,new tl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new wl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new tl(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new wl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new tl(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,m=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:yA(c.type),doc:u,oldIndex:d,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=So._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=YR.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function yA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ea(61501,{type:t})}}So._jsonSchemaVersion="firestore/querySnapshot/1.0",So._jsonSchema={type:Pe("string",So._jsonSchemaVersion),bundleSource:Pe("string","QuerySnapshot"),bundleName:Pe("string"),bundle:Pe("string")};(function(e,n=!0){(function(s){wa=s})(ps),wr(new Rn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new fA(new BR(r.getProvider("auth-internal")),new qR(o,r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ne(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gc(d.options.projectId,m)}(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Pt(sy,iy,e),Pt(sy,iy,"esm2020")})();const _A={apiKey:"AIzaSyB3wZ73vpxEUGElQK77V14oaGIWxfucKg4",authDomain:"ecogestorresiduos.firebaseapp.com",projectId:"ecogestorresiduos",storageBucket:"ecogestorresiduos.firebasestorage.app",messagingSenderId:"1040788468176",appId:"1:1040788468176:web:9a55fbcc43679afd35c9d5",measurementId:"G-JNVNVP04TY"},Ap=nE(_A),ds=Tk(Ap),G=FR(Ap);pA(Ap);const cS=j.createContext(null);let Oh=null;function wA(t){Oh=t}function EA({children:t}){const[e,n]=j.useState(null),[r,s]=j.useState(!0),[i,o]=j.useState("");j.useEffect(()=>{const u=m1(ds,async d=>{if(d)try{const m=W(G,`usuarios/${d.uid}`),p=await eS(m),f={uid:d.uid,email:d.email,...p.exists()?p.val():{}},v=await d.getIdToken();localStorage.setItem("authToken",v),localStorage.setItem("user",JSON.stringify(f)),n(f),o("")}catch(m){console.error("Error al cargar datos del usuario:",m),o(m.message)}else localStorage.removeItem("authToken"),localStorage.removeItem("user"),n(null);s(!1)});return()=>u()},[]);const c=async()=>{try{await g1(ds),localStorage.removeItem("authToken"),localStorage.removeItem("user"),n(null),Oh&&Oh("/")}catch(u){o(u.message)}};return a.jsx(cS.Provider,{value:{user:e,loading:r,error:i,logout:c},children:t})}function xa(){const t=j.useContext(cS);if(!t)throw new Error("useAuth debe usarse dentro de AuthProvider");return t}/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var wy="popstate";function xA(t={}){function e(r,s){let{pathname:i,search:o,hash:c}=r.location;return Dh("",{pathname:i,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ta(s)}return CA(e,n,null,t)}function ve(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Xt(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function SA(){return Math.random().toString(36).substring(2,10)}function Ey(t,e){return{usr:t.state,key:t.key,idx:e}}function Dh(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?wi(e):e,state:n,key:e&&e.key||r||SA()}}function ta({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function wi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function CA(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,c="POP",u=null,d=m();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function m(){return(o.state||{idx:null}).idx}function p(){c="POP";let R=m(),E=R==null?null:R-d;d=R,u&&u({action:c,location:T.location,delta:E})}function f(R,E){c="PUSH";let S=Dh(T.location,R,E);d=m()+1;let C=Ey(S,d),O=T.createHref(S);try{o.pushState(C,"",O)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(O)}i&&u&&u({action:c,location:T.location,delta:1})}function v(R,E){c="REPLACE";let S=Dh(T.location,R,E);d=m();let C=Ey(S,d),O=T.createHref(S);o.replaceState(C,"",O),i&&u&&u({action:c,location:T.location,delta:0})}function w(R){return NA(R)}let T={get action(){return c},get location(){return t(s,o)},listen(R){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(wy,p),u=R,()=>{s.removeEventListener(wy,p),u=null}},createHref(R){return e(s,R)},createURL:w,encodeLocation(R){let E=w(R);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:f,replace:v,go(R){return o.go(R)}};return T}function NA(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ve(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:ta(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function uS(t,e,n="/"){return IA(t,e,n,!1)}function IA(t,e,n,r){let s=typeof e=="string"?wi(e):e,i=Dn(s.pathname||"/",n);if(i==null)return null;let o=dS(t);TA(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=FA(i);c=LA(o[u],d,r)}return c}function dS(t,e=[],n=[],r="",s=!1){let i=(o,c,u=s,d)=>{let m={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(r)&&u)return;ve(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length)}let p=In([r,m.relativePath]),f=n.concat(m);o.children&&o.children.length>0&&(ve(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),dS(o.children,e,f,p,u)),!(o.path==null&&!o.index)&&e.push({path:p,score:OA(p,o.index),routesMeta:f})};return t.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,c);else for(let d of hS(o.path))i(o,c,!0,d)}),e}function hS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=hS(r.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function TA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:DA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var kA=/^:[\w-]+$/,jA=3,PA=2,RA=1,AA=10,bA=-2,xy=t=>t==="*";function OA(t,e){let n=t.split("/"),r=n.length;return n.some(xy)&&(r+=bA),e&&(r+=PA),n.filter(s=>!xy(s)).reduce((s,i)=>s+(kA.test(i)?jA:i===""?RA:AA),r)}function DA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function LA(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,m=i==="/"?e:e.slice(i.length)||"/",p=vc({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},m),f=u.route;if(!p&&d&&n&&!r[r.length-1].route.index&&(p=vc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},m)),!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:In([i,p.pathname]),pathnameBase:zA(In([i,p.pathnameBase])),route:f}),p.pathnameBase!=="/"&&(i=In([i,p.pathnameBase]))}return o}function vc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=MA(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,{paramName:m,isOptional:p},f)=>{if(m==="*"){let w=c[f]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const v=c[f];return p&&!v?d[m]=void 0:d[m]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function MA(t,e=!1,n=!0){Xt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function FA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Dn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function UA(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?wi(t):t;return{pathname:n?n.startsWith("/")?n:$A(n,e):e,search:HA(r),hash:BA(s)}}function $A(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function md(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function VA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function bp(t){let e=VA(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Op(t,e,n,r=!1){let s;typeof t=="string"?s=wi(t):(s={...t},ve(!s.pathname||!s.pathname.includes("?"),md("?","pathname","search",s)),ve(!s.pathname||!s.pathname.includes("#"),md("#","pathname","hash",s)),ve(!s.search||!s.search.includes("#"),md("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,c;if(o==null)c=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),p-=1;s.pathname=f.join("/")}c=p>=0?e[p]:"/"}let u=UA(s,c),d=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||m)&&(u.pathname+="/"),u}var In=t=>t.join("/").replace(/\/\/+/g,"/"),zA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),HA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,BA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function WA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var fS=["POST","PUT","PATCH","DELETE"];new Set(fS);var GA=["GET",...fS];new Set(GA);var Ei=j.createContext(null);Ei.displayName="DataRouter";var nu=j.createContext(null);nu.displayName="DataRouterState";j.createContext(!1);var pS=j.createContext({isTransitioning:!1});pS.displayName="ViewTransition";var qA=j.createContext(new Map);qA.displayName="Fetchers";var KA=j.createContext(null);KA.displayName="Await";var Jt=j.createContext(null);Jt.displayName="Navigation";var Sa=j.createContext(null);Sa.displayName="Location";var pn=j.createContext({outlet:null,matches:[],isDataRoute:!1});pn.displayName="Route";var Dp=j.createContext(null);Dp.displayName="RouteError";function YA(t,{relative:e}={}){ve(xi(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=j.useContext(Jt),{hash:s,pathname:i,search:o}=Ca(t,{relative:e}),c=i;return n!=="/"&&(c=i==="/"?n:In([n,i])),r.createHref({pathname:c,search:o,hash:s})}function xi(){return j.useContext(Sa)!=null}function Pr(){return ve(xi(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Sa).location}var mS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function gS(t){j.useContext(Jt).static||j.useLayoutEffect(t)}function Lp(){let{isDataRoute:t}=j.useContext(pn);return t?lb():QA()}function QA(){ve(xi(),"useNavigate() may be used only in the context of a <Router> component.");let t=j.useContext(Ei),{basename:e,navigator:n}=j.useContext(Jt),{matches:r}=j.useContext(pn),{pathname:s}=Pr(),i=JSON.stringify(bp(r)),o=j.useRef(!1);return gS(()=>{o.current=!0}),j.useCallback((u,d={})=>{if(Xt(o.current,mS),!o.current)return;if(typeof u=="number"){n.go(u);return}let m=Op(u,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:In([e,m.pathname])),(d.replace?n.replace:n.push)(m,d.state,d)},[e,n,i,s,t])}j.createContext(null);function Ca(t,{relative:e}={}){let{matches:n}=j.useContext(pn),{pathname:r}=Pr(),s=JSON.stringify(bp(n));return j.useMemo(()=>Op(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function XA(t,e){return vS(t,e)}function vS(t,e,n,r,s){var S;ve(xi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=j.useContext(Jt),{matches:o}=j.useContext(pn),c=o[o.length-1],u=c?c.params:{},d=c?c.pathname:"/",m=c?c.pathnameBase:"/",p=c&&c.route;{let C=p&&p.path||"";yS(d,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let f=Pr(),v;if(e){let C=typeof e=="string"?wi(e):e;ve(m==="/"||((S=C.pathname)==null?void 0:S.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${C.pathname}" was given in the \`location\` prop.`),v=C}else v=f;let w=v.pathname||"/",T=w;if(m!=="/"){let C=m.replace(/^\//,"").split("/");T="/"+w.replace(/^\//,"").split("/").slice(C.length).join("/")}let R=uS(t,{pathname:T});Xt(p||R!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Xt(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=nb(R&&R.map(C=>Object.assign({},C,{params:Object.assign({},u,C.params),pathname:In([m,i.encodeLocation?i.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?m:In([m,i.encodeLocation?i.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),o,n,r,s);return e&&E?j.createElement(Sa.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},E):E}function JA(){let t=ab(),e=WA(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:i},"ErrorBoundary")," or"," ",j.createElement("code",{style:i},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:s},n):null,o)}var ZA=j.createElement(JA,null),eb=class extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?j.createElement(pn.Provider,{value:this.props.routeContext},j.createElement(Dp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function tb({routeContext:t,match:e,children:n}){let r=j.useContext(Ei);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(pn.Provider,{value:t},n)}function nb(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let d=i.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);ve(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let c=!1,u=-1;if(n)for(let d=0;d<i.length;d++){let m=i[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=d),m.route.id){let{loaderData:p,errors:f}=n,v=m.route.loader&&!p.hasOwnProperty(m.route.id)&&(!f||f[m.route.id]===void 0);if(m.route.lazy||v){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,m,p)=>{let f,v=!1,w=null,T=null;n&&(f=o&&m.route.id?o[m.route.id]:void 0,w=m.route.errorElement||ZA,c&&(u<0&&p===0?(yS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,T=null):u===p&&(v=!0,T=m.route.hydrateFallbackElement||null)));let R=e.concat(i.slice(0,p+1)),E=()=>{let S;return f?S=w:v?S=T:m.route.Component?S=j.createElement(m.route.Component,null):m.route.element?S=m.route.element:S=d,j.createElement(tb,{match:m,routeContext:{outlet:d,matches:R,isDataRoute:n!=null},children:S})};return n&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?j.createElement(eb,{location:n.location,revalidation:n.revalidation,component:w,error:f,children:E(),routeContext:{outlet:null,matches:R,isDataRoute:!0},unstable_onError:r}):E()},null)}function Mp(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rb(t){let e=j.useContext(Ei);return ve(e,Mp(t)),e}function sb(t){let e=j.useContext(nu);return ve(e,Mp(t)),e}function ib(t){let e=j.useContext(pn);return ve(e,Mp(t)),e}function Fp(t){let e=ib(t),n=e.matches[e.matches.length-1];return ve(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function ob(){return Fp("useRouteId")}function ab(){var r;let t=j.useContext(Dp),e=sb("useRouteError"),n=Fp("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function lb(){let{router:t}=rb("useNavigate"),e=Fp("useNavigate"),n=j.useRef(!1);return gS(()=>{n.current=!0}),j.useCallback(async(s,i={})=>{Xt(n.current,mS),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var Sy={};function yS(t,e,n){!e&&!Sy[t]&&(Sy[t]=!0,Xt(!1,n))}j.memo(cb);function cb({routes:t,future:e,state:n,unstable_onError:r}){return vS(t,void 0,n,r,e)}function Cy({to:t,replace:e,state:n,relative:r}){ve(xi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=j.useContext(Jt);Xt(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=j.useContext(pn),{pathname:o}=Pr(),c=Lp(),u=Op(t,bp(i),o,r==="path"),d=JSON.stringify(u);return j.useEffect(()=>{c(JSON.parse(d),{replace:e,state:n,relative:r})},[c,d,r,e,n]),null}function zr(t){ve(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ub({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){ve(!xi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=j.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=wi(n));let{pathname:u="/",search:d="",hash:m="",state:p=null,key:f="default"}=n,v=j.useMemo(()=>{let w=Dn(u,o);return w==null?null:{location:{pathname:w,search:d,hash:m,state:p,key:f},navigationType:r}},[o,u,d,m,p,f,r]);return Xt(v!=null,`<Router basename="${o}"> is not able to match the URL "${u}${d}${m}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:j.createElement(Jt.Provider,{value:c},j.createElement(Sa.Provider,{children:e,value:v}))}function db({children:t,location:e}){return XA(Lh(t),e)}function Lh(t,e=[]){let n=[];return j.Children.forEach(t,(r,s)=>{if(!j.isValidElement(r))return;let i=[...e,s];if(r.type===j.Fragment){n.push.apply(n,Lh(r.props.children,i));return}ve(r.type===zr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ve(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Lh(r.props.children,i)),n.push(o)}),n}var El="get",xl="application/x-www-form-urlencoded";function ru(t){return t!=null&&typeof t.tagName=="string"}function hb(t){return ru(t)&&t.tagName.toLowerCase()==="button"}function fb(t){return ru(t)&&t.tagName.toLowerCase()==="form"}function pb(t){return ru(t)&&t.tagName.toLowerCase()==="input"}function mb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function gb(t,e){return t.button===0&&(!e||e==="_self")&&!mb(t)}var nl=null;function vb(){if(nl===null)try{new FormData(document.createElement("form"),0),nl=!1}catch{nl=!0}return nl}var yb=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gd(t){return t!=null&&!yb.has(t)?(Xt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${xl}"`),null):t}function _b(t,e){let n,r,s,i,o;if(fb(t)){let c=t.getAttribute("action");r=c?Dn(c,e):null,n=t.getAttribute("method")||El,s=gd(t.getAttribute("enctype"))||xl,i=new FormData(t)}else if(hb(t)||pb(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?Dn(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||El,s=gd(t.getAttribute("formenctype"))||gd(c.getAttribute("enctype"))||xl,i=new FormData(c,t),!vb()){let{name:d,type:m,value:p}=t;if(m==="image"){let f=d?`${d}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else d&&i.append(d,p)}}else{if(ru(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=El,r=null,s=xl,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Up(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wb(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Dn(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function Eb(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function xb(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Sb(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await Eb(i,n);return o.links?o.links():[]}return[]}));return Tb(r.flat(1).filter(xb).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Ny(t,e,n,r,s,i){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>{var m;return n[d].pathname!==u.pathname||((m=n[d].route.path)==null?void 0:m.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,d)=>o(u,d)||c(u,d)):i==="data"?e.filter((u,d)=>{var p;let m=r.routes[u.route.id];if(!m||!m.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let f=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function Cb(t,e,{includeHydrateFallback:n}={}){return Nb(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function Nb(t){return[...new Set(t)]}function Ib(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function Tb(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(Ib(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function _S(){let t=j.useContext(Ei);return Up(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function kb(){let t=j.useContext(nu);return Up(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var $p=j.createContext(void 0);$p.displayName="FrameworkContext";function wS(){let t=j.useContext($p);return Up(t,"You must render this element inside a <HydratedRouter> element"),t}function jb(t,e){let n=j.useContext($p),[r,s]=j.useState(!1),[i,o]=j.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:m,onTouchStart:p}=e,f=j.useRef(null);j.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let T=E=>{E.forEach(S=>{o(S.isIntersecting)})},R=new IntersectionObserver(T,{threshold:.5});return f.current&&R.observe(f.current),()=>{R.disconnect()}}},[t]),j.useEffect(()=>{if(r){let T=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(T)}}},[r]);let v=()=>{s(!0)},w=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,f,{}]:[i,f,{onFocus:Xi(c,v),onBlur:Xi(u,w),onMouseEnter:Xi(d,v),onMouseLeave:Xi(m,w),onTouchStart:Xi(p,v)}]:[!1,f,{}]}function Xi(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Pb({page:t,...e}){let{router:n}=_S(),r=j.useMemo(()=>uS(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?j.createElement(Ab,{page:t,matches:r,...e}):null}function Rb(t){let{manifest:e,routeModules:n}=wS(),[r,s]=j.useState([]);return j.useEffect(()=>{let i=!1;return Sb(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function Ab({page:t,matches:e,...n}){let r=Pr(),{manifest:s,routeModules:i}=wS(),{basename:o}=_S(),{loaderData:c,matches:u}=kb(),d=j.useMemo(()=>Ny(t,e,u,s,r,"data"),[t,e,u,s,r]),m=j.useMemo(()=>Ny(t,e,u,s,r,"assets"),[t,e,u,s,r]),p=j.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let w=new Set,T=!1;if(e.forEach(E=>{var C;let S=s.routes[E.route.id];!S||!S.hasLoader||(!d.some(O=>O.route.id===E.route.id)&&E.route.id in c&&((C=i[E.route.id])!=null&&C.shouldRevalidate)||S.hasClientLoader?T=!0:w.add(E.route.id))}),w.size===0)return[];let R=wb(t,o,"data");return T&&w.size>0&&R.searchParams.set("_routes",e.filter(E=>w.has(E.route.id)).map(E=>E.route.id).join(",")),[R.pathname+R.search]},[o,c,r,s,d,e,t,i]),f=j.useMemo(()=>Cb(m,s),[m,s]),v=Rb(m);return j.createElement(j.Fragment,null,p.map(w=>j.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),f.map(w=>j.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),v.map(({key:w,link:T})=>j.createElement("link",{key:w,nonce:n.nonce,...T})))}function bb(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var ES=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ES&&(window.__reactRouterVersion="7.9.5")}catch{}function Ob({basename:t,children:e,window:n}){let r=j.useRef();r.current==null&&(r.current=xA({window:n,v5Compat:!0}));let s=r.current,[i,o]=j.useState({action:s.action,location:s.location}),c=j.useCallback(u=>{j.startTransition(()=>o(u))},[o]);return j.useLayoutEffect(()=>s.listen(c),[s,c]),j.createElement(ub,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var xS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,SS=j.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:c,target:u,to:d,preventScrollReset:m,viewTransition:p,...f},v){let{basename:w}=j.useContext(Jt),T=typeof d=="string"&&xS.test(d),R,E=!1;if(typeof d=="string"&&T&&(R=d,ES))try{let y=new URL(window.location.href),I=d.startsWith("//")?new URL(y.protocol+d):new URL(d),P=Dn(I.pathname,w);I.origin===y.origin&&P!=null?d=P+I.search+I.hash:E=!0}catch{Xt(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=YA(d,{relative:s}),[C,O,L]=jb(r,f),M=Fb(d,{replace:o,state:c,target:u,preventScrollReset:m,relative:s,viewTransition:p});function N(y){e&&e(y),y.defaultPrevented||M(y)}let x=j.createElement("a",{...f,...L,href:R||S,onClick:E||i?e:N,ref:bb(v,O),target:u,"data-discover":!T&&n==="render"?"true":void 0});return C&&!T?j.createElement(j.Fragment,null,x,j.createElement(Pb,{page:S})):x});SS.displayName="Link";var Db=j.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:c,children:u,...d},m){let p=Ca(o,{relative:d.relative}),f=Pr(),v=j.useContext(nu),{navigator:w,basename:T}=j.useContext(Jt),R=v!=null&&Hb(p)&&c===!0,E=w.encodeLocation?w.encodeLocation(p).pathname:p.pathname,S=f.pathname,C=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(S=S.toLowerCase(),C=C?C.toLowerCase():null,E=E.toLowerCase()),C&&T&&(C=Dn(C,T)||C);const O=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let L=S===E||!s&&S.startsWith(E)&&S.charAt(O)==="/",M=C!=null&&(C===E||!s&&C.startsWith(E)&&C.charAt(E.length)==="/"),N={isActive:L,isPending:M,isTransitioning:R},x=L?e:void 0,y;typeof r=="function"?y=r(N):y=[r,L?"active":null,M?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let I=typeof i=="function"?i(N):i;return j.createElement(SS,{...d,"aria-current":x,className:y,ref:m,style:I,to:o,viewTransition:c},typeof u=="function"?u(N):u)});Db.displayName="NavLink";var Lb=j.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=El,action:c,onSubmit:u,relative:d,preventScrollReset:m,viewTransition:p,...f},v)=>{let w=Vb(),T=zb(c,{relative:d}),R=o.toLowerCase()==="get"?"get":"post",E=typeof c=="string"&&xS.test(c),S=C=>{if(u&&u(C),C.defaultPrevented)return;C.preventDefault();let O=C.nativeEvent.submitter,L=(O==null?void 0:O.getAttribute("formmethod"))||o;w(O||C.currentTarget,{fetcherKey:e,method:L,navigate:n,replace:s,state:i,relative:d,preventScrollReset:m,viewTransition:p})};return j.createElement("form",{ref:v,method:R,action:T,onSubmit:r?u:S,...f,"data-discover":!E&&t==="render"?"true":void 0})});Lb.displayName="Form";function Mb(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function CS(t){let e=j.useContext(Ei);return ve(e,Mb(t)),e}function Fb(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let c=Lp(),u=Pr(),d=Ca(t,{relative:i});return j.useCallback(m=>{if(gb(m,e)){m.preventDefault();let p=n!==void 0?n:ta(u)===ta(d);c(t,{replace:p,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[u,c,d,n,r,e,t,s,i,o])}var Ub=0,$b=()=>`__${String(++Ub)}__`;function Vb(){let{router:t}=CS("useSubmit"),{basename:e}=j.useContext(Jt),n=ob();return j.useCallback(async(r,s={})=>{let{action:i,method:o,encType:c,formData:u,body:d}=_b(r,e);if(s.navigate===!1){let m=s.fetcherKey||$b();await t.fetch(m,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||o,formEncType:s.encType||c,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||o,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function zb(t,{relative:e}={}){let{basename:n}=j.useContext(Jt),r=j.useContext(pn);ve(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...Ca(t||".",{relative:e})},o=Pr();if(t==null){i.search=o.search;let c=new URLSearchParams(i.search),u=c.getAll("index");if(u.some(m=>m==="")){c.delete("index"),u.filter(p=>p).forEach(p=>c.append("index",p));let m=c.toString();i.search=m?`?${m}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:In([n,i.pathname])),ta(i)}function Hb(t,{relative:e}={}){let n=j.useContext(pS);ve(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=CS("useViewTransitionState"),s=Ca(t,{relative:e});if(!n.isTransitioning)return!1;let i=Dn(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Dn(n.nextLocation.pathname,r)||n.nextLocation.pathname;return vc(s.pathname,o)!=null||vc(s.pathname,i)!=null}function Bb(){const{user:t,logout:e}=xa(),[n,r]=j.useState(!1),[s,i]=j.useState(""),[o,c]=j.useState(""),[u,d]=j.useState(""),[m,p]=j.useState("Mesero"),[f,v]=j.useState(""),[w,T]=j.useState(!1),R=async C=>{C.preventDefault(),v(""),T(!0);try{const L=(await jE(ds,o,u)).user.uid;await cs(W(G,`usuarios/${L}`),{nombre:s,email:o,rol:m}),console.log("Usuario registrado y documento creado:",L)}catch(O){console.error("Error en registro:",O),v(O.message)}finally{T(!1)}},E=async C=>{C.preventDefault(),v(""),T(!0);try{await h1(ds,o,u)}catch(O){console.error("Error en login:",O),v(O.message)}finally{T(!1)}},S=async()=>{await e()};return a.jsxs("div",{className:"login-container",children:[a.jsx("div",{className:"login-background"}),a.jsxs("div",{className:"login-card",children:[a.jsxs("div",{className:"restaurant-brand",children:[a.jsx("h1",{children:"CASA MIA"}),a.jsx("p",{children:"Restaurante & Bar"})]}),t?a.jsxs("div",{className:"user-dashboard",children:[a.jsxs("div",{className:"welcome-section",children:[a.jsx("h2",{children:"Bienvenido a CASA MIA!"}),a.jsx("div",{className:"user-avatar",children:t.nombre?t.nombre.charAt(0).toUpperCase():"U"})]}),a.jsxs("div",{className:"user-info",children:[a.jsxs("div",{className:"info-item",children:[a.jsx("span",{className:"info-label",children:"Nombre:"}),a.jsx("span",{className:"info-value",children:t.nombre||"Sin nombre"})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("span",{className:"info-label",children:"Email:"}),a.jsx("span",{className:"info-value",children:t.email})]}),a.jsxs("div",{className:"info-item",children:[a.jsx("span",{className:"info-label",children:"Rol:"}),a.jsx("span",{className:"info-value role-badge",children:t.rol||"Sin rol"})]})]}),a.jsx("button",{onClick:S,className:"logout-button",children:"Cerrar Sesin"})]}):a.jsxs("div",{className:"form-container",children:[a.jsx("h2",{children:n?"Crear Cuenta":"Iniciar Sesin"}),a.jsx("p",{className:"form-subtitle",children:n?"Registra una nueva cuenta":"Accede a tu cuenta existente"}),a.jsxs("form",{onSubmit:n?R:E,children:[n&&a.jsxs("div",{className:"input-group",children:[a.jsx("input",{placeholder:"Nombre completo",value:s,onChange:C=>i(C.target.value),required:!0}),a.jsx("span",{className:"input-icon",children:""})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("input",{placeholder:"Correo electrnico",type:"email",value:o,onChange:C=>c(C.target.value),required:!0}),a.jsx("span",{className:"input-icon",children:""})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("input",{placeholder:"Contrasea",type:"password",value:u,onChange:C=>d(C.target.value),required:!0}),a.jsx("span",{className:"input-icon",children:""})]}),n&&a.jsxs("div",{className:"input-group",children:[a.jsxs("select",{value:m,onChange:C=>p(C.target.value),children:[a.jsx("option",{value:"Admin",children:"Administrador"}),a.jsx("option",{value:"Cocinero",children:"Cocinero"}),a.jsx("option",{value:"Mesero",children:"Mesero"}),a.jsx("option",{value:"Cajero",children:"Cajero"})]}),a.jsx("span",{className:"input-icon",children:""})]}),a.jsx("button",{type:"submit",className:`submit-button ${w?"loading":""}`,disabled:w,children:w?a.jsx("span",{className:"button-loader"}):n?"Crear Cuenta":"Iniciar Sesin"})]}),a.jsx("div",{className:"form-footer",children:a.jsxs("p",{children:[n?"Ya tienes una cuenta? ":"No tienes una cuenta? ",a.jsx("button",{className:"toggle-form",onClick:()=>r(!n),children:n?"Inicia Sesin":"Regstrate"})]})}),f&&a.jsxs("div",{className:"error-message",children:[a.jsx("span",{className:"error-icon",children:""}),f]})]})]})]})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="type.googleapis.com/google.protobuf.Int64Value",Gb="type.googleapis.com/google.protobuf.UInt64Value";function NS(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function yc(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>yc(e));if(typeof t=="function"||typeof t=="object")return NS(t,e=>yc(e));throw new Error("Data cannot be encoded in JSON: "+t)}function ui(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case Wb:case Gb:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>ui(e)):typeof t=="function"||typeof t=="object"?NS(t,e=>ui(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ft extends hn{constructor(e,n,r){super(`${Vp}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,ft.prototype)}}function qb(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function _c(t,e){let n=qb(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!Iy[o])return new ft("internal","internal");n=Iy[o],r=o}const c=i.message;typeof c=="string"&&(r=c),s=i.details,s!==void 0&&(s=ui(s))}}catch{}return n==="ok"?null:new ft(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ut(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh="us-central1",Yb=/^data: (.*?)(?:\n|$)/;function Qb(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new ft("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Xb{constructor(e,n,r,s,i=Mh,o=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new Kb(e,n,r,s),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(i);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=Mh}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Jb(t,e,n){const r=Mn(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Lc(t.emulatorOrigin+"/backends"),Mc("Functions",!0))}function Zb(t,e,n){const r=s=>tO(t,e,s,{});return r.stream=(s,i)=>rO(t,e,s,i),r}function IS(t){return t.emulatorOrigin&&Mn(t.emulatorOrigin)?"include":void 0}async function eO(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:IS(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function TS(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function tO(t,e,n,r){const s=t._url(e);return nO(t,s,n,r)}async function nO(t,e,n,r){n=yc(n);const s={data:n},i=await TS(t,r),o=r.timeout||7e4,c=Qb(o),u=await Promise.race([eO(e,s,i,t.fetchImpl,t),c.promise,t.cancelAllRequests]);if(c.cancel(),!u)throw new ft("cancelled","Firebase Functions instance was deleted.");const d=_c(u.status,u.json);if(d)throw d;if(!u.json)throw new ft("internal","Response is not valid JSON object.");let m=u.json.data;if(typeof m>"u"&&(m=u.json.result),typeof m>"u")throw new ft("internal","Response is missing data field.");return{data:ui(m)}}function rO(t,e,n,r){const s=t._url(e);return sO(t,s,n,r||{})}async function sO(t,e,n,r){var f;n=yc(n);const s={data:n},i=await TS(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:IS(t)})}catch(v){if(v instanceof Error&&v.name==="AbortError"){const T=new ft("cancelled","Request was cancelled.");return{data:Promise.reject(T),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(T)}}}}}}const w=_c(0,null);return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}let c,u;const d=new Promise((v,w)=>{c=v,u=w});(f=r==null?void 0:r.signal)==null||f.addEventListener("abort",()=>{const v=new ft("cancelled","Request was cancelled.");u(v)});const m=o.body.getReader(),p=iO(m,c,u,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const v=p.getReader();return{async next(){const{value:w,done:T}=await v.read();return{value:w,done:T}},async return(){return await v.cancel(),{done:!0,value:void 0}}}}},data:d}}function iO(t,e,n,r){const s=(o,c)=>{const u=o.match(Yb);if(!u)return;const d=u[1];try{const m=JSON.parse(d);if("result"in m){e(ui(m.result));return}if("message"in m){c.enqueue(ui(m.message));return}if("error"in m){const p=_c(0,m);c.error(p),n(p);return}}catch(m){if(m instanceof ft){c.error(m),n(m);return}}},i=new TextDecoder;return new ReadableStream({start(o){let c="";return u();async function u(){if(r!=null&&r.aborted){const d=new ft("cancelled","Request was cancelled");return o.error(d),n(d),Promise.resolve()}try{const{value:d,done:m}=await t.read();if(m){c.trim()&&s(c.trim(),o),o.close();return}if(r!=null&&r.aborted){const f=new ft("cancelled","Request was cancelled");o.error(f),n(f),await t.cancel();return}c+=i.decode(d,{stream:!0});const p=c.split(`
`);c=p.pop()||"";for(const f of p)f.trim()&&s(f.trim(),o);return u()}catch(d){const m=d instanceof ft?d:_c(0,null);o.error(m),n(m)}}},cancel(){return t.cancel()}})}const Ty="@firebase/functions",ky="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO="auth-internal",aO="app-check-internal",lO="messaging-internal";function cO(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(oO),o=n.getProvider(lO),c=n.getProvider(aO);return new Xb(s,i,o,c,r)};wr(new Rn(Vp,e,"PUBLIC").setMultipleInstances(!0)),Pt(Ty,ky,t),Pt(Ty,ky,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(t=Vc(),e=Mh){const r=ca(Le(t),Vp).getImmediate({identifier:e}),s=Df("functions");return s&&dO(r,...s),r}function dO(t,e,n){Jb(Le(t),e,n)}function hO(t,e,n){return Zb(Le(t),e)}cO();function fO({user:t,onClose:e}){const[n,r]=j.useState((t==null?void 0:t.rol)||"Mesero"),[s,i]=j.useState(!1),[o,c]=j.useState(""),u=async d=>{if(d.preventDefault(),!!(t!=null&&t.uid)){i(!0),c("");try{const m=uO();await hO(m,"assignRole")({uid:t.uid,role:n,nombre:t.nombre,email:t.email}),e()}catch(m){console.error("Error al asignar rol:",m),c(m.message||"Error al asignar el rol")}finally{i(!1)}}};return a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h3",{children:"Asignar Rol de Usuario"}),a.jsx("button",{className:"modal-close",onClick:e,children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"user-info-modal",children:[a.jsx("div",{className:"user-avatar-large",children:t!=null&&t.nombre?t.nombre.charAt(0).toUpperCase():"U"}),a.jsxs("div",{className:"user-details-modal",children:[a.jsx("h4",{children:(t==null?void 0:t.nombre)||"Usuario sin nombre"}),a.jsx("p",{children:t==null?void 0:t.email}),a.jsxs("span",{className:"current-role",children:["Rol actual: ",a.jsx("strong",{children:(t==null?void 0:t.rol)||"Sin rol"})]})]})]}),a.jsxs("form",{onSubmit:u,className:"modal-form",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"role",children:"Seleccionar Nuevo Rol:"}),a.jsxs("select",{id:"role",value:n,onChange:d=>r(d.target.value),className:"form-select",required:!0,children:[a.jsx("option",{value:"Admin",children:"Administrador"}),a.jsx("option",{value:"Cocinero",children:"Cocinero"}),a.jsx("option",{value:"Mesero",children:"Mesero"}),a.jsx("option",{value:"Cajero",children:"Cajero"})]})]}),o&&a.jsx("div",{className:"error-message",children:o}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",className:"btn-secondary",onClick:e,disabled:s,children:"Cancelar"}),a.jsx("button",{type:"submit",className:"btn-primary",disabled:s,children:s?"Asignando...":"Asignar Rol"})]})]})]})]})})}function pO({onClose:t}){const[e,n]=j.useState({nombre:"",email:"",password:"",confirmPassword:"",rol:"Mesero"}),[r,s]=j.useState(!1),[i,o]=j.useState(""),c=async d=>{if(d.preventDefault(),o(""),e.password!==e.confirmPassword){o("Las contraseas no coinciden");return}if(e.password.length<6){o("La contrasea debe tener al menos 6 caracteres");return}s(!0);try{const p=(await jE(ds,e.email,e.password)).user.uid;await cs(W(G,`usuarios/${p}`),{nombre:e.nombre,email:e.email,rol:e.rol,fechaCreacion:new Date().toISOString()}),t()}catch(m){console.error("Error al crear usuario:",m),o(m.message||"Error al crear el usuario")}finally{s(!1)}},u=d=>{n(m=>({...m,[d.target.name]:d.target.value}))};return a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h3",{children:"Agregar Nuevo Usuario"}),a.jsx("button",{className:"modal-close",onClick:t,children:""})]}),a.jsxs("form",{onSubmit:c,className:"modal-form",children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"nombre",children:"Nombre Completo:"}),a.jsx("input",{type:"text",id:"nombre",name:"nombre",value:e.nombre,onChange:u,className:"form-input",required:!0,placeholder:"Ingresa el nombre completo"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Correo Electrnico:"}),a.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:u,className:"form-input",required:!0,placeholder:"usuario@ejemplo.com"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"rol",children:"Rol:"}),a.jsxs("select",{id:"rol",name:"rol",value:e.rol,onChange:u,className:"form-select",required:!0,children:[a.jsx("option",{value:"Mesero",children:"Mesero"}),a.jsx("option",{value:"Cocinero",children:"Cocinero"}),a.jsx("option",{value:"Cajero",children:"Cajero"}),a.jsx("option",{value:"Admin",children:"Administrador"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Contrasea:"}),a.jsx("input",{type:"password",id:"password",name:"password",value:e.password,onChange:u,className:"form-input",required:!0,placeholder:"Mnimo 6 caracteres",minLength:"6"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"confirmPassword",children:"Confirmar Contrasea:"}),a.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:e.confirmPassword,onChange:u,className:"form-input",required:!0,placeholder:"Repite la contrasea",minLength:"6"})]}),i&&a.jsx("div",{className:"error-message",children:i})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",className:"btn-secondary",onClick:t,disabled:r,children:"Cancelar"}),a.jsx("button",{type:"submit",className:"btn-primary",disabled:r,children:r?"Creando Usuario...":"Crear Usuario"})]})]})]})})}function mO(){const[t,e]=j.useState({}),[n,r]=j.useState(!0),[s,i]=j.useState(!1),[o,c]=j.useState(!1),[u,d]=j.useState(null);j.useEffect(()=>{const f=W(G,"usuarios"),v=je(f,w=>{e(w.val()||{}),r(!1)});return()=>v()},[]);const m=async f=>{if(window.confirm("Ests seguro de que deseas eliminar este usuario?"))try{await Zx(W(G,`usuarios/${f}`))}catch(v){console.error("Error al eliminar usuario:",v),alert("Error al eliminar usuario")}},p=f=>{d(f),i(!0)};return n?a.jsx("div",{className:"loading",children:"Cargando usuarios..."}):a.jsxs("div",{className:"panel-content",children:[a.jsxs("div",{className:"panel-header",children:[a.jsx("h3",{children:"Gestin de Usuarios"}),a.jsxs("button",{className:"btn-primary",onClick:()=>c(!0),children:[a.jsx("span",{className:"btn-icon",children:""}),"Agregar Usuario"]})]}),a.jsxs("div",{className:"panel-stats",children:[a.jsxs("div",{className:"stat-badge",children:[a.jsx("span",{className:"stat-number",children:Object.keys(t).length}),a.jsx("span",{className:"stat-label",children:"Usuarios Totales"})]}),a.jsxs("div",{className:"stat-badge",children:[a.jsx("span",{className:"stat-number",children:Object.values(t).filter(f=>f.rol==="Admin").length}),a.jsx("span",{className:"stat-label",children:"Administradores"})]}),a.jsxs("div",{className:"stat-badge",children:[a.jsx("span",{className:"stat-number",children:Object.values(t).filter(f=>f.rol==="Mesero").length}),a.jsx("span",{className:"stat-label",children:"Meseros"})]})]}),a.jsx("div",{className:"table-container",children:a.jsxs("table",{className:"data-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Usuario"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Rol"}),a.jsx("th",{children:"Estado"}),a.jsx("th",{children:"Acciones"})]})}),a.jsx("tbody",{children:Object.entries(t).map(([f,v])=>{var w;return a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{className:"user-cell",children:[a.jsx("div",{className:"user-avatar-small",children:v.nombre?v.nombre.charAt(0).toUpperCase():"U"}),a.jsx("div",{className:"user-details",children:a.jsx("strong",{children:v.nombre||"Sin nombre"})})]})}),a.jsx("td",{children:v.email}),a.jsx("td",{children:a.jsx("span",{className:`role-badge role-${(w=v.rol)==null?void 0:w.toLowerCase()}`,children:v.rol||"Sin rol"})}),a.jsx("td",{children:a.jsx("span",{className:"status-badge active",children:"Activo"})}),a.jsx("td",{children:a.jsxs("div",{className:"action-buttons",children:[a.jsx("button",{className:"btn-action btn-edit",onClick:()=>p({uid:f,...v}),title:"Asignar rol",children:""}),a.jsx("button",{className:"btn-action btn-delete",onClick:()=>m(f),title:"Eliminar usuario",children:""})]})})]},f)})})]})}),s&&a.jsx(fO,{user:u,onClose:()=>{i(!1),d(null)}}),o&&a.jsx(pO,{onClose:()=>c(!1)})]})}function gO({onClose:t}){const[e,n]=j.useState({nombre:"",descripcion:"",precio:"",categoria:"Entradas",disponible:!0,stock:""}),[r,s]=j.useState(!1),[i,o]=j.useState(""),c=async m=>{if(m.preventDefault(),o(""),!e.precio||parseFloat(e.precio)<=0){o("El precio debe ser mayor a 0");return}s(!0);try{const p=W(G,"menuItems");await Ip(p,{nombre:e.nombre,descripcion:e.descripcion,precio:parseFloat(e.precio),categoria:e.categoria,disponible:e.disponible,stock:e.stock?parseInt(e.stock):null,fechaCreacion:new Date().toISOString()}),t()}catch(p){console.error("Error al agregar platillo:",p),o(p.message||"Error al agregar el platillo")}finally{s(!1)}},u=m=>{const p=m.target.type==="checkbox"?m.target.checked:m.target.value;n(f=>({...f,[m.target.name]:p}))},d=["Entradas","Platos Fuertes","Ensaladas","Postres","Bebidas","Especiales"];return a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h3",{children:"Agregar Nuevo Platillo"}),a.jsx("button",{className:"modal-close",onClick:t,children:""})]}),a.jsxs("form",{onSubmit:c,className:"modal-form",children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"nombre",children:"Nombre del Platillo:"}),a.jsx("input",{type:"text",id:"nombre",name:"nombre",value:e.nombre,onChange:u,className:"form-input",required:!0,placeholder:"Ej: Pizza Margherita"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"descripcion",children:"Descripcin:"}),a.jsx("textarea",{id:"descripcion",name:"descripcion",value:e.descripcion,onChange:u,className:"form-textarea",rows:"3",placeholder:"Describe el platillo..."})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"precio",children:"Precio ($):"}),a.jsx("input",{type:"number",id:"precio",name:"precio",value:e.precio,onChange:u,className:"form-input",required:!0,min:"0",step:"0.01",placeholder:"0.00"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"categoria",children:"Categora:"}),a.jsx("select",{id:"categoria",name:"categoria",value:e.categoria,onChange:u,className:"form-select",required:!0,children:d.map(m=>a.jsx("option",{value:m,children:m},m))})]})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"stock",children:"Stock (opcional):"}),a.jsx("input",{type:"number",id:"stock",name:"stock",value:e.stock,onChange:u,className:"form-input",min:"0",placeholder:"Cantidad disponible"})]}),a.jsx("div",{className:"form-group",children:a.jsxs("label",{className:"checkbox-label",children:[a.jsx("input",{type:"checkbox",name:"disponible",checked:e.disponible,onChange:u,className:"form-checkbox"}),a.jsx("span",{className:"checkmark"}),"Disponible para venta"]})})]}),i&&a.jsx("div",{className:"error-message",children:i})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",className:"btn-secondary",onClick:t,disabled:r,children:"Cancelar"}),a.jsx("button",{type:"submit",className:"btn-primary",disabled:r,children:r?"Agregando...":"Agregar Platillo"})]})]})]})})}function vO(){const[t,e]=j.useState({}),[n,r]=j.useState(!0),[s,i]=j.useState(!1),[o,c]=j.useState("todos");j.useEffect(()=>{const f=W(G,"menuItems"),v=je(f,w=>{e(w.val()||{}),r(!1)});return()=>v()},[]);const u=async f=>{if(window.confirm("Ests seguro de que deseas eliminar este platillo?"))try{await Zx(W(G,`menuItems/${f}`))}catch(v){console.error("Error al eliminar platillo:",v),alert("Error al eliminar platillo")}},d=async(f,v)=>{try{alert("Funcionalidad en desarrollo")}catch(w){console.error("Error al actualizar disponibilidad:",w)}},m=Object.entries(t).filter(([f,v])=>o==="todos"?!0:o==="disponibles"?v.disponible:o==="no-disponibles"?!v.disponible:o==="categoria"?v.categoria===o:!0),p=[...new Set(Object.values(t).map(f=>f.categoria))];return n?a.jsx("div",{className:"loading",children:"Cargando men..."}):a.jsxs("div",{className:"panel-content",children:[a.jsxs("div",{className:"panel-header",children:[a.jsx("h3",{children:"Men del Restaurante"}),a.jsxs("button",{className:"btn-primary",onClick:()=>i(!0),children:[a.jsx("span",{className:"btn-icon",children:""}),"Agregar Platillo"]})]}),a.jsxs("div",{className:"panel-filters",children:[a.jsxs("div",{className:"filter-group",children:[a.jsx("label",{children:"Filtrar por:"}),a.jsxs("select",{value:o,onChange:f=>c(f.target.value),className:"filter-select",children:[a.jsx("option",{value:"todos",children:"Todos los platillos"}),a.jsx("option",{value:"disponibles",children:"Disponibles"}),a.jsx("option",{value:"no-disponibles",children:"No disponibles"}),p.map(f=>a.jsx("option",{value:f,children:f},f))]})]}),a.jsxs("div",{className:"panel-stats",children:[a.jsxs("div",{className:"stat-badge",children:[a.jsx("span",{className:"stat-number",children:Object.keys(t).length}),a.jsx("span",{className:"stat-label",children:"Total Platillos"})]}),a.jsxs("div",{className:"stat-badge",children:[a.jsx("span",{className:"stat-number",children:Object.values(t).filter(f=>f.disponible).length}),a.jsx("span",{className:"stat-label",children:"Disponibles"})]})]})]}),a.jsx("div",{className:"menu-grid",children:m.map(([f,v])=>a.jsxs("div",{className:"menu-card",children:[a.jsxs("div",{className:"menu-item-header",children:[a.jsx("div",{className:"menu-item-image",children:a.jsx("div",{className:"image-placeholder",children:""})}),a.jsx("div",{className:"menu-item-actions",children:a.jsx("button",{className:`availability-toggle ${v.disponible?"available":"unavailable"}`,onClick:()=>d(f,v.disponible),title:v.disponible?"Marcar como no disponible":"Marcar como disponible",children:v.disponible?"":""})})]}),a.jsxs("div",{className:"menu-item-info",children:[a.jsx("h4",{children:v.nombre}),a.jsx("p",{className:"menu-description",children:v.descripcion}),a.jsxs("div",{className:"menu-details",children:[a.jsxs("div",{className:"price-section",children:[a.jsxs("span",{className:"menu-price",children:["$",v.precio]}),v.stock!==void 0&&a.jsxs("span",{className:"stock-info",children:["Stock: ",v.stock]})]}),a.jsxs("div",{className:"menu-meta",children:[a.jsx("span",{className:"menu-category",children:v.categoria}),a.jsx("span",{className:`menu-status ${v.disponible?"available":"unavailable"}`,children:v.disponible?"Disponible":"No disponible"})]})]})]}),a.jsxs("div",{className:"menu-actions",children:[a.jsx("button",{className:"btn-secondary btn-sm",children:"Editar"}),a.jsx("button",{className:"btn-danger btn-sm",onClick:()=>u(f),children:"Eliminar"})]})]},f))}),m.length===0&&a.jsxs("div",{className:"empty-state",children:[a.jsx("div",{className:"empty-icon",children:""}),a.jsx("h4",{children:"No hay platillos"}),a.jsx("p",{children:"Agrega nuevos platillos al men del restaurante."}),a.jsx("button",{className:"btn-primary",onClick:()=>i(!0),children:"Agregar Primer Platillo"})]}),s&&a.jsx(gO,{onClose:()=>i(!1)})]})}function yO(){const[t,e]=j.useState({}),[n,r]=j.useState(!0),[s,i]=j.useState("todos");j.useEffect(()=>{const v=W(G,"mesas"),w=je(v,T=>{e(T.val()||{}),r(!1)});return()=>w()},[]);const o=async(v,w)=>{try{await ze(W(G,`mesas/${v}`),{estado:w})}catch(T){console.error("Error al actualizar mesa:",T),alert("Error al actualizar el estado de la mesa")}},c=v=>{switch(v){case"Disponible":return"var(--success-color)";case"Ocupada":return"var(--warning-color)";case"Reservada":return"var(--accent-color)";default:return"var(--gray-border)"}},u=v=>{switch(v){case"Disponible":return"";case"Ocupada":return"";case"Reservada":return"";default:return""}},d=v=>{switch(v){case 1:return"Piso 1";case 2:return"Piso 2";case 3:return"Piso 3";default:return`Piso ${v}`}},m=Object.entries(t).filter(([v,w])=>s==="todos"?!0:w.piso===parseInt(s));if(n)return a.jsx("div",{className:"loading",children:"Cargando mesas..."});const p=m.map(([,v])=>v),f={total:p.length,disponibles:p.filter(v=>v.estado==="Disponible").length,ocupadas:p.filter(v=>v.estado==="Ocupada").length,reservadas:p.filter(v=>v.estado==="Reservada").length,piso1:Object.values(t).filter(v=>v.piso===1).length,piso2:Object.values(t).filter(v=>v.piso===2).length,piso3:Object.values(t).filter(v=>v.piso===3).length};return a.jsxs("div",{className:"panel-content",children:[a.jsxs("div",{className:"panel-header",children:[a.jsx("h3",{children:"Gestin de Mesas"}),a.jsxs("button",{className:"btn-primary",children:[a.jsx("span",{className:"btn-icon",children:""}),"Agregar Mesa"]})]}),a.jsxs("div",{className:"panel-filters",children:[a.jsxs("div",{className:"filter-group",children:[a.jsx("label",{children:"Filtrar por piso:"}),a.jsxs("select",{value:s,onChange:v=>i(v.target.value),className:"filter-select",children:[a.jsx("option",{value:"todos",children:"Todos los Pisos"}),a.jsx("option",{value:"1",children:"Piso 1"}),a.jsx("option",{value:"2",children:"Piso 2"}),a.jsx("option",{value:"3",children:"Piso 3"})]})]}),a.jsxs("div",{className:"panel-stats",children:[a.jsxs("div",{className:"stat-badge",children:[a.jsx("span",{className:"stat-number",children:f.total}),a.jsx("span",{className:"stat-label",children:"Total Mesas"})]}),a.jsxs("div",{className:"stat-badge",children:[a.jsx("span",{className:"stat-number",style:{color:"var(--success-color)"},children:f.disponibles}),a.jsx("span",{className:"stat-label",children:"Disponibles"})]}),a.jsxs("div",{className:"stat-badge",children:[a.jsx("span",{className:"stat-number",style:{color:"var(--warning-color)"},children:f.ocupadas}),a.jsx("span",{className:"stat-label",children:"Ocupadas"})]}),a.jsxs("div",{className:"stat-badge",children:[a.jsx("span",{className:"stat-number",style:{color:"var(--accent-color)"},children:f.reservadas}),a.jsx("span",{className:"stat-label",children:"Reservadas"})]})]})]}),a.jsx("div",{className:"tables-grid",children:m.map(([v,w])=>a.jsxs("div",{className:"table-card",children:[a.jsx("div",{className:"table-status-indicator",style:{backgroundColor:c(w.estado)}}),a.jsxs("div",{className:"table-info",children:[a.jsxs("div",{className:"table-header",children:[a.jsxs("h4",{children:["Mesa ",w.numero]}),a.jsxs("span",{className:"table-status",children:[u(w.estado)," ",w.estado]})]}),a.jsxs("div",{className:"table-details",children:[a.jsxs("div",{className:"table-meta",children:[a.jsx("span",{className:"table-floor",children:d(w.piso)}),a.jsx("span",{className:"table-location",children:w.ubicacion})]}),a.jsxs("div",{className:"table-capacity",children:[a.jsx("span",{className:"detail-label",children:"Capacidad:"}),a.jsxs("span",{className:"detail-value",children:[w.capacidad," personas"]})]})]})]}),a.jsxs("div",{className:"table-actions",children:[a.jsxs("select",{value:w.estado||"Disponible",onChange:T=>o(v,T.target.value),className:"status-select",style:{borderLeftColor:c(w.estado)},children:[a.jsx("option",{value:"Disponible",children:"Disponible"}),a.jsx("option",{value:"Ocupada",children:"Ocupada"}),a.jsx("option",{value:"Reservada",children:"Reservada"})]}),a.jsxs("div",{className:"action-buttons",children:[a.jsx("button",{className:"btn-action btn-edit",title:"Editar mesa",children:""}),a.jsx("button",{className:"btn-action btn-delete",title:"Eliminar mesa",children:""})]})]})]},v))}),m.length===0&&a.jsxs("div",{className:"empty-state",children:[a.jsx("div",{className:"empty-icon",children:""}),a.jsx("h4",{children:"No hay mesas en este piso"}),a.jsx("p",{children:"Selecciona otro piso o agrega nuevas mesas."}),a.jsx("button",{className:"btn-primary",children:"Agregar Nueva Mesa"})]})]})}function _O(){const[t,e]=j.useState({}),[n,r]=j.useState(!0),[s,i]=j.useState("activas");j.useEffect(()=>{const p=W(G,"ordenes"),f=je(p,v=>{e(v.val()||{}),r(!1)});return()=>f()},[]);const o=async(p,f)=>{try{await ze(W(G,`ordenes/${p}`),{estado:f})}catch(v){console.error("Error al actualizar orden:",v),alert("Error al actualizar el estado de la orden")}},c=Object.entries(t).filter(([p,f])=>s==="activas"?f.estado&&!["Pagada","Cancelada"].includes(f.estado):s==="todas"?!0:f.estado===s),u=p=>{switch(p){case"Pendiente":return"var(--warning-color)";case"En Preparacion":return"var(--accent-color)";case"Lista":return"var(--success-color)";case"Servida":return"#2196F3";case"Pagada":return"var(--text-light)";case"Cancelada":return"var(--danger-color)";default:return"var(--gray-border)"}},d=p=>p?new Date(p).toLocaleString("es-ES"):"--";if(n)return a.jsx("div",{className:"loading",children:"Cargando rdenes..."});const m={total:Object.keys(t).length,activas:Object.values(t).filter(p=>p.estado&&!["Pagada","Cancelada"].includes(p.estado)).length,pendientes:Object.values(t).filter(p=>p.estado==="Pendiente").length,preparacion:Object.values(t).filter(p=>p.estado==="En Preparacion").length};return a.jsxs("div",{className:"panel-content",children:[a.jsxs("div",{className:"panel-header",children:[a.jsx("h3",{children:"rdenes Activas"}),a.jsx("div",{className:"header-actions",children:a.jsxs("span",{className:"last-update",children:["Actualizado: ",new Date().toLocaleTimeString()]})})]}),a.jsxs("div",{className:"panel-filters",children:[a.jsxs("div",{className:"filter-group",children:[a.jsx("label",{children:"Filtrar por estado:"}),a.jsxs("select",{value:s,onChange:p=>i(p.target.value),className:"filter-select",children:[a.jsx("option",{value:"activas",children:"rdenes Activas"}),a.jsx("option",{value:"todas",children:"Todas las rdenes"}),a.jsx("option",{value:"Pendiente",children:"Pendientes"}),a.jsx("option",{value:"En Preparacion",children:"En Preparacin"}),a.jsx("option",{value:"Lista",children:"Listas"}),a.jsx("option",{value:"Servida",children:"Servidas"}),a.jsx("option",{value:"Pagada",children:"Pagadas"}),a.jsx("option",{value:"Cancelada",children:"Canceladas"})]})]}),a.jsxs("div",{className:"panel-stats",children:[a.jsxs("div",{className:"stat-badge",children:[a.jsx("span",{className:"stat-number",children:m.total}),a.jsx("span",{className:"stat-label",children:"Total rdenes"})]}),a.jsxs("div",{className:"stat-badge",children:[a.jsx("span",{className:"stat-number",style:{color:"var(--warning-color)"},children:m.activas}),a.jsx("span",{className:"stat-label",children:"Activas"})]}),a.jsxs("div",{className:"stat-badge",children:[a.jsx("span",{className:"stat-number",style:{color:"var(--accent-color)"},children:m.pendientes}),a.jsx("span",{className:"stat-label",children:"Pendientes"})]})]})]}),a.jsx("div",{className:"orders-list",children:c.map(([p,f])=>a.jsxs("div",{className:"order-card",children:[a.jsx("div",{className:"order-status-bar",style:{backgroundColor:u(f.estado)}}),a.jsxs("div",{className:"order-header",children:[a.jsxs("div",{className:"order-info",children:[a.jsxs("h4",{children:["Orden #",p.slice(-6)]}),a.jsxs("span",{className:"order-meta",children:["Mesa: ",f.idMesa,"  ",d(f.fechaCreacion)]})]}),a.jsx("div",{className:"order-total",children:a.jsxs("strong",{children:["$",f.total||"0.00"]})})]}),a.jsxs("div",{className:"order-details",children:[a.jsxs("div",{className:"order-items",children:[a.jsxs("span",{className:"items-count",children:[f.items?Object.keys(f.items).length:0," items"]}),f.notas&&a.jsxs("div",{className:"order-notes",children:[a.jsx("strong",{children:"Notas:"})," ",f.notas]})]}),a.jsxs("div",{className:"order-actions",children:[a.jsxs("select",{value:f.estado||"Pendiente",onChange:v=>o(p,v.target.value),className:"status-select",style:{borderLeftColor:u(f.estado)},children:[a.jsx("option",{value:"Pendiente",children:"Pendiente"}),a.jsx("option",{value:"En Preparacion",children:"En Preparacin"}),a.jsx("option",{value:"Lista",children:"Lista"}),a.jsx("option",{value:"Servida",children:"Servida"}),a.jsx("option",{value:"Pagada",children:"Pagada"}),a.jsx("option",{value:"Cancelada",children:"Cancelada"})]}),a.jsx("button",{className:"btn-secondary btn-sm",children:"Ver Detalles"})]})]})]},p))}),c.length===0&&a.jsxs("div",{className:"empty-state",children:[a.jsx("div",{className:"empty-icon",children:""}),a.jsx("h4",{children:"No hay rdenes"}),a.jsx("p",{children:s==="activas"?"No hay rdenes activas en este momento.":"No se encontraron rdenes con el filtro aplicado."})]})]})}function wO(){const[t,e]=j.useState({}),[n,r]=j.useState(!0),[s,i]=j.useState("hoy");j.useEffect(()=>{const u=W(G,"ordenes"),d=je(u,m=>{e(m.val()||{}),r(!1)});return()=>d()},[]);const c=(()=>{const u=new Date().toDateString(),d=Object.values(t),m=d.filter(R=>R.fechaCreacion?new Date(R.fechaCreacion).toDateString()===u:!1),p=d.filter(R=>R.estado==="Pagada"),f=m.filter(R=>R.estado==="Pagada"),v=p.reduce((R,E)=>R+(E.total||0),0),w=f.reduce((R,E)=>R+(E.total||0),0),T=p.length>0?v/p.length:0;return{totalOrders:d.length,todayOrders:m.length,totalRevenue:v,todayRevenue:w,avgOrderValue:T,completionRate:d.length>0?p.length/d.length*100:0}})();return n?a.jsx("div",{className:"loading",children:"Cargando reportes..."}):a.jsxs("div",{className:"panel-content",children:[a.jsxs("div",{className:"panel-header",children:[a.jsx("h3",{children:"Reportes y Anlisis"}),a.jsx("div",{className:"header-actions",children:a.jsxs("select",{value:s,onChange:u=>i(u.target.value),className:"filter-select",children:[a.jsx("option",{value:"hoy",children:"Hoy"}),a.jsx("option",{value:"semana",children:"Esta Semana"}),a.jsx("option",{value:"mes",children:"Este Mes"}),a.jsx("option",{value:"personalizado",children:"Personalizado"})]})})]}),a.jsxs("div",{className:"metrics-grid",children:[a.jsxs("div",{className:"metric-card primary",children:[a.jsx("div",{className:"metric-icon",children:""}),a.jsxs("div",{className:"metric-info",children:[a.jsxs("h3",{children:["$",c.todayRevenue.toFixed(2)]}),a.jsx("p",{children:"Ventas Hoy"}),a.jsx("span",{className:"metric-trend positive",children:"+12% vs ayer"})]})]}),a.jsxs("div",{className:"metric-card",children:[a.jsx("div",{className:"metric-icon",children:""}),a.jsxs("div",{className:"metric-info",children:[a.jsx("h3",{children:c.todayOrders}),a.jsx("p",{children:"rdenes Hoy"}),a.jsx("span",{className:"metric-trend positive",children:"+5% vs ayer"})]})]}),a.jsxs("div",{className:"metric-card",children:[a.jsx("div",{className:"metric-icon",children:""}),a.jsxs("div",{className:"metric-info",children:[a.jsxs("h3",{children:["$",c.avgOrderValue.toFixed(2)]}),a.jsx("p",{children:"Ticket Promedio"}),a.jsx("span",{className:"metric-trend neutral",children:"0% vs ayer"})]})]}),a.jsxs("div",{className:"metric-card",children:[a.jsx("div",{className:"metric-icon",children:""}),a.jsxs("div",{className:"metric-info",children:[a.jsxs("h3",{children:[c.completionRate.toFixed(1),"%"]}),a.jsx("p",{children:"Tasa de Finalizacin"}),a.jsx("span",{className:"metric-trend positive",children:"+2% vs ayer"})]})]})]}),a.jsxs("div",{className:"reports-grid",children:[a.jsxs("div",{className:"report-card",children:[a.jsx("h4",{children:"Ventas por Hora"}),a.jsxs("div",{className:"chart-placeholder",children:[a.jsx("div",{className:"chart-bar",style:{height:"80%"}}),a.jsx("div",{className:"chart-bar",style:{height:"60%"}}),a.jsx("div",{className:"chart-bar",style:{height:"90%"}}),a.jsx("div",{className:"chart-bar",style:{height:"70%"}}),a.jsx("div",{className:"chart-bar",style:{height:"95%"}}),a.jsx("div",{className:"chart-bar",style:{height:"85%"}})]})]}),a.jsxs("div",{className:"report-card",children:[a.jsx("h4",{children:"Platillos Ms Populares"}),a.jsxs("div",{className:"popular-items",children:[a.jsxs("div",{className:"popular-item",children:[a.jsx("span",{className:"item-name",children:"Pizza Margherita"}),a.jsx("span",{className:"item-count",children:"45 ventas"})]}),a.jsxs("div",{className:"popular-item",children:[a.jsx("span",{className:"item-name",children:"Lasagna"}),a.jsx("span",{className:"item-count",children:"38 ventas"})]}),a.jsxs("div",{className:"popular-item",children:[a.jsx("span",{className:"item-name",children:"Tiramis"}),a.jsx("span",{className:"item-count",children:"32 ventas"})]}),a.jsxs("div",{className:"popular-item",children:[a.jsx("span",{className:"item-name",children:"Risotto"}),a.jsx("span",{className:"item-count",children:"28 ventas"})]})]})]}),a.jsxs("div",{className:"report-card",children:[a.jsx("h4",{children:"Resumen del Da"}),a.jsxs("div",{className:"summary-stats",children:[a.jsxs("div",{className:"summary-item",children:[a.jsx("span",{children:"rdenes Totales:"}),a.jsx("strong",{children:c.todayOrders})]}),a.jsxs("div",{className:"summary-item",children:[a.jsx("span",{children:"Ventas Totales:"}),a.jsxs("strong",{children:["$",c.todayRevenue.toFixed(2)]})]}),a.jsxs("div",{className:"summary-item",children:[a.jsx("span",{children:"Mesas Ocupadas:"}),a.jsx("strong",{children:"8/15"})]}),a.jsxs("div",{className:"summary-item",children:[a.jsx("span",{children:"Tiempo Promedio:"}),a.jsx("strong",{children:"45 min"})]})]})]}),a.jsxs("div",{className:"report-card",children:[a.jsx("h4",{children:"Acciones Rpidas"}),a.jsxs("div",{className:"quick-report-actions",children:[a.jsx("button",{className:"btn-secondary",children:"Exportar Reporte"}),a.jsx("button",{className:"btn-secondary",children:"Ver Detalles Completos"}),a.jsx("button",{className:"btn-secondary",children:"Generar PDF"})]})]})]})]})}function EO(){const{user:t,loading:e,logout:n}=xa(),[r,s]=j.useState("inicio"),[i,o]=j.useState({usuarios:0,mesas:0,ordenesActivas:0,menuItems:0,reservasHoy:0});j.useEffect(()=>{const d=W(G,"usuarios"),m=W(G,"mesas"),p=W(G,"ordenes"),f=W(G,"menuItems"),v=W(G,"reservas"),w=je(d,C=>{const O=C.val()||{};o(L=>({...L,usuarios:Object.keys(O).length}))}),T=je(m,C=>{const O=C.val()||{};o(L=>({...L,mesas:Object.keys(O).length}))}),R=je(p,C=>{const O=C.val()||{},L=Object.values(O).filter(M=>M.estado&&!["Pagada","Cancelada"].includes(M.estado)).length;o(M=>({...M,ordenesActivas:L}))}),E=je(f,C=>{const O=C.val()||{};o(L=>({...L,menuItems:Object.keys(O).length}))}),S=je(v,C=>{const O=C.val()||{},L=new Date().toDateString(),M=Object.values(O).filter(N=>N.fechaHora?new Date(N.fechaHora).toDateString()===L:!1).length;o(N=>({...N,reservasHoy:M}))});return()=>{w(),T(),R(),E(),S()}},[]);const c=async()=>{try{await n()}catch(d){console.error("Error al cerrar sesin:",d)}},u=()=>{switch(r){case"usuarios":return a.jsx(mO,{});case"menu":return a.jsx(vO,{});case"mesas":return a.jsx(yO,{});case"ordenes":return a.jsx(_O,{});case"reportes":return a.jsx(wO,{});default:return a.jsx(xO,{stats:i,onNavigate:s})}};return e?a.jsxs("div",{className:"loading-screen",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{children:"Cargando panel de administracin..."})]}):t?a.jsxs("div",{className:"admin-dashboard",children:[a.jsxs("div",{className:"admin-sidebar",children:[a.jsxs("div",{className:"sidebar-header",children:[a.jsx("h1",{children:"CASA MIA"}),a.jsx("p",{children:"Sistema Administrativo"})]}),a.jsxs("nav",{className:"sidebar-nav",children:[a.jsxs("button",{className:`nav-item ${r==="inicio"?"active":""}`,onClick:()=>s("inicio"),children:[a.jsx("span",{className:"nav-icon",children:""}),"Inicio"]}),a.jsxs("button",{className:`nav-item ${r==="usuarios"?"active":""}`,onClick:()=>s("usuarios"),children:[a.jsx("span",{className:"nav-icon",children:""}),"Gestin de Usuarios"]}),a.jsxs("button",{className:`nav-item ${r==="menu"?"active":""}`,onClick:()=>s("menu"),children:[a.jsx("span",{className:"nav-icon",children:""}),"Men del Restaurante"]}),a.jsxs("button",{className:`nav-item ${r==="mesas"?"active":""}`,onClick:()=>s("mesas"),children:[a.jsx("span",{className:"nav-icon",children:""}),"Gestin de Mesas"]}),a.jsxs("button",{className:`nav-item ${r==="ordenes"?"active":""}`,onClick:()=>s("ordenes"),children:[a.jsx("span",{className:"nav-icon",children:""}),"rdenes Activas"]}),a.jsxs("button",{className:`nav-item ${r==="reportes"?"active":""}`,onClick:()=>s("reportes"),children:[a.jsx("span",{className:"nav-icon",children:""}),"Reportes y Anlisis"]})]}),a.jsxs("div",{className:"sidebar-footer",children:[t&&a.jsxs("div",{className:"user-info",children:[a.jsx("div",{className:"user-avatar",children:t.nombre?t.nombre.charAt(0).toUpperCase():"A"}),a.jsxs("div",{className:"user-details",children:[a.jsx("strong",{children:t.nombre||"Administrador"}),a.jsx("span",{children:t.rol||"Admin"})]})]}),a.jsx("button",{onClick:c,className:"logout-btn",children:"Cerrar Sesin"})]})]}),a.jsxs("div",{className:"admin-main",children:[a.jsxs("header",{className:"admin-header",children:[a.jsxs("h2",{children:[r==="inicio"&&"Panel de Control",r==="usuarios"&&"Gestin de Usuarios",r==="menu"&&"Men del Restaurante",r==="mesas"&&"Gestin de Mesas",r==="ordenes"&&"rdenes Activas",r==="reportes"&&"Reportes y Anlisis"]}),a.jsx("div",{className:"header-actions",children:a.jsx("div",{className:"current-time",children:new Date().toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})})]}),a.jsx("main",{className:"admin-content",children:u()})]})]}):a.jsxs("div",{className:"error-screen",children:[a.jsx("h2",{children:"Acceso Denegado"}),a.jsx("p",{children:"No tienes permisos para acceder al panel de administracin."}),a.jsx("button",{onClick:()=>window.location.href="/",className:"btn-primary",children:"Volver al Inicio"})]})}function xO({stats:t,onNavigate:e}){return a.jsxs("div",{className:"dashboard-inicio",children:[a.jsxs("div",{className:"welcome-banner",children:[a.jsx("h1",{children:"Bienvenido al Panel de Control"}),a.jsx("p",{children:"Gestiona todas las operaciones del restaurante desde un solo lugar"})]}),a.jsxs("div",{className:"stats-grid",children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:""}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:t.usuarios}),a.jsx("p",{children:"USUARIOS"})]}),a.jsx("button",{className:"stat-action",onClick:()=>e("usuarios"),children:"Gestionar"})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:""}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:t.mesas}),a.jsx("p",{children:"MESAS"})]}),a.jsx("button",{className:"stat-action",onClick:()=>e("mesas"),children:"Gestionar"})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:""}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:t.ordenesActivas}),a.jsx("p",{children:"RDENES ACTIVAS"})]}),a.jsx("button",{className:"stat-action",onClick:()=>e("ordenes"),children:"Ver"})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:""}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:t.menuItems}),a.jsx("p",{children:"PLATILLOS"})]}),a.jsx("button",{className:"stat-action",onClick:()=>e("menu"),children:"Gestionar"})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:""}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:t.reservasHoy}),a.jsx("p",{children:"RESERVAS HOY"})]}),a.jsx("button",{className:"stat-action",children:"Ver"})]})]}),a.jsxs("div",{className:"quick-actions",children:[a.jsx("h3",{children:"Acciones Rpidas"}),a.jsxs("div",{className:"actions-grid",children:[a.jsxs("button",{className:"action-card",onClick:()=>e("usuarios"),children:[a.jsx("span",{className:"action-icon",children:""}),a.jsx("span",{children:"Agregar Usuario"})]}),a.jsxs("button",{className:"action-card",onClick:()=>e("menu"),children:[a.jsx("span",{className:"action-icon",children:""}),a.jsx("span",{children:"Nuevo Platillo"})]}),a.jsxs("button",{className:"action-card",onClick:()=>e("mesas"),children:[a.jsx("span",{className:"action-icon",children:""}),a.jsx("span",{children:"Estado de Mesas"})]}),a.jsxs("button",{className:"action-card",onClick:()=>e("reportes"),children:[a.jsx("span",{className:"action-icon",children:""}),a.jsx("span",{children:"Ver Reportes"})]})]})]}),a.jsxs("div",{className:"restaurant-status",children:[a.jsx("h3",{children:"Estado del Restaurante"}),a.jsxs("div",{className:"status-grid",children:[a.jsxs("div",{className:"status-item",children:[a.jsx("div",{className:"status-indicator available"}),a.jsxs("span",{children:["Mesas Disponibles: ",Math.floor(t.mesas*.6)]})]}),a.jsxs("div",{className:"status-item",children:[a.jsx("div",{className:"status-indicator occupied"}),a.jsxs("span",{children:["Mesas Ocupadas: ",Math.floor(t.mesas*.3)]})]}),a.jsxs("div",{className:"status-item",children:[a.jsx("div",{className:"status-indicator reserved"}),a.jsxs("span",{children:["Reservadas: ",Math.floor(t.mesas*.1)]})]})]})]})]})}function SO({children:t}){const{user:e,loading:n}=xa();return n?a.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"Cargando..."}):!e||e.rol!=="Admin"?a.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"red"},children:[a.jsx("h2",{children:"Acceso denegado"}),a.jsx("p",{children:"Solo administradores pueden acceder a esta pgina."})]}):t}function CO({onTableSelect:t,onOrderPayment:e,currentOrders:n}){const[r,s]=j.useState({}),[i,o]=j.useState("todos"),[c,u]=j.useState(!0);j.useEffect(()=>{const v=W(G,"mesas"),w=je(v,T=>{s(T.val()||{}),u(!1)});return()=>w()},[]);const d=v=>Object.values(n).find(w=>w.idMesa===v&&w.estado!=="Pagada"&&w.estado!=="Cancelada"),m=v=>{switch(v){case"Disponible":return"var(--success-color)";case"Ocupada":return"var(--warning-color)";case"Reservada":return"var(--info-color)";default:return"var(--gray-border)"}},p=v=>{switch(v){case"Disponible":return"";case"Ocupada":return"";case"Reservada":return"";default:return""}},f=Object.entries(r).filter(([v,w])=>i==="todos"?!0:w.piso===parseInt(i));return c?a.jsx("div",{className:"loading",children:"Cargando mesas..."}):a.jsxs("div",{className:"tables-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h2",{children:"Gestin de Mesas"}),a.jsx("div",{className:"filters",children:a.jsxs("select",{value:i,onChange:v=>o(v.target.value),className:"filter-select",children:[a.jsx("option",{value:"todos",children:"Todos los Pisos"}),a.jsx("option",{value:"1",children:"Piso 1"}),a.jsx("option",{value:"2",children:"Piso 2"}),a.jsx("option",{value:"3",children:"Piso 3"})]})})]}),a.jsx("div",{className:"tables-grid",children:f.map(([v,w])=>{var S,C;const T=d(v),R=w.estado==="Disponible",E=T&&!["Pagada","Cancelada"].includes(T.estado);return a.jsxs("div",{className:`table-card ${R?"":"occupied"}`,style:{borderLeftColor:m(w.estado)},children:[a.jsxs("div",{className:"table-header",children:[a.jsxs("h3",{children:["Mesa ",w.numero]}),a.jsxs("span",{className:"table-status",children:[p(w.estado)," ",w.estado]})]}),a.jsxs("div",{className:"table-info",children:[a.jsxs("div",{className:"table-meta",children:[a.jsxs("span",{className:"table-floor",children:["Piso ",w.piso]}),a.jsx("span",{className:"table-location",children:w.ubicacion})]}),a.jsx("div",{className:"table-capacity",children:a.jsxs("span",{children:[w.capacidad," personas"]})})]}),T&&a.jsxs("div",{className:"table-order-info",children:[a.jsxs("div",{className:"order-status",children:[a.jsxs("strong",{children:["Orden #",(S=T.id)==null?void 0:S.slice(-6)]}),a.jsx("span",{className:`status-badge status-${(C=T.estado)==null?void 0:C.toLowerCase()}`,children:T.estado})]}),a.jsxs("div",{className:"order-total",children:["Total: S/ ",T.total||"0.00"]})]}),a.jsx("div",{className:"table-actions",children:R?a.jsx("button",{className:"btn-primary",onClick:()=>t({id:v,...w}),children:"Nueva Orden"}):E?a.jsxs("div",{className:"action-buttons",children:[a.jsx("button",{className:"btn-success",onClick:()=>e(T),children:"Cobrar"}),a.jsx("button",{className:"btn-secondary",onClick:()=>t({id:v,...w,order:T}),children:"Ver Orden"})]}):a.jsx("span",{className:"table-reserved",children:"Reservada"})})]},v)})})]})}function NO({table:t,meseroId:e,onClose:n,onAddNotification:r}){const[s,i]=j.useState({}),[o,c]=j.useState([]),[u,d]=j.useState(""),[m,p]=j.useState(!1),[f,v]=j.useState("todos"),[w,T]=j.useState(!1);j.useEffect(()=>{const y=W(G,"menuItems"),I=je(y,P=>{i(P.val()||{})});return()=>I()},[]);const R=Object.entries(s).filter(([y,I])=>f==="todos"?!0:I.categoria===f&&I.disponible),E=[...new Set(Object.values(s).map(y=>y.categoria))],S=y=>{const I=o.find(P=>P.id===y.id);c(I?o.map(P=>P.id===y.id?{...P,quantity:P.quantity+1}:P):[...o,{id:y.id,nombre:y.nombre,precio:y.precio,quantity:1}])},C=y=>{c(o.filter(I=>I.id!==y))},O=(y,I)=>{if(I<1){C(y);return}c(o.map(P=>P.id===y?{...P,quantity:I}:P))},L=o.reduce((y,I)=>y+I.precio*I.quantity,0),M=async(y=null)=>{if(o.length===0){alert("Agrega al menos un item al pedido");return}p(!0);try{const I=W(G,"ordenes"),P=Ip(I);let A="Pendiente",k=null,Te=null;y&&y!=="efectivo"&&(A="En Preparacion",k=new Date().toISOString(),Te=y.referencia);const Ot={id:P.key,idMesa:t.id,idMesero:e,estado:A,fechaCreacion:new Date().toISOString(),fechaPago:k,total:L,notas:u,metodoPago:(y==null?void 0:y.tipo)||null,montoRecibido:(y==null?void 0:y.montoRecibido)||null,vuelto:(y==null?void 0:y.vuelto)||0,referenciaPago:Te};await cs(P,Ot);for(const Dt of o){const Rr=W(G,`ordenes/${P.key}/items/${Dt.id}`);await cs(Rr,{idMenuItem:Dt.id,nombre:Dt.nombre,cantidad:Dt.quantity,precioUnitario:Dt.precio,estado:!1})}await ze(W(G,`mesas/${t.id}`),{estado:"Ocupada"}),r(y&&y!=="efectivo"?` Orden creada y pagada con ${y.tipo}. Mesa ${t.numero}`:` Orden creada. Lleva el pago a caja. Mesa ${t.numero}`,"success"),T(!1),n()}catch(I){console.error("Error al crear orden:",I),r(" Error al crear la orden","error")}finally{p(!1)}},N=()=>{M()},x=y=>{M(y)};return a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal-content large-modal",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h3",{children:["Nueva Orden - Mesa ",t.numero]}),a.jsx("button",{className:"modal-close",onClick:n,children:""})]}),a.jsx("div",{className:"modal-body order-modal-body",children:w?a.jsx(IO,{total:L,onCashPayment:N,onDigitalPayment:x,onCancel:()=>T(!1),loading:m}):a.jsxs("div",{className:"order-layout",children:[a.jsxs("div",{className:"menu-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h4",{children:"Men"}),a.jsxs("select",{value:f,onChange:y=>v(y.target.value),className:"filter-select",children:[a.jsx("option",{value:"todos",children:"Todas las categoras"}),E.map(y=>a.jsx("option",{value:y,children:y},y))]})]}),a.jsx("div",{className:"menu-grid",children:R.map(([y,I])=>a.jsxs("div",{className:"menu-item-card",children:[a.jsxs("div",{className:"menu-item-info",children:[a.jsx("h5",{children:I.nombre}),a.jsx("p",{className:"item-description",children:I.descripcion}),a.jsxs("div",{className:"item-price",children:["$",I.precio]})]}),a.jsx("button",{className:"btn-primary btn-sm",onClick:()=>S({id:y,...I}),disabled:!I.disponible,children:I.disponible?"Agregar":"No disponible"})]},y))})]}),a.jsxs("div",{className:"cart-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h4",{children:"Pedido Actual"}),a.jsxs("span",{className:"cart-total",children:["Total: $",L.toFixed(2)]})]}),a.jsx("div",{className:"cart-items",children:o.length===0?a.jsx("div",{className:"empty-cart",children:"El pedido est vaco"}):o.map(y=>a.jsxs("div",{className:"cart-item",children:[a.jsxs("div",{className:"cart-item-info",children:[a.jsx("strong",{children:y.nombre}),a.jsxs("span",{children:["$",y.precio," c/u"]})]}),a.jsxs("div",{className:"cart-item-controls",children:[a.jsx("button",{className:"quantity-btn",onClick:()=>O(y.id,y.quantity-1),children:"-"}),a.jsx("span",{className:"quantity",children:y.quantity}),a.jsx("button",{className:"quantity-btn",onClick:()=>O(y.id,y.quantity+1),children:"+"}),a.jsx("button",{className:"remove-btn",onClick:()=>C(y.id),children:""})]})]},y.id))}),a.jsxs("div",{className:"order-notes",children:[a.jsx("label",{children:"Notas para la orden:"}),a.jsx("textarea",{value:u,onChange:y=>d(y.target.value),placeholder:"Ej: Sin cebolla, bien cocido, etc.",rows:"3",className:"notes-textarea"})]}),a.jsxs("div",{className:"order-actions",children:[a.jsx("button",{className:"btn-secondary",onClick:n,disabled:m,children:"Cancelar"}),a.jsx("button",{className:"btn-primary",onClick:()=>T(!0),disabled:m||o.length===0,children:m?"Procesando...":"Seleccionar Pago"})]})]})]})})]})})}function IO({total:t,onCashPayment:e,onDigitalPayment:n,onCancel:r,loading:s}){const[i,o]=j.useState("efectivo"),[c,u]=j.useState(""),d=()=>{if(i==="efectivo")e();else{if(!c){alert("Ingresa la referencia del pago");return}n({tipo:i,montoRecibido:t,vuelto:0,referencia:c})}};return a.jsxs("div",{className:"payment-step",children:[a.jsx("h4",{children:"Seleccionar Mtodo de Pago"}),a.jsx("div",{className:"payment-summary",children:a.jsxs("div",{className:"summary-item",children:[a.jsx("span",{children:"Total a Pagar:"}),a.jsxs("strong",{children:["$",t.toFixed(2)]})]})}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"paymentMethod",children:"Mtodo de Pago:"}),a.jsxs("select",{id:"paymentMethod",value:i,onChange:m=>{o(m.target.value),u("")},className:"form-select",children:[a.jsx("option",{value:"efectivo",children:"Efectivo"}),a.jsx("option",{value:"tarjeta",children:"Tarjeta de Crdito/Dbito"}),a.jsx("option",{value:"yape",children:"Yape"}),a.jsx("option",{value:"plin",children:"Plin"}),a.jsx("option",{value:"transferencia",children:"Transferencia"})]})]}),i!=="efectivo"&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"reference",children:i==="tarjeta"?"Nmero de Autorizacin":i==="yape"?"Cdigo de Yape":i==="plin"?"Cdigo de Plin":"Nmero de Operacin"}),a.jsx("input",{type:"text",id:"reference",value:c,onChange:m=>u(m.target.value),className:"form-input",placeholder:"Ingresa la referencia del pago"})]}),a.jsx("div",{className:"payment-instructions",children:i==="efectivo"?a.jsxs(a.Fragment,{children:[a.jsxs("p",{children:[" ",a.jsx("strong",{children:"Proceso Efectivo:"})]}),a.jsx("p",{children:'1. Crea la orden en estado "Pendiente"'}),a.jsx("p",{children:"2. Lleva el dinero a caja para validacin"}),a.jsx("p",{children:'3. Caja cambiar el estado a "En Preparacin"'}),a.jsx("p",{className:"warning-text",children:" La orden NO ir a cocina hasta que caja valide el pago"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("p",{children:[" ",a.jsxs("strong",{children:["Proceso ",i.toUpperCase(),":"]})]}),a.jsx("p",{children:"1. Realiza el cobro con tu POS/app"}),a.jsx("p",{children:"2. Ingresa la referencia del comprobante"}),a.jsx("p",{children:'3. La orden ir DIRECTAMENTE a "En Preparacin"'}),a.jsx("p",{className:"success-text",children:" Cocina recibir la orden inmediatamente"})]})}),a.jsxs("div",{className:"payment-actions",children:[a.jsx("button",{className:"btn-secondary",onClick:r,disabled:s,children:"Volver"}),a.jsx("button",{className:i==="efectivo"?"btn-warning":"btn-success",onClick:d,disabled:s||i!=="efectivo"&&!c,children:s?"Procesando...":i==="efectivo"?"Crear Orden Pendiente":`Confirmar Pago (${i})`})]})]})}function TO({orders:t,currentUserId:e,onAddNotification:n}){const[r,s]=j.useState("activas"),i=Object.entries(t).filter(([p,f])=>{if(f.idMesero!==e)return!1;switch(r){case"activas":return["Pendiente","En Preparacion","Lista","Servida"].includes(f.estado);case"pendientes":return f.estado==="Pendiente";case"preparacion":return f.estado==="En Preparacion";case"listas":return f.estado==="Lista";case"servidas":return f.estado==="Servida";case"todas":return!0;default:return f.estado===r}}).sort(([,p],[,f])=>new Date(f.fechaCreacion)-new Date(p.fechaCreacion)),o=async(p,f)=>{try{const v={estado:f};f==="Servida"&&(v.fechaServida=new Date().toISOString()),await ze(W(G,`ordenes/${p}`),v),n(` Orden ${p.slice(-6)} actualizada a: ${f}`,"success")}catch(v){console.error("Error al actualizar orden:",v),n(" Error al actualizar la orden","error")}},c=async p=>{if(window.confirm("Ests seguro de que deseas cancelar esta orden?"))try{const f=t[p],v={estado:"Cancelada",fechaCancelacion:new Date().toISOString()};f.estado!=="Pendiente"&&(v.reembolsado=!0),await ze(W(G,`ordenes/${p}`),v),f&&f.idMesa&&await ze(W(G,`mesas/${f.idMesa}`),{estado:"Disponible"}),n(" Orden cancelada correctamente","success")}catch(f){console.error("Error al cancelar orden:",f),n(" Error al cancelar la orden","error")}},u=p=>{switch(p){case"Pendiente":return"var(--warning-color)";case"En Preparacion":return"var(--info-color)";case"Lista":return"var(--success-color)";case"Servida":return"#2196F3";case"Pagada":return"var(--text-light)";case"Cancelada":return"var(--danger-color)";default:return"var(--gray-border)"}},d=p=>{switch(p.estado){case"Pendiente":return a.jsxs("div",{className:"pending-actions",children:[a.jsx("span",{className:"pending-warning",children:" Esperando validacin de caja"}),a.jsx("button",{className:"btn-danger btn-sm",onClick:()=>c(p.id),children:"Cancelar Orden"})]});case"En Preparacion":return a.jsx("span",{className:"status-info",children:" En cocina..."});case"Lista":return a.jsx("button",{className:"btn-success",onClick:()=>o(p.id,"Servida"),children:"Marcar como Servida"});case"Servida":return a.jsx("div",{className:"served-actions",children:a.jsxs("span",{className:"served-time",children:["Servida: ",new Date(p.fechaServida).toLocaleTimeString("es-ES")]})});default:return null}},m=p=>p.estado==="Pendiente"?a.jsx("span",{className:"payment-status pending",children:" Pendiente de pago"}):p.metodoPago?a.jsxs("span",{className:"payment-status paid",children:[" Pagado con ",p.metodoPago]}):null;return a.jsxs("div",{className:"orders-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h2",{children:"Mis rdenes"}),a.jsx("div",{className:"filters",children:a.jsxs("select",{value:r,onChange:p=>s(p.target.value),className:"filter-select",children:[a.jsx("option",{value:"activas",children:"rdenes Activas"}),a.jsx("option",{value:"pendientes",children:"Pendientes de Pago"}),a.jsx("option",{value:"En Preparacion",children:"En Preparacin"}),a.jsx("option",{value:"Lista",children:"Listas para Servir"}),a.jsx("option",{value:"Servida",children:"Servidas"}),a.jsx("option",{value:"todas",children:"Todas"})]})})]}),a.jsx("div",{className:"orders-list",children:i.map(([p,f])=>{var v;return a.jsxs("div",{className:"order-card",children:[a.jsx("div",{className:"order-status-bar",style:{backgroundColor:u(f.estado)}}),a.jsxs("div",{className:"order-content",children:[a.jsxs("div",{className:"order-header",children:[a.jsxs("div",{className:"order-info",children:[a.jsxs("h3",{children:["Orden #",p.slice(-6)]}),a.jsxs("div",{className:"order-meta",children:[a.jsxs("span",{children:["Mesa: ",(v=f.idMesa)==null?void 0:v.split("_")[1]]}),a.jsx("span",{children:""}),a.jsx("span",{children:new Date(f.fechaCreacion).toLocaleString("es-ES")})]}),m({...f})]}),a.jsx("div",{className:"order-total",children:a.jsxs("strong",{children:["$",f.total||"0.00"]})})]}),a.jsxs("div",{className:"order-details",children:[a.jsxs("div",{className:"order-items",children:[a.jsx("strong",{children:"Items:"}),f.items&&Object.values(f.items).map((w,T)=>a.jsxs("span",{className:"order-item",children:[w.cantidad,"x ",w.nombre," ($",w.precioUnitario,")",w.estado&&a.jsx("span",{className:"item-ready",children:"  Listo"})]},T))]}),f.notas&&a.jsxs("div",{className:"order-notes",children:[a.jsx("strong",{children:"Notas:"})," ",f.notas]}),f.referenciaPago&&a.jsxs("div",{className:"payment-reference",children:[a.jsx("strong",{children:"Ref. Pago:"})," ",f.referenciaPago]}),f.estado==="Pendiente"&&a.jsxs("div",{className:"cash-instructions",children:[a.jsx("strong",{children:" Instrucciones:"})," Lleva $",f.total," a caja para validar el pago"]})]}),a.jsxs("div",{className:"order-actions",children:[a.jsx("div",{className:"status-actions",children:d({...f,id:p})}),a.jsx("div",{className:"order-status-display",children:a.jsx("span",{className:"status-badge",style:{backgroundColor:u(f.estado)},children:f.estado})})]})]})]},p)})}),i.length===0&&a.jsxs("div",{className:"empty-state",children:[a.jsx("div",{className:"empty-icon",children:""}),a.jsx("h4",{children:"No hay rdenes"}),a.jsx("p",{children:"No se encontraron rdenes con el filtro aplicado."})]})]})}function kO({order:t,onClose:e,onAddNotification:n}){var v,w;const[r,s]=j.useState("efectivo"),[i,o]=j.useState(""),[c,u]=j.useState(!1),d=()=>{const T=t.total||0;return(parseFloat(i)||0)-T},m=async()=>{var T;if(!i||parseFloat(i)<(t.total||0)){alert("El monto recibido debe ser mayor o igual al total");return}u(!0);try{await new Promise(R=>setTimeout(R,2e3)),await ze(W(G,`ordenes/${t.id}`),{estado:"Pagada",metodoPago:r,montoRecibido:parseFloat(i),vuelto:d(),fechaPago:new Date().toISOString()}),t.idMesa&&await ze(W(G,`mesas/${t.idMesa}`),{estado:"Disponible"}),n(` Pago procesado correctamente. Orden #${(T=t.id)==null?void 0:T.slice(-6)}`,"success"),e()}catch(R){console.error("Error al procesar pago:",R),n(" Error al procesar el pago","error")}finally{u(!1)}},p=t.total||0,f=d();return a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h3",{children:["Procesar Pago - Orden #",(v=t.id)==null?void 0:v.slice(-6)]}),a.jsx("button",{className:"modal-close",onClick:e,children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"payment-summary",children:[a.jsxs("div",{className:"summary-item",children:[a.jsx("span",{children:"Total a Pagar:"}),a.jsxs("strong",{children:["$",p.toFixed(2)]})]}),a.jsxs("div",{className:"summary-item",children:[a.jsx("span",{children:"Mesa:"}),a.jsx("span",{children:(w=t.idMesa)==null?void 0:w.split("_")[1]})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"paymentMethod",children:"Mtodo de Pago:"}),a.jsxs("select",{id:"paymentMethod",value:r,onChange:T=>s(T.target.value),className:"form-select",children:[a.jsx("option",{value:"efectivo",children:"Efectivo"}),a.jsx("option",{value:"tarjeta",children:"Tarjeta"}),a.jsx("option",{value:"transferencia",children:"Transferencia"}),a.jsx("option",{value:"yape",children:"Yape/Plin"})]})]}),r==="efectivo"&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"amountReceived",children:"Monto Recibido:"}),a.jsx("input",{type:"number",id:"amountReceived",value:i,onChange:T=>o(T.target.value),className:"form-input",placeholder:"0.00",min:p,step:"0.01"})]}),r==="efectivo"&&i&&a.jsx("div",{className:"change-calculation",children:a.jsxs("div",{className:"summary-item",children:[a.jsx("span",{children:"Vuelto:"}),a.jsxs("strong",{style:{color:f>=0?"var(--success-color)":"var(--danger-color)"},children:["$",f.toFixed(2)]})]})}),a.jsxs("div",{className:"payment-actions",children:[a.jsx("button",{className:"btn-secondary",onClick:e,disabled:c,children:"Cancelar"}),a.jsx("button",{className:"btn-success",onClick:m,disabled:c||r==="efectivo"&&(!i||f<0),children:c?"Procesando...":`Confirmar Pago (${r})`})]})]})]})})}function jO({notifications:t,onClear:e}){const[n,r]=j.useState(!1),s=o=>{switch(o){case"success":return"";case"warning":return"";case"error":return"";default:return""}},i=t.filter(o=>!o.read).length;return a.jsxs("div",{className:"notifications-panel",children:[a.jsxs("button",{className:"notifications-toggle",onClick:()=>r(!n),children:["",i>0&&a.jsx("span",{className:"notification-badge",children:i})]}),n&&a.jsxs("div",{className:"notifications-dropdown",children:[a.jsxs("div",{className:"notifications-header",children:[a.jsx("h4",{children:"Notificaciones"}),t.length>0&&a.jsx("button",{className:"clear-btn",onClick:e,children:"Limpiar"})]}),a.jsx("div",{className:"notifications-list",children:t.length===0?a.jsx("div",{className:"empty-notifications",children:"No hay notificaciones"}):t.map(o=>a.jsxs("div",{className:`notification-item ${o.read?"read":"unread"}`,children:[a.jsx("div",{className:"notification-icon",children:s(o.type)}),a.jsxs("div",{className:"notification-content",children:[a.jsx("p",{children:o.message}),a.jsx("span",{className:"notification-time",children:new Date(o.timestamp).toLocaleTimeString("es-ES")})]})]},o.id))})]})]})}function PO(){const[t,e]=j.useState({}),[n,r]=j.useState(!0),[s,i]=j.useState("hoy");j.useEffect(()=>{const c=W(G,"reservas"),u=je(c,d=>{e(d.val()||{}),r(!1)});return()=>u()},[]);const o=Object.entries(t).filter(([c,u])=>{const d=new Date(u.fechaHora).toDateString(),m=new Date().toDateString();switch(s){case"hoy":return d===m;case"manana":const p=new Date;return p.setDate(p.getDate()+1),d===p.toDateString();case"semana":const f=new Date;return f.setDate(f.getDate()+7),new Date(u.fechaHora)<=f;default:return!0}}).sort(([,c],[,u])=>new Date(c.fechaHora)-new Date(u.fechaHora));return n?a.jsx("div",{className:"loading",children:"Cargando reservas..."}):a.jsxs("div",{className:"reservations-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h2",{children:"Reservas"}),a.jsx("div",{className:"filters",children:a.jsxs("select",{value:s,onChange:c=>i(c.target.value),className:"filter-select",children:[a.jsx("option",{value:"hoy",children:"Hoy"}),a.jsx("option",{value:"manana",children:"Maana"}),a.jsx("option",{value:"semana",children:"Prxima Semana"}),a.jsx("option",{value:"todas",children:"Todas"})]})})]}),a.jsx("div",{className:"reservations-list",children:o.map(([c,u])=>{var d;return a.jsxs("div",{className:"reservation-card",children:[a.jsxs("div",{className:"reservation-header",children:[a.jsx("h3",{children:u.nombreCliente}),a.jsx("span",{className:`status-badge status-${(d=u.estado)==null?void 0:d.toLowerCase()}`,children:u.estado})]}),a.jsxs("div",{className:"reservation-details",children:[a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:" Telfono:"}),a.jsx("span",{children:u.telefonoCliente})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:" Fecha y Hora:"}),a.jsx("span",{children:new Date(u.fechaHora).toLocaleString("es-ES")})]}),a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:" Personas:"}),a.jsx("span",{children:u.numeroPersonas})]}),u.idMesaAsignada&&a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:" Mesa:"}),a.jsxs("span",{children:["Mesa ",u.idMesaAsignada.split("_")[1]]})]})]})]},c)})}),o.length===0&&a.jsxs("div",{className:"empty-state",children:[a.jsx("div",{className:"empty-icon",children:""}),a.jsx("h4",{children:"No hay reservas"}),a.jsx("p",{children:"No se encontraron reservas con el filtro aplicado."})]})]})}function RO(){const[t,e]=j.useState("mesas"),[n,r]=j.useState(null),[s,i]=j.useState(!0),[o,c]=j.useState(null),[u,d]=j.useState(!1),[m,p]=j.useState(!1),[f,v]=j.useState(null),[w,T]=j.useState([]),[R,E]=j.useState({});j.useEffect(()=>{const M=ds.onAuthStateChanged(y=>{if(y){const I=W(G,`usuarios/${y.uid}`);je(I,P=>{const A=P.val();r({...y,...A}),i(!1)})}else i(!1)}),N=W(G,"ordenes"),x=je(N,y=>{const I=y.val()||{};E(I)});return()=>{M(),x()}},[]);const S=M=>{c(M),d(!0)},C=M=>{v(M),p(!0)},O=async()=>{try{await logout()}catch(M){console.error("Error al cerrar sesin:",M)}},L=(M,N="info")=>{const x={id:Date.now(),message:M,type:N,timestamp:new Date,read:!1};T(y=>[x,...y.slice(0,9)])};return s?a.jsxs("div",{className:"loading-screen",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{children:"Cargando sistema de mozo..."})]}):n?a.jsxs("div",{className:"mesero-dashboard",children:[a.jsxs("header",{className:"mesero-header",children:[a.jsxs("div",{className:"header-left",children:[a.jsx("h1",{children:"CASA MIA - Sistema de Mozo"}),a.jsxs("div",{className:"user-info",children:[a.jsxs("span",{children:["Bienvenido, ",a.jsx("strong",{children:n.nombre||"Mozo"})]}),a.jsx("span",{className:"user-role",children:n.rol})]})]}),a.jsxs("div",{className:"header-right",children:[a.jsx(jO,{notifications:w,onClear:()=>T([])}),a.jsx("button",{onClick:O,className:"logout-btn",children:"Cerrar Sesin"})]})]}),a.jsxs("nav",{className:"mesero-nav",children:[a.jsx("button",{className:`nav-tab ${t==="mesas"?"active":""}`,onClick:()=>e("mesas"),children:" Mesas"}),a.jsx("button",{className:`nav-tab ${t==="ordenes"?"active":""}`,onClick:()=>e("ordenes"),children:" rdenes Activas"}),a.jsx("button",{className:`nav-tab ${t==="reservas"?"active":""}`,onClick:()=>e("reservas"),children:" Reservas"})]}),a.jsxs("main",{className:"mesero-main",children:[t==="mesas"&&a.jsx(CO,{onTableSelect:S,onOrderPayment:C,currentOrders:R}),t==="ordenes"&&a.jsx(TO,{orders:R,currentUserId:n.uid,onOrderPayment:C,onAddNotification:L}),t==="reservas"&&a.jsx(PO,{})]}),u&&o&&a.jsx(NO,{table:o,meseroId:n.uid,onClose:()=>{d(!1),c(null)},onAddNotification:L}),m&&f&&a.jsx(kO,{order:f,onClose:()=>{p(!1),v(null)},onAddNotification:L})]}):a.jsxs("div",{className:"error-screen",children:[a.jsx("h2",{children:"Acceso Denegado"}),a.jsx("p",{children:"No tienes permisos para acceder al sistema de mozo."}),a.jsx("button",{onClick:()=>window.location.href="/",className:"btn-primary",children:"Volver al Inicio"})]})}function AO({onLogin:t}){return a.jsx("div",{className:"login-screen",children:a.jsxs("div",{className:"login-container",children:[a.jsxs("div",{className:"login-header",children:[a.jsx("div",{className:"kitchen-icon",children:""}),a.jsx("h1",{children:"Sistema de Cocina"}),a.jsx("p",{children:"CASA MIA RESTAURANT"})]}),a.jsxs("div",{className:"login-content",children:[a.jsxs("div",{className:"welcome-message",children:[a.jsx("h2",{children:"Bienvenido al rea de Cocina"}),a.jsx("p",{children:"Prepara las rdenes con excelencia y eficiencia"})]}),a.jsxs("button",{className:"login-btn",onClick:t,children:[a.jsx("span",{className:"btn-sparkle",children:""}),"INICIAR TURNO",a.jsx("span",{className:"btn-sparkle",children:""})]}),a.jsxs("div",{className:"login-features",children:[a.jsxs("div",{className:"feature",children:[a.jsx("span",{className:"feature-icon",children:""}),a.jsx("span",{children:"Tiempo Real"})]}),a.jsxs("div",{className:"feature",children:[a.jsx("span",{className:"feature-icon",children:""}),a.jsx("span",{children:"rdenes Prioritarias"})]}),a.jsxs("div",{className:"feature",children:[a.jsx("span",{className:"feature-icon",children:""}),a.jsx("span",{children:"Seguimiento por Item"})]})]})]}),a.jsx("div",{className:"login-footer",children:a.jsx("p",{children:"Presiona el botn para comenzar a preparar rdenes"})})]})})}function bO({orders:t,selectedOrder:e,onSelectOrder:n,completedOrders:r,onOrderComplete:s}){const[i,o]=j.useState(!1),c=t||{},u=r||[],d=Object.entries(c).filter(([f,v])=>v&&v.estado==="En Preparacion").sort(([,f],[,v])=>new Date(f.fechaCreacion)-new Date(v.fechaCreacion)).filter(([f])=>!u.includes(f));j.useEffect(()=>{if(d.length>0){o(!0);const f=setTimeout(()=>o(!1),500);return()=>clearTimeout(f)}},[d.length]);const m=f=>{if(!f.items)return 0;const v=Object.values(f.items);return v.filter(T=>T.estado).length/v.length*100},p=f=>{const v=new Date(f),T=new Date-v,R=Math.floor(T/6e4);if(R<1)return"Ahora";if(R<60)return`${R}m`;const E=Math.floor(R/60),S=R%60;return`${E}h ${S}m`};return d.length===0?a.jsx("div",{className:"orders-queue empty",children:a.jsxs("div",{className:"empty-state",children:[a.jsx("div",{className:"empty-icon",children:""}),a.jsx("h3",{children:"Excelente Trabajo!"}),a.jsx("p",{children:"No hay rdenes pendientes en este momento"}),a.jsx("div",{className:"celebrate",children:""})]})}):a.jsxs("div",{className:"orders-queue",children:[a.jsxs("div",{className:"queue-header",children:[a.jsx("h2",{children:"rdenes en Preparacin"}),a.jsxs("span",{className:"orders-count",children:[d.length," activas"]})]}),a.jsx("div",{className:`orders-list ${i?"reordering":""}`,children:d.map(([f,v])=>{var E;const w=m(v),T=(e==null?void 0:e.id)===f,R=u.includes(f);return a.jsxs("div",{className:`order-card ${T?"selected":""} ${R?"completing":""}`,onClick:()=>n({...v,id:f}),children:[R&&a.jsxs("div",{className:"completion-overlay",children:[a.jsx("div",{className:"check-animation",children:""}),a.jsx("span",{children:"LISTA!"})]}),a.jsxs("div",{className:"order-header",children:[a.jsxs("div",{className:"order-meta",children:[a.jsxs("h3",{children:["Orden #",f.slice(-6)]}),a.jsxs("span",{className:"order-time",children:[" ",p(v.fechaCreacion)]})]}),a.jsxs("div",{className:"order-mesa",children:["Mesa ",(E=v.idMesa)==null?void 0:E.split("_")[1]]})]}),a.jsxs("div",{className:"order-progress",children:[a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:"progress-fill",style:{width:`${w}%`}})}),a.jsxs("span",{className:"progress-text",children:[Math.round(w),"% completado"]})]}),a.jsxs("div",{className:"order-items-preview",children:[v.items&&Object.values(v.items).slice(0,3).map((S,C)=>a.jsxs("span",{className:`item-tag ${S.estado?"completed":""}`,children:[S.cantidad,"x ",S.nombre]},C)),v.items&&Object.keys(v.items).length>3&&a.jsxs("span",{className:"more-items",children:["+",Object.keys(v.items).length-3," ms"]})]}),v.notas&&a.jsxs("div",{className:"order-notes",children:[a.jsx("span",{className:"notes-icon",children:""}),v.notas]}),a.jsxs("div",{className:"order-priority",children:[w<30&&a.jsx("span",{className:"priority-high",children:" PRIORIDAD"}),w>=30&&w<70&&a.jsx("span",{className:"priority-medium",children:" EN PROCESO"}),w>=70&&a.jsx("span",{className:"priority-low",children:" CASI LISTA"})]})]},f)})})]})}function OO({order:t,onOrderComplete:e}){var r,s;if(!t)return a.jsxs("div",{className:"order-details empty",children:[a.jsx("h3",{children:"Selecciona una orden"}),a.jsx("p",{children:"Haz clic en una orden para ver los detalles aqu."})]});const n=async(i,o)=>{try{await ze(W(G,`ordenes/${t.id}/items/${i}`),{estado:!o});const c=W(G,`ordenes/${t.id}/items`),d=(await eS(c)).val()||{};Object.values(d).every(p=>p.estado===!0)&&(await ze(W(G,`ordenes/${t.id}`),{estado:"Lista",fechaLista:new Date().toISOString()}),e(t.id))}catch(c){console.error("Error actualizando item:",c)}};return a.jsxs("div",{className:"order-details",children:[a.jsxs("header",{children:[a.jsxs("h2",{children:["Orden #",(r=t.id)==null?void 0:r.slice(-6)]}),a.jsxs("div",{children:["Mesa: ",((s=t.idMesa)==null?void 0:s.split("_")[1])||""]})]}),a.jsxs("section",{className:"items-list",children:[a.jsx("h4",{children:"Items"}),t.items?Object.entries(t.items).map(([i,o])=>a.jsx("div",{className:`detail-item ${o.estado?"done":""}`,children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:!!o.estado,onChange:()=>n(i,!!o.estado)}),a.jsxs("span",{className:"item-name",children:[o.cantidad,"x ",o.nombre]})]})},i)):a.jsx("p",{children:"No hay items en esta orden."})]}),t.notas&&a.jsxs("section",{className:"order-notes",children:[a.jsx("h4",{children:"Notas"}),a.jsx("p",{children:t.notas})]})]})}function DO({orders:t,onClose:e}){const[n,r]=j.useState("hoy"),i=Object.entries(t).filter(([u,d])=>["Lista","Servida","Pagada"].includes(d.estado)).sort(([,u],[,d])=>new Date(d.fechaLista||d.fechaCreacion)-new Date(u.fechaLista||u.fechaCreacion)).filter(([u,d])=>{const m=new Date(d.fechaLista||d.fechaCreacion).toDateString(),p=new Date().toDateString();switch(n){case"hoy":return m===p;case"semana":const f=new Date;return f.setDate(f.getDate()-7),new Date(d.fechaLista||d.fechaCreacion)>=f;case"mes":const v=new Date;return v.setMonth(v.getMonth()-1),new Date(d.fechaLista||d.fechaCreacion)>=v;default:return!0}}),o=u=>{const d=new Date(u.fechaCreacion),p=new Date(u.fechaLista||u.fechaCreacion)-d;return`${Math.floor(p/6e4)} min`},c=u=>u.items?`${Object.values(u.items).reduce((m,p)=>m+p.cantidad,0)} items`:"0 items";return a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal-content large-modal",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h3",{children:" Historial de rdenes"}),a.jsx("button",{className:"modal-close",onClick:e,children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"history-filters",children:[a.jsxs("select",{value:n,onChange:u=>r(u.target.value),className:"filter-select",children:[a.jsx("option",{value:"hoy",children:"Hoy"}),a.jsx("option",{value:"semana",children:"Esta Semana"}),a.jsx("option",{value:"mes",children:"Este Mes"}),a.jsx("option",{value:"todas",children:"Todas"})]}),a.jsx("div",{className:"history-stats",children:a.jsxs("span",{className:"stat",children:[a.jsx("strong",{children:i.length})," rdenes"]})})]}),a.jsx("div",{className:"history-list",children:i.map(([u,d])=>{var m,p;return a.jsxs("div",{className:"history-card",children:[a.jsxs("div",{className:"history-header",children:[a.jsxs("div",{className:"history-info",children:[a.jsxs("h4",{children:["Orden #",u.slice(-6)]}),a.jsxs("div",{className:"history-meta",children:[a.jsxs("span",{children:["Mesa ",(m=d.idMesa)==null?void 0:m.split("_")[1]]}),a.jsx("span",{children:""}),a.jsx("span",{children:c(d)}),a.jsx("span",{children:""}),a.jsx("span",{children:o(d)})]})]}),a.jsx("div",{className:"history-status",children:a.jsx("span",{className:`status-badge status-${(p=d.estado)==null?void 0:p.toLowerCase()}`,children:d.estado})})]}),a.jsx("div",{className:"history-items",children:d.items&&Object.values(d.items).map((f,v)=>a.jsxs("span",{className:`history-item ${f.estado?"completed":""}`,children:[f.cantidad,"x ",f.nombre]},v))}),a.jsxs("div",{className:"history-footer",children:[a.jsx("span",{className:"history-time",children:new Date(d.fechaLista||d.fechaCreacion).toLocaleString("es-ES")}),d.notas&&a.jsxs("span",{className:"history-notes",children:[" ",d.notas]})]})]},u)})}),i.length===0&&a.jsxs("div",{className:"empty-history",children:[a.jsx("div",{className:"empty-icon",children:""}),a.jsx("h4",{children:"No hay historial"}),a.jsx("p",{children:"No se encontraron rdenes completadas con el filtro aplicado."})]})]})]})})}function LO(){const[t,e]=j.useState(!1),[n,r]=j.useState(null),[s,i]=j.useState({}),[o,c]=j.useState(null),[u,d]=j.useState(!1),[m,p]=j.useState([]);j.useEffect(()=>{const T=W(G,"ordenes"),R=je(T,E=>{const S=E.val()||{};i(S)});return()=>R()},[]);const f=()=>{e(!0),r({nombre:"Chef Principal",rol:"Cocinero"})},v=async()=>{try{await logout()}catch(T){console.error("Error al cerrar sesin:",T)}},w=T=>{p(R=>[...R,T]),setTimeout(()=>{p(R=>R.filter(E=>E!==T))},2e3)};return t?a.jsxs("div",{className:"cocina-dashboard",children:[a.jsxs("header",{className:"cocina-header",children:[a.jsxs("div",{className:"header-left",children:[a.jsx("h1",{children:" COCINA - CASA MIA"}),a.jsxs("div",{className:"kitchen-info",children:[a.jsxs("span",{children:["Bienvenido, ",a.jsx("strong",{children:n==null?void 0:n.nombre})]}),a.jsx("span",{className:"kitchen-status active",children:" EN LNEA"})]})]}),a.jsxs("div",{className:"header-right",children:[a.jsxs("div",{className:"orders-count",children:[a.jsx("span",{className:"count-badge",children:Object.values(s).filter(T=>T.estado==="En Preparacion").length}),a.jsx("span",{children:"rdenes Activas"})]}),a.jsx("button",{className:"btn-history",onClick:()=>d(!0),children:" Historial"}),a.jsx("button",{className:"btn-logout",onClick:v,children:" Salir"})]})]}),a.jsx("main",{className:"cocina-main",children:a.jsxs("div",{className:"cocina-layout",children:[a.jsx("div",{className:"orders-column",children:a.jsx(bO,{orders:s,selectedOrder:o,onSelectOrder:c,completedOrders:m,onOrderComplete:w})}),a.jsx("div",{className:"details-column",children:a.jsx(OO,{order:o,onOrderComplete:w})})]})}),u&&a.jsx(DO,{orders:s,onClose:()=>d(!1)})]}):a.jsx(AO,{onLogin:f})}function MO({onClose:t,mesas:e}){const[n,r]=j.useState({nombreCliente:"",telefonoCliente:"",fechaHora:"",numeroPersonas:2,notas:""}),[s,i]=j.useState(!1),o=async p=>{p.preventDefault(),i(!0);try{const f=W(G,"reservas"),v=Ip(f),w={nombreCliente:n.nombreCliente,telefonoCliente:n.telefonoCliente,fechaHora:new Date(n.fechaHora).toISOString(),numeroPersonas:parseInt(n.numeroPersonas),notas:n.notas,estado:"Confirmada",fechaCreacion:new Date().toISOString()};await cs(v,w),alert("Reserva creada exitosamente"),t()}catch(f){console.error("Error al crear reserva:",f),alert("Error al crear la reserva")}finally{i(!1)}},c=p=>{r(f=>({...f,[p.target.name]:p.target.value}))},u=new Date().toISOString().split("T")[0],d=new Date;d.setDate(d.getDate()+30);const m=d.toISOString().split("T")[0];return a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h3",{children:"Nueva Reserva"}),a.jsx("button",{className:"modal-close",onClick:t,children:""})]}),a.jsxs("form",{onSubmit:o,className:"modal-form",children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"nombreCliente",children:"Nombre del Cliente:"}),a.jsx("input",{type:"text",id:"nombreCliente",name:"nombreCliente",value:n.nombreCliente,onChange:c,className:"form-input",required:!0,placeholder:"Ingresa el nombre completo"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"telefonoCliente",children:"Telfono/WhatsApp:"}),a.jsx("input",{type:"tel",id:"telefonoCliente",name:"telefonoCliente",value:n.telefonoCliente,onChange:c,className:"form-input",required:!0,placeholder:"+51 123 456 789"})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"fechaHora",children:"Fecha y Hora:"}),a.jsx("input",{type:"datetime-local",id:"fechaHora",name:"fechaHora",value:n.fechaHora,onChange:c,className:"form-input",required:!0,min:u,max:m})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"numeroPersonas",children:"Nmero de Personas:"}),a.jsx("select",{id:"numeroPersonas",name:"numeroPersonas",value:n.numeroPersonas,onChange:c,className:"form-select",required:!0,children:[2,3,4,5,6,7,8,9,10].map(p=>a.jsxs("option",{value:p,children:[p," personas"]},p))})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"notas",children:"Notas Adicionales:"}),a.jsx("textarea",{id:"notas",name:"notas",value:n.notas,onChange:c,className:"form-textarea",rows:"3",placeholder:"Ej: Celebracin de cumpleaos, mesa cerca a la ventana, etc."})]}),a.jsxs("div",{className:"reservation-instructions",children:[a.jsxs("p",{children:[" ",a.jsx("strong",{children:"Proceso:"})]}),a.jsx("p",{children:" La reserva se confirmar automticamente"}),a.jsx("p",{children:" El sistema separar una mesa 20 minutos antes de la hora"}),a.jsx("p",{children:" Recibirs una alerta cuando la reserva est prxima"})]})]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{type:"button",className:"btn-secondary",onClick:t,disabled:s,children:"Cancelar"}),a.jsx("button",{type:"submit",className:"btn-primary",disabled:s,children:s?"Creando...":"Crear Reserva"})]})]})]})})}function FO({reservations:t,mesas:e}){const[n,r]=j.useState(!1),[s,i]=j.useState("hoy"),[o,c]=j.useState([]);j.useEffect(()=>{const p=()=>{const v=new Date,w=new Date(v.getTime()+20*6e4),T=Object.entries(t).filter(([R,E])=>{if(E.estado!=="Confirmada")return!1;const S=new Date(E.fechaHora);return S<=w&&S>=v});c(T),T.forEach(([R,E])=>{if(E.idMesaAsignada){const S=e[E.idMesaAsignada];S&&S.estado==="Disponible"&&ze(W(G,`mesas/${E.idMesaAsignada}`),{estado:"Reservada"})}})};p();const f=setInterval(p,6e4);return()=>clearInterval(f)},[t,e]);const u=Object.entries(t).filter(([p,f])=>{const v=new Date(f.fechaHora).toDateString(),w=new Date().toDateString();switch(s){case"hoy":return v===w;case"manana":const T=new Date;return T.setDate(T.getDate()+1),v===T.toDateString();case"semana":const R=new Date;return R.setDate(R.getDate()+7),new Date(f.fechaHora)<=R;default:return!0}}).sort(([,p],[,f])=>new Date(p.fechaHora)-new Date(f.fechaHora)),d=async(p,f)=>{try{await ze(W(G,`reservas/${p}`),{estado:f});const v=t[p];["Cancelada","Completada"].includes(f)&&v.idMesaAsignada&&await ze(W(G,`mesas/${v.idMesaAsignada}`),{estado:"Disponible"})}catch(v){console.error("Error al actualizar reserva:",v),alert("Error al actualizar la reserva")}},m=p=>Object.entries(e).filter(([f,v])=>v.estado==="Disponible"&&v.capacidad>=p);return a.jsxs("div",{className:"reservations-manager",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h2",{children:"Gestin de Reservas"}),a.jsxs("div",{className:"header-actions",children:[a.jsxs("select",{value:s,onChange:p=>i(p.target.value),className:"filter-select",children:[a.jsx("option",{value:"hoy",children:"Hoy"}),a.jsx("option",{value:"manana",children:"Maana"}),a.jsx("option",{value:"semana",children:"Prxima Semana"}),a.jsx("option",{value:"todas",children:"Todas"})]}),a.jsxs("button",{className:"btn-primary",onClick:()=>r(!0),children:[a.jsx("span",{className:"btn-icon",children:""}),"Nueva Reserva"]})]})]}),o.length>0&&a.jsxs("div",{className:"upcoming-alert",children:[a.jsx("h4",{children:" Reservas Prximas (en 20 min o menos)"}),a.jsx("div",{className:"upcoming-list",children:o.map(([p,f])=>{var v;return a.jsxs("div",{className:"upcoming-item",children:[a.jsxs("span",{children:[a.jsx("strong",{children:f.nombreCliente})," - ",new Date(f.fechaHora).toLocaleTimeString("es-ES")]}),a.jsxs("span",{children:[f.numeroPersonas," personas"]}),f.idMesaAsignada&&a.jsxs("span",{className:"mesa-asignada",children:["Mesa ",(v=e[f.idMesaAsignada])==null?void 0:v.numero]})]},p)})})]}),a.jsx("div",{className:"reservations-grid",children:u.map(([p,f])=>{var T;const v=f.idMesaAsignada?e[f.idMesaAsignada]:null,w=o.some(([R])=>R===p);return a.jsxs("div",{className:`reservation-card ${w?"upcoming":""}`,children:[a.jsxs("div",{className:"reservation-header",children:[a.jsxs("div",{className:"reservation-info",children:[a.jsx("h3",{children:f.nombreCliente}),a.jsxs("div",{className:"reservation-meta",children:[a.jsxs("span",{children:[" ",f.telefonoCliente]}),a.jsxs("span",{children:[" ",f.numeroPersonas," personas"]})]})]}),a.jsx("div",{className:"reservation-status",children:a.jsx("span",{className:`status-badge status-${(T=f.estado)==null?void 0:T.toLowerCase()}`,children:f.estado})})]}),a.jsxs("div",{className:"reservation-details",children:[a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:" Fecha y Hora:"}),a.jsx("span",{children:new Date(f.fechaHora).toLocaleString("es-ES")})]}),v?a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label",children:" Mesa Asignada:"}),a.jsxs("span",{children:["Mesa ",v.numero," (Piso ",v.piso,")"]})]}):a.jsxs("div",{className:"detail-row",children:[a.jsx("span",{className:"detail-label warning",children:" Sin mesa asignada"}),a.jsx("button",{className:"btn-secondary btn-sm",onClick:()=>{const R=m(f.numeroPersonas);R.length>0?alert(`${R.length} mesas disponibles para ${f.numeroPersonas} personas`):alert("No hay mesas disponibles para esta reserva")},children:"Asignar Mesa"})]})]}),a.jsxs("div",{className:"reservation-actions",children:[f.estado==="Confirmada"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"btn-success btn-sm",onClick:()=>d(p,"Completada"),children:"Completada"}),a.jsx("button",{className:"btn-danger btn-sm",onClick:()=>d(p,"Cancelada"),children:"Cancelar"})]}),f.estado==="Pendiente"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"btn-success btn-sm",onClick:()=>d(p,"Confirmada"),children:"Confirmar"}),a.jsx("button",{className:"btn-danger btn-sm",onClick:()=>d(p,"Cancelada"),children:"Rechazar"})]}),a.jsx("button",{className:"btn-secondary btn-sm",children:"Editar"})]}),w&&a.jsxs("div",{className:"upcoming-indicator",children:[" Prxima en ",Math.round((new Date(f.fechaHora)-new Date)/6e4)," min"]})]},p)})}),u.length===0&&a.jsxs("div",{className:"empty-state",children:[a.jsx("div",{className:"empty-icon",children:""}),a.jsx("h4",{children:"No hay reservas"}),a.jsx("p",{children:"No se encontraron reservas con el filtro aplicado."}),a.jsx("button",{className:"btn-primary",onClick:()=>r(!0),children:"Crear Primera Reserva"})]}),n&&a.jsx(MO,{onClose:()=>r(!1),mesas:e})]})}function UO({orders:t,mesas:e}){const[n,r]=j.useState("pendientes"),s=Object.entries(t).filter(([m,p])=>p.estado==="Pendiente"&&(!p.metodoPago||p.metodoPago==="efectivo")),i=Object.entries(t).filter(([m,p])=>p.estado==="Servida"),o=n==="pendientes"?s:i,c=async m=>{try{await ze(W(G,`ordenes/${m}`),{estado:"En Preparacion",fechaValidacionPago:new Date().toISOString(),validadoPor:"cajero"}),alert("Pago en efectivo validado correctamente. Orden enviada a cocina.")}catch(p){console.error("Error al validar pago:",p),alert("Error al validar el pago")}},u=async(m,p,f=null)=>{try{const v={estado:"Pagada",metodoPago:p,fechaPago:new Date().toISOString()};f&&(v.referenciaPago=f),await ze(W(G,`ordenes/${m}`),v);const w=t[m];w&&w.idMesa&&await ze(W(G,`mesas/${w.idMesa}`),{estado:"Disponible"}),alert(`Pago con ${p} procesado correctamente.`)}catch(v){console.error("Error al procesar pago:",v),alert("Error al procesar el pago")}},d=m=>{const p=e[m];return p?`Mesa ${p.numero} (Piso ${p.piso})`:"Mesa no encontrada"};return a.jsxs("div",{className:"pending-orders",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h2",{children:"Gestin de Pagos"}),a.jsx("div",{className:"header-actions",children:a.jsxs("select",{value:n,onChange:m=>r(m.target.value),className:"filter-select",children:[a.jsx("option",{value:"pendientes",children:"Pendientes de Efectivo"}),a.jsx("option",{value:"servidas",children:"rdenes Servidas"})]})})]}),a.jsxs("div",{className:"stats-cards",children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:""}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:s.length}),a.jsx("p",{children:"Pendientes Efectivo"})]})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:""}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:i.length}),a.jsx("p",{children:"rdenes Servidas"})]})]})]}),a.jsx("div",{className:"orders-grid",children:o.map(([m,p])=>{var f;return a.jsxs("div",{className:"order-card",children:[a.jsxs("div",{className:"order-header",children:[a.jsxs("div",{className:"order-info",children:[a.jsxs("h3",{children:["Orden #",m.slice(-6)]}),a.jsxs("div",{className:"order-meta",children:[a.jsx("span",{children:d(p.idMesa)}),a.jsx("span",{children:""}),a.jsx("span",{children:new Date(p.fechaCreacion).toLocaleString("es-ES")})]})]}),a.jsx("div",{className:"order-total",children:a.jsxs("strong",{children:["$",p.total||"0.00"]})})]}),a.jsxs("div",{className:"order-details",children:[a.jsxs("div",{className:"order-items",children:[a.jsx("strong",{children:"Items:"}),p.items&&Object.values(p.items).map((v,w)=>a.jsxs("div",{className:"order-item",children:[v.cantidad,"x ",v.nombre," - $",v.precioUnitario]},w))]}),p.notas&&a.jsxs("div",{className:"order-notes",children:[a.jsx("strong",{children:"Notas:"})," ",p.notas]})]}),a.jsx("div",{className:"order-actions",children:n==="pendientes"?a.jsxs("div",{className:"cash-payment-actions",children:[a.jsx("button",{className:"btn-success",onClick:()=>c(m),children:" Validar Pago Efectivo"}),a.jsxs("span",{className:"payment-instruction",children:["El mozo debe traer $",p.total," en efectivo"]})]}):a.jsxs("div",{className:"digital-payment-actions",children:[a.jsx("button",{className:"btn-primary",onClick:()=>{const v=prompt("Ingresa el nmero de autorizacin/referencia:");v&&u(m,"tarjeta",v)},children:" Cobrar con Tarjeta"}),a.jsx("button",{className:"btn-warning",onClick:()=>{const v=prompt("Ingresa el cdigo de Yape/Plin:");v&&u(m,"yape",v)},children:" Cobrar Yape/Plin"}),a.jsx("button",{className:"btn-secondary",onClick:()=>u(m,"efectivo"),children:" Marcar como Pagado"})]})}),a.jsxs("div",{className:"order-status",children:[a.jsx("span",{className:`status-badge status-${(f=p.estado)==null?void 0:f.toLowerCase()}`,children:p.estado}),p.metodoPago&&a.jsx("span",{className:"payment-method",children:p.metodoPago})]})]},m)})}),o.length===0&&a.jsxs("div",{className:"empty-state",children:[a.jsx("div",{className:"empty-icon",children:n==="pendientes"?"":""}),a.jsx("h4",{children:n==="pendientes"?"No hay rdenes pendientes de efectivo":"No hay rdenes servidas pendientes de pago"}),a.jsx("p",{children:n==="pendientes"?"Todas las rdenes en efectivo han sido validadas":"Todas las rdenes servidas han sido pagadas"})]})]})}function $O({orders:t,mesas:e}){var T;const[n,r]=j.useState(null),[s,i]=j.useState("efectivo"),[o,c]=j.useState(""),[u,d]=j.useState(""),m=Object.entries(t).filter(([R,E])=>E.estado==="Servida"||E.estado==="Pendiente"&&E.metodoPago&&E.metodoPago!=="efectivo"),p=()=>{if(!n||s!=="efectivo")return 0;const R=n.total||0;return(parseFloat(o)||0)-R},f=async()=>{if(n){if(s==="efectivo"&&(!o||p()<0)){alert("El monto recibido debe ser mayor o igual al total");return}if(s!=="efectivo"&&!u){alert("Ingresa la referencia del pago");return}try{const R={estado:"Pagada",metodoPago:s,fechaPago:new Date().toISOString()};s==="efectivo"?(R.montoRecibido=parseFloat(o),R.vuelto=p()):R.referenciaPago=u,await ze(W(G,`ordenes/${n.id}`),R),n.idMesa&&await ze(W(G,`mesas/${n.idMesa}`),{estado:"Disponible"}),alert(`Pago con ${s} procesado correctamente.`),r(null),c(""),d("")}catch(R){console.error("Error al procesar pago:",R),alert("Error al procesar el pago")}}},v=R=>{const E=e[R];return E?`Mesa ${E.numero}`:"Mesa no encontrada"},w=p();return a.jsxs("div",{className:"payment-processing",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h2",{children:"Procesar Pagos"}),a.jsx("p",{className:"section-subtitle",children:"Cobra rdenes servidas o valida pagos pendientes"})]}),a.jsxs("div",{className:"payment-layout",children:[a.jsxs("div",{className:"orders-list",children:[a.jsx("h3",{children:"rdenes para Cobrar"}),m.map(([R,E])=>{var S;return a.jsxs("div",{className:`order-item ${(n==null?void 0:n.id)===R?"selected":""}`,onClick:()=>r({...E,id:R}),children:[a.jsxs("div",{className:"order-item-header",children:[a.jsxs("strong",{children:["Orden #",R.slice(-6)]}),a.jsxs("span",{className:"order-total",children:["$",E.total||"0.00"]})]}),a.jsxs("div",{className:"order-item-details",children:[a.jsx("span",{children:v(E.idMesa)}),a.jsx("span",{className:`status status-${(S=E.estado)==null?void 0:S.toLowerCase()}`,children:E.estado})]}),E.metodoPago&&E.estado==="Pendiente"&&a.jsxs("div",{className:"pending-payment",children:[" Pendiente: ",E.metodoPago]})]},R)}),m.length===0&&a.jsxs("div",{className:"empty-state",children:[a.jsx("div",{className:"empty-icon",children:""}),a.jsx("p",{children:"No hay rdenes para cobrar"})]})]}),a.jsx("div",{className:"payment-panel",children:n?a.jsxs(a.Fragment,{children:[a.jsxs("h3",{children:["Procesar Pago - Orden #",n.id.slice(-6)]}),a.jsxs("div",{className:"payment-summary",children:[a.jsxs("div",{className:"summary-item",children:[a.jsx("span",{children:"Mesa:"}),a.jsx("span",{children:v(n.idMesa)})]}),a.jsxs("div",{className:"summary-item",children:[a.jsx("span",{children:"Total:"}),a.jsxs("strong",{children:["S/ ",n.total||"0.00"]})]}),a.jsxs("div",{className:"summary-item",children:[a.jsx("span",{children:"Estado:"}),a.jsx("span",{className:`status status-${(T=n.estado)==null?void 0:T.toLowerCase()}`,children:n.estado})]})]}),a.jsxs("div",{className:"payment-form",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Mtodo de Pago:"}),a.jsxs("select",{value:s,onChange:R=>{i(R.target.value),c(""),d("")},className:"form-select",children:[a.jsx("option",{value:"efectivo",children:"Efectivo"}),a.jsx("option",{value:"tarjeta",children:"Tarjeta"}),a.jsx("option",{value:"yape",children:"Yape"}),a.jsx("option",{value:"plin",children:"Plin"}),a.jsx("option",{value:"transferencia",children:"Transferencia"})]})]}),s==="efectivo"&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Monto Recibido:"}),a.jsx("input",{type:"number",value:o,onChange:R=>c(R.target.value),className:"form-input",placeholder:"0.00",min:n.total,step:"0.01"})]}),s!=="efectivo"&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:s==="tarjeta"?"Nmero de Autorizacin":s==="yape"?"Cdigo de Yape":s==="plin"?"Cdigo de Plin":"Nmero de Operacin"}),a.jsx("input",{type:"text",value:u,onChange:R=>d(R.target.value),className:"form-input",placeholder:"Ingresa la referencia"})]}),s==="efectivo"&&o&&a.jsx("div",{className:"change-calculation",children:a.jsxs("div",{className:"summary-item",children:[a.jsx("span",{children:"Vuelto:"}),a.jsxs("strong",{style:{color:w>=0?"var(--success-color)":"var(--danger-color)"},children:["$",w.toFixed(2)]})]})}),a.jsxs("div",{className:"payment-actions",children:[a.jsx("button",{className:"btn-secondary",onClick:()=>{r(null),c(""),d("")},children:"Cancelar"}),a.jsx("button",{className:"btn-success",onClick:f,disabled:s==="efectivo"&&(!o||w<0)||s!=="efectivo"&&!u,children:"Confirmar Pago"})]})]})]}):a.jsxs("div",{className:"no-selection",children:[a.jsx("div",{className:"no-selection-icon",children:""}),a.jsx("h4",{children:"Selecciona una orden"}),a.jsx("p",{children:"Elige una orden de la lista para procesar el pago"})]})})]})]})}function VO({orders:t}){const[e,n]=j.useState(null),[r,s]=j.useState("hoy"),i=Object.entries(t).filter(([d,m])=>m.estado==="Pagada"),o=i.filter(([d,m])=>{const p=new Date(m.fechaPago||m.fechaCreacion).toDateString(),f=new Date().toDateString();switch(r){case"hoy":return p===f;case"semana":const v=new Date;return v.setDate(v.getDate()-7),new Date(m.fechaPago||m.fechaCreacion)>=v;case"mes":const w=new Date;return w.setMonth(w.getMonth()-1),new Date(m.fechaPago||m.fechaCreacion)>=w;default:return!0}}),c=d=>{var f;const m=window.open("","_blank"),p=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Boleta - CASA MIA</title>
        <style>
          body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            max-width: 400px;
          }
          .header { 
            text-align: center; 
            border-bottom: 2px solid #000; 
            padding-bottom: 10px; 
            margin-bottom: 15px;
          }
          .details { 
            margin: 15px 0; 
          }
          .items { 
            width: 100%; 
            border-collapse: collapse; 
            margin: 15px 0;
          }
          .items th, .items td { 
            border-bottom: 1px solid #ddd; 
            padding: 8px; 
            text-align: left;
          }
          .total { 
            font-weight: bold; 
            font-size: 1.1em; 
            border-top: 2px solid #000; 
            padding-top: 10px;
          }
          .footer { 
            text-align: center; 
            margin-top: 20px; 
            font-size: 0.9em; 
            color: #666;
          }
          @media print {
            body { margin: 0; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <h2>CASA MIA RESTAURANT</h2>
          <p>RUC: 20123456789</p>
          <p>Av. Principal 123 - Lima</p>
          <p>Tel: (01) 234-5678</p>
        </div>
        
        <div class="details">
          <p><strong>BOLETA DE VENTA</strong></p>
          <p>Orden: ${d.id.slice(-6)}</p>
          <p>Fecha: ${new Date(d.fechaPago||d.fechaCreacion).toLocaleString("es-ES")}</p>
          <p>Mesa: ${((f=d.idMesa)==null?void 0:f.split("_")[1])||"N/A"}</p>
        </div>
        
        <table class="items">
          <thead>
            <tr>
              <th>Descripcin</th>
              <th>Cant</th>
              <th>P.Unit</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            ${d.items?Object.values(d.items).map(v=>`
              <tr>
                <td>${v.nombre}</td>
                <td>${v.cantidad}</td>
                <td>$${v.precioUnitario}</td>
                <td>$${(v.cantidad*v.precioUnitario).toFixed(2)}</td>
              </tr>
            `).join(""):""}
          </tbody>
        </table>
        
        <div class="total">
          <p>SUBTOTAL: $${d.total}</p>
          <p>IGV (18%): $${(d.total*.18).toFixed(2)}</p>
          <p>TOTAL: $${d.total}</p>
          <p>Mtodo de Pago: ${d.metodoPago||"Efectivo"}</p>
          ${d.montoRecibido?`<p>Monto Recibido: $${d.montoRecibido}</p>`:""}
          ${d.vuelto?`<p>Vuelto: $${d.vuelto}</p>`:""}
          ${d.referenciaPago?`<p>Referencia: ${d.referenciaPago}</p>`:""}
        </div>
        
        <div class="footer">
          <p>Gracias por su visita!</p>
          <p>*** Este documento es una boleta electrnica ***</p>
        </div>
      </body>
      </html>
    `;m.document.write(p),m.document.close(),setTimeout(()=>{m.print()},500)},u=()=>{const d=i.filter(([T,R])=>new Date(R.fechaPago||R.fechaCreacion).toDateString()===new Date().toDateString()),m=d.reduce((T,[R,E])=>T+(E.total||0),0),p=`
      REPORTE DIARIO - CASA MIA
      Fecha: ${new Date().toLocaleDateString("es-ES")}
      
      Total de rdenes: ${d.length}
      Ingreso Total: $${m.toFixed(2)}
      
      Detalle de rdenes:
      ${d.map(([T,R])=>{var E;return`
        Orden ${T.slice(-6)} | Mesa ${(E=R.idMesa)==null?void 0:E.split("_")[1]} | $${R.total} | ${R.metodoPago}
      `}).join("")}
    `,f=new Blob([p],{type:"text/plain"}),v=URL.createObjectURL(f),w=document.createElement("a");w.href=v,w.download=`reporte-${new Date().toISOString().split("T")[0]}.txt`,w.click(),URL.revokeObjectURL(v)};return a.jsxs("div",{className:"receipt-generator",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h2",{children:"Generar Boletas"}),a.jsxs("div",{className:"header-actions",children:[a.jsxs("select",{value:r,onChange:d=>s(d.target.value),className:"filter-select",children:[a.jsx("option",{value:"hoy",children:"Hoy"}),a.jsx("option",{value:"semana",children:"Esta Semana"}),a.jsx("option",{value:"mes",children:"Este Mes"}),a.jsx("option",{value:"todas",children:"Todas"})]}),a.jsx("button",{className:"btn-primary",onClick:u,children:" Exportar Reporte"})]})]}),a.jsxs("div",{className:"stats-overview",children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:""}),a.jsxs("div",{className:"stat-info",children:[a.jsx("h3",{children:o.length}),a.jsx("p",{children:"Boletas Generables"})]})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:""}),a.jsxs("div",{className:"stat-info",children:[a.jsxs("h3",{children:["$",o.reduce((d,[m,p])=>d+(p.total||0),0).toFixed(2)]}),a.jsx("p",{children:"Total Recaudado"})]})]})]}),a.jsx("div",{className:"receipts-grid",children:o.map(([d,m])=>{var p;return a.jsxs("div",{className:"receipt-card",children:[a.jsxs("div",{className:"receipt-header",children:[a.jsxs("div",{className:"receipt-info",children:[a.jsxs("h3",{children:["Orden #",d.slice(-6)]}),a.jsxs("div",{className:"receipt-meta",children:[a.jsxs("span",{children:["Mesa ",(p=m.idMesa)==null?void 0:p.split("_")[1]]}),a.jsx("span",{children:""}),a.jsx("span",{children:new Date(m.fechaPago||m.fechaCreacion).toLocaleString("es-ES")})]})]}),a.jsx("div",{className:"receipt-total",children:a.jsxs("strong",{children:["$",m.total||"0.00"]})})]}),a.jsxs("div",{className:"receipt-details",children:[a.jsxs("div",{className:"payment-method",children:[a.jsx("strong",{children:"Mtodo:"})," ",m.metodoPago||"Efectivo",m.referenciaPago&&a.jsxs("span",{children:[" - Ref: ",m.referenciaPago]})]}),a.jsxs("div",{className:"items-count",children:[a.jsx("strong",{children:"Items:"})," ",m.items?Object.keys(m.items).length:0]})]}),a.jsxs("div",{className:"receipt-actions",children:[a.jsx("button",{className:"btn-primary",onClick:()=>c({...m,id:d}),children:" Imprimir Boleta"}),a.jsx("button",{className:"btn-secondary",onClick:()=>{const f=document.createElement("div");f.innerHTML=`
                    <h3>Vista Previa - Orden #${d.slice(-6)}</h3>
                    <p><strong>Total:</strong> $${m.total}</p>
                    <p><strong>Mtodo:</strong> ${m.metodoPago}</p>
                    <p><strong>Items:</strong> ${m.items?Object.values(m.items).map(v=>`${v.cantidad}x ${v.nombre}`).join(", "):"N/A"}</p>
                  `,alert(f.innerHTML)},children:" Vista Previa"})]})]},d)})}),o.length===0&&a.jsxs("div",{className:"empty-state",children:[a.jsx("div",{className:"empty-icon",children:""}),a.jsx("h4",{children:"No hay boletas para generar"}),a.jsx("p",{children:"No se encontraron rdenes pagadas con el filtro aplicado."})]})]})}function zO(){const[t,e]=j.useState("reservas"),[n,r]=j.useState(null),[s,i]=j.useState(!0),[o,c]=j.useState({}),[u,d]=j.useState({}),[m,p]=j.useState({});j.useEffect(()=>{const v=ds.onAuthStateChanged(O=>{if(O){const L=W(G,`usuarios/${O.uid}`);je(L,M=>{const N=M.val();r({...O,...N}),i(!1)})}else i(!1)}),w=W(G,"reservas"),T=je(w,O=>{c(O.val()||{})}),R=W(G,"ordenes"),E=je(R,O=>{d(O.val()||{})}),S=W(G,"mesas"),C=je(S,O=>{p(O.val()||{})});return()=>{v(),T(),E(),C()}},[]);const f=async()=>{try{await logout()}catch(v){console.error("Error al cerrar sesin:",v)}};return s?a.jsxs("div",{className:"loading-screen",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{children:"Cargando sistema de cajero..."})]}):n?a.jsxs("div",{className:"cajero-dashboard",children:[a.jsxs("header",{className:"cajero-header",children:[a.jsxs("div",{className:"header-left",children:[a.jsx("h1",{children:"CASA MIA - Sistema de Cajero"}),a.jsxs("div",{className:"user-info",children:[a.jsxs("span",{children:["Bienvenido, ",a.jsx("strong",{children:n.nombre||"Cajero"})]}),a.jsx("span",{className:"user-role",children:n.rol})]})]}),a.jsxs("div",{className:"header-right",children:[a.jsx("div",{className:"current-time",children:new Date().toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),a.jsx("button",{onClick:f,className:"logout-btn",children:"Cerrar Sesin"})]})]}),a.jsxs("nav",{className:"cajero-nav",children:[a.jsx("button",{className:`nav-tab ${t==="reservas"?"active":""}`,onClick:()=>e("reservas"),children:" Reservas"}),a.jsx("button",{className:`nav-tab ${t==="pendientes"?"active":""}`,onClick:()=>e("pendientes"),children:" rdenes Pendientes"}),a.jsx("button",{className:`nav-tab ${t==="pagos"?"active":""}`,onClick:()=>e("pagos"),children:" Procesar Pagos"}),a.jsx("button",{className:`nav-tab ${t==="boletas"?"active":""}`,onClick:()=>e("boletas"),children:" Generar Boletas"})]}),a.jsxs("main",{className:"cajero-main",children:[t==="reservas"&&a.jsx(FO,{reservations:o,mesas:m}),t==="pendientes"&&a.jsx(UO,{orders:u,mesas:m}),t==="pagos"&&a.jsx($O,{orders:u,mesas:m}),t==="boletas"&&a.jsx(VO,{orders:u})]})]}):a.jsxs("div",{className:"error-screen",children:[a.jsx("h2",{children:"Acceso Denegado"}),a.jsx("p",{children:"No tienes permisos para acceder al sistema de cajero."}),a.jsx("button",{onClick:()=>window.location.href="/",className:"btn-primary",children:"Volver al Inicio"})]})}function vd({children:t}){const{user:e,loading:n}=xa();return n?a.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"Cargando..."}):e?t:a.jsx("div",{style:{padding:"20px",textAlign:"center",color:"red"},children:"No tienes permisos para acceder a esta pgina."})}function HO(){const{user:t,loading:e}=xa(),n=Lp();return $y.useEffect(()=>{wA(n)},[n]),e?a.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"Cargando..."}):a.jsx("div",{className:"app-root",children:a.jsxs(db,{children:[a.jsx(zr,{path:"/",element:t?a.jsx(Cy,{to:jy(t.rol),replace:!0}):a.jsx(Bb,{})}),a.jsx(zr,{path:"/admin",element:a.jsx(SO,{children:a.jsx(EO,{})})}),a.jsx(zr,{path:"/mesero",element:a.jsx(vd,{children:a.jsx(RO,{})})}),a.jsx(zr,{path:"/cocinero",element:a.jsx(vd,{children:a.jsx(LO,{})})}),a.jsx(zr,{path:"/cajero",element:a.jsx(vd,{children:a.jsx(zO,{})})}),a.jsx(zr,{path:"*",element:a.jsx(Cy,{to:t?jy(t.rol):"/",replace:!0})})]})})}function BO(){return a.jsx(Ob,{children:a.jsx(HO,{})})}function jy(t){return{Admin:"/admin",Mesero:"/mesero",Cocinero:"/cocinero",Cajero:"/cajero"}[t]||"/"}Hw(document.getElementById("root")).render(a.jsx($y.StrictMode,{children:a.jsx(EA,{children:a.jsx(BO,{})})}));
